var ch=e=>{throw TypeError(e)};var Dl=(e,t,r)=>t.has(e)||ch("Cannot "+r);var w=(e,t,r)=>(Dl(e,t,"read from private field"),r?r.call(e):t.get(e)),V=(e,t,r)=>t.has(e)?ch("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),U=(e,t,r,n)=>(Dl(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ee=(e,t,r)=>(Dl(e,t,"access private method"),r);var Ba=(e,t,r,n)=>({set _(s){U(e,t,s,r)},get _(){return w(e,t,n)}});function $p(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Mp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fp={exports:{}},ll={},zp={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=Symbol.for("react.element"),my=Symbol.for("react.portal"),gy=Symbol.for("react.fragment"),vy=Symbol.for("react.strict_mode"),yy=Symbol.for("react.profiler"),wy=Symbol.for("react.provider"),_y=Symbol.for("react.context"),Sy=Symbol.for("react.forward_ref"),xy=Symbol.for("react.suspense"),Ey=Symbol.for("react.memo"),by=Symbol.for("react.lazy"),dh=Symbol.iterator;function ky(e){return e===null||typeof e!="object"?null:(e=dh&&e[dh]||e["@@iterator"],typeof e=="function"?e:null)}var Bp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wp=Object.assign,Vp={};function li(e,t,r){this.props=e,this.context=t,this.refs=Vp,this.updater=r||Bp}li.prototype.isReactComponent={};li.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};li.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hp(){}Hp.prototype=li.prototype;function Wc(e,t,r){this.props=e,this.context=t,this.refs=Vp,this.updater=r||Bp}var Vc=Wc.prototype=new Hp;Vc.constructor=Wc;Wp(Vc,li.prototype);Vc.isPureReactComponent=!0;var hh=Array.isArray,qp=Object.prototype.hasOwnProperty,Hc={current:null},Kp={key:!0,ref:!0,__self:!0,__source:!0};function Qp(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)qp.call(t,n)&&!Kp.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Ra,type:e,key:i,ref:a,props:s,_owner:Hc.current}}function Cy(e,t){return{$$typeof:Ra,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ra}function Ry(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fh=/\/+/g;function Ll(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ry(""+e.key):t.toString(36)}function go(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ra:case my:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Ll(a,0):n,hh(s)?(r="",e!=null&&(r=e.replace(fh,"$&/")+"/"),go(s,t,r,"",function(u){return u})):s!=null&&(qc(s)&&(s=Cy(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(fh,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",hh(e))for(var o=0;o<e.length;o++){i=e[o];var l=n+Ll(i,o);a+=go(i,t,r,l,s)}else if(l=ky(e),typeof l=="function")for(e=l.call(e),o=0;!(i=e.next()).done;)i=i.value,l=n+Ll(i,o++),a+=go(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Wa(e,t,r){if(e==null)return e;var n=[],s=0;return go(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Ty(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},vo={transition:null},Oy={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:vo,ReactCurrentOwner:Hc};function Gp(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Wa,forEach:function(e,t,r){Wa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Wa(e,function(){t++}),t},toArray:function(e){return Wa(e,function(t){return t})||[]},only:function(e){if(!qc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=li;ne.Fragment=gy;ne.Profiler=yy;ne.PureComponent=Wc;ne.StrictMode=vy;ne.Suspense=xy;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oy;ne.act=Gp;ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Wp({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Hc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)qp.call(t,l)&&!Kp.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Ra,type:e.type,key:s,ref:i,props:n,_owner:a}};ne.createContext=function(e){return e={$$typeof:_y,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wy,_context:e},e.Consumer=e};ne.createElement=Qp;ne.createFactory=function(e){var t=Qp.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:Sy,render:e}};ne.isValidElement=qc;ne.lazy=function(e){return{$$typeof:by,_payload:{_status:-1,_result:e},_init:Ty}};ne.memo=function(e,t){return{$$typeof:Ey,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=vo.transition;vo.transition={};try{e()}finally{vo.transition=t}};ne.unstable_act=Gp;ne.useCallback=function(e,t){return lt.current.useCallback(e,t)};ne.useContext=function(e){return lt.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};ne.useEffect=function(e,t){return lt.current.useEffect(e,t)};ne.useId=function(){return lt.current.useId()};ne.useImperativeHandle=function(e,t,r){return lt.current.useImperativeHandle(e,t,r)};ne.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return lt.current.useMemo(e,t)};ne.useReducer=function(e,t,r){return lt.current.useReducer(e,t,r)};ne.useRef=function(e){return lt.current.useRef(e)};ne.useState=function(e){return lt.current.useState(e)};ne.useSyncExternalStore=function(e,t,r){return lt.current.useSyncExternalStore(e,t,r)};ne.useTransition=function(){return lt.current.useTransition()};ne.version="18.3.1";zp.exports=ne;var R=zp.exports;const Py=Mp(R),jy=$p({__proto__:null,default:Py},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny=R,Ay=Symbol.for("react.element"),Iy=Symbol.for("react.fragment"),Dy=Object.prototype.hasOwnProperty,Ly=Ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uy={key:!0,ref:!0,__self:!0,__source:!0};function Jp(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Dy.call(t,n)&&!Uy.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Ay,type:e,key:i,ref:a,props:s,_owner:Ly.current}}ll.Fragment=Iy;ll.jsx=Jp;ll.jsxs=Jp;Fp.exports=ll;var _=Fp.exports,Yp={exports:{}},Rt={},Xp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,G){var Y=I.length;I.push(G);e:for(;0<Y;){var he=Y-1>>>1,fe=I[he];if(0<s(fe,G))I[he]=G,I[Y]=fe,Y=he;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var G=I[0],Y=I.pop();if(Y!==G){I[0]=Y;e:for(var he=0,fe=I.length,Ft=fe>>>1;he<Ft;){var yt=2*(he+1)-1,et=I[yt],tt=yt+1,Ot=I[tt];if(0>s(et,Y))tt<fe&&0>s(Ot,et)?(I[he]=Ot,I[tt]=Y,he=tt):(I[he]=et,I[yt]=Y,he=yt);else if(tt<fe&&0>s(Ot,Y))I[he]=Ot,I[tt]=Y,he=tt;else break e}}return G}function s(I,G){var Y=I.sortIndex-G.sortIndex;return Y!==0?Y:I.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,c=null,h=3,p=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(I){for(var G=r(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=I)n(u),G.sortIndex=G.expirationTime,t(l,G);else break;G=r(u)}}function E(I){if(v=!1,m(I),!y)if(r(l)!==null)y=!0,Ar(T);else{var G=r(u);G!==null&&Ir(E,G.startTime-I)}}function T(I,G){y=!1,v&&(v=!1,g(O),O=-1),p=!0;var Y=h;try{for(m(G),c=r(l);c!==null&&(!(c.expirationTime>G)||I&&!Q());){var he=c.callback;if(typeof he=="function"){c.callback=null,h=c.priorityLevel;var fe=he(c.expirationTime<=G);G=e.unstable_now(),typeof fe=="function"?c.callback=fe:c===r(l)&&n(l),m(G)}else n(l);c=r(l)}if(c!==null)var Ft=!0;else{var yt=r(u);yt!==null&&Ir(E,yt.startTime-G),Ft=!1}return Ft}finally{c=null,h=Y,p=!1}}var j=!1,S=null,O=-1,D=5,P=-1;function Q(){return!(e.unstable_now()-P<D)}function te(){if(S!==null){var I=e.unstable_now();P=I;var G=!0;try{G=S(!0,I)}finally{G?Z():(j=!1,S=null)}}else j=!1}var Z;if(typeof f=="function")Z=function(){f(te)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,Mt=We.port2;We.port1.onmessage=te,Z=function(){Mt.postMessage(null)}}else Z=function(){b(te,0)};function Ar(I){S=I,j||(j=!0,Z())}function Ir(I,G){O=b(function(){I(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,Ar(T))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var Y=h;h=G;try{return I()}finally{h=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,G){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Y=h;h=I;try{return G()}finally{h=Y}},e.unstable_scheduleCallback=function(I,G,Y){var he=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?he+Y:he):Y=he,I){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Y+fe,I={id:d++,callback:G,priorityLevel:I,startTime:Y,expirationTime:fe,sortIndex:-1},Y>he?(I.sortIndex=Y,t(u,I),r(l)===null&&I===r(u)&&(v?(g(O),O=-1):v=!0,Ir(E,Y-he))):(I.sortIndex=fe,t(l,I),y||p||(y=!0,Ar(T))),I},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(I){var G=h;return function(){var Y=h;h=G;try{return I.apply(this,arguments)}finally{h=Y}}}})(Zp);Xp.exports=Zp;var $y=Xp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My=R,Ct=$y;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var em=new Set,Qi={};function is(e,t){ti(e,t),ti(e+"Capture",t)}function ti(e,t){for(Qi[e]=t,e=0;e<t.length;e++)em.add(t[e])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Su=Object.prototype.hasOwnProperty,Fy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ph={},mh={};function zy(e){return Su.call(mh,e)?!0:Su.call(ph,e)?!1:Fy.test(e)?mh[e]=!0:(ph[e]=!0,!1)}function By(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wy(e,t,r,n){if(t===null||typeof t>"u"||By(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kc=/[\-:]([a-z])/g;function Qc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kc,Qc);Ge[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kc,Qc);Ge[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kc,Qc);Ge[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gc(e,t,r,n){var s=Ge.hasOwnProperty(t)?Ge[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wy(t,r,s,n)&&(r=null),n||s===null?zy(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Pr=My.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Va=Symbol.for("react.element"),xs=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),Jc=Symbol.for("react.strict_mode"),xu=Symbol.for("react.profiler"),tm=Symbol.for("react.provider"),rm=Symbol.for("react.context"),Yc=Symbol.for("react.forward_ref"),Eu=Symbol.for("react.suspense"),bu=Symbol.for("react.suspense_list"),Xc=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),nm=Symbol.for("react.offscreen"),gh=Symbol.iterator;function wi(e){return e===null||typeof e!="object"?null:(e=gh&&e[gh]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,Ul;function Pi(e){if(Ul===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ul=t&&t[1]||""}return`
`+Ul+e}var $l=!1;function Ml(e,t){if(!e||$l)return"";$l=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{$l=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Pi(e):""}function Vy(e){switch(e.tag){case 5:return Pi(e.type);case 16:return Pi("Lazy");case 13:return Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 2:case 15:return e=Ml(e.type,!1),e;case 11:return e=Ml(e.type.render,!1),e;case 1:return e=Ml(e.type,!0),e;default:return""}}function ku(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Es:return"Fragment";case xs:return"Portal";case xu:return"Profiler";case Jc:return"StrictMode";case Eu:return"Suspense";case bu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rm:return(e.displayName||"Context")+".Consumer";case tm:return(e._context.displayName||"Context")+".Provider";case Yc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xc:return t=e.displayName||null,t!==null?t:ku(e.type)||"Memo";case Fr:t=e._payload,e=e._init;try{return ku(e(t))}catch{}}return null}function Hy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ku(t);case 8:return t===Jc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qy(e){var t=sm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ha(e){e._valueTracker||(e._valueTracker=qy(e))}function im(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=sm(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Po(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cu(e,t){var r=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function vh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=pn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function am(e,t){t=t.checked,t!=null&&Gc(e,"checked",t,!1)}function Ru(e,t){am(e,t);var r=pn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tu(e,t.type,r):t.hasOwnProperty("defaultValue")&&Tu(e,t.type,pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Tu(e,t,r){(t!=="number"||Po(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ji=Array.isArray;function Ds(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+pn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ou(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(A(92));if(ji(r)){if(1<r.length)throw Error(A(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:pn(r)}}function om(e,t){var r=pn(t.value),n=pn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function _h(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qa,um=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ky=["Webkit","ms","Moz","O"];Object.keys(Ui).forEach(function(e){Ky.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ui[t]=Ui[e]})});function cm(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ui.hasOwnProperty(e)&&Ui[e]?(""+t).trim():t+"px"}function dm(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=cm(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Qy=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ju(e,t){if(t){if(Qy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Nu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au=null;function Zc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Iu=null,Ls=null,Us=null;function Sh(e){if(e=Pa(e)){if(typeof Iu!="function")throw Error(A(280));var t=e.stateNode;t&&(t=fl(t),Iu(e.stateNode,e.type,t))}}function hm(e){Ls?Us?Us.push(e):Us=[e]:Ls=e}function fm(){if(Ls){var e=Ls,t=Us;if(Us=Ls=null,Sh(e),t)for(e=0;e<t.length;e++)Sh(t[e])}}function pm(e,t){return e(t)}function mm(){}var Fl=!1;function gm(e,t,r){if(Fl)return e(t,r);Fl=!0;try{return pm(e,t,r)}finally{Fl=!1,(Ls!==null||Us!==null)&&(mm(),fm())}}function Ji(e,t){var r=e.stateNode;if(r===null)return null;var n=fl(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(A(231,t,typeof r));return r}var Du=!1;if(Cr)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){Du=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{Du=!1}function Gy(e,t,r,n,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var $i=!1,jo=null,No=!1,Lu=null,Jy={onError:function(e){$i=!0,jo=e}};function Yy(e,t,r,n,s,i,a,o,l){$i=!1,jo=null,Gy.apply(Jy,arguments)}function Xy(e,t,r,n,s,i,a,o,l){if(Yy.apply(this,arguments),$i){if($i){var u=jo;$i=!1,jo=null}else throw Error(A(198));No||(No=!0,Lu=u)}}function as(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function vm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xh(e){if(as(e)!==e)throw Error(A(188))}function Zy(e){var t=e.alternate;if(!t){if(t=as(e),t===null)throw Error(A(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return xh(s),e;if(i===n)return xh(s),t;i=i.sibling}throw Error(A(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?e:t}function ym(e){return e=Zy(e),e!==null?wm(e):null}function wm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wm(e);if(t!==null)return t;e=e.sibling}return null}var _m=Ct.unstable_scheduleCallback,Eh=Ct.unstable_cancelCallback,ew=Ct.unstable_shouldYield,tw=Ct.unstable_requestPaint,je=Ct.unstable_now,rw=Ct.unstable_getCurrentPriorityLevel,ed=Ct.unstable_ImmediatePriority,Sm=Ct.unstable_UserBlockingPriority,Ao=Ct.unstable_NormalPriority,nw=Ct.unstable_LowPriority,xm=Ct.unstable_IdlePriority,ul=null,or=null;function sw(e){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(ul,e,void 0,(e.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:ow,iw=Math.log,aw=Math.LN2;function ow(e){return e>>>=0,e===0?32:31-(iw(e)/aw|0)|0}var Ka=64,Qa=4194304;function Ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Io(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Ni(o):(i&=a,i!==0&&(n=Ni(i)))}else a=r&~s,a!==0?n=Ni(a):i!==0&&(n=Ni(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Yt(t),s=1<<r,n|=e[r],t&=~s;return n}function lw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uw(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Yt(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=lw(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}function Uu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Em(){var e=Ka;return Ka<<=1,!(Ka&4194240)&&(Ka=64),e}function zl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ta(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yt(t),e[t]=r}function cw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Yt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function td(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Yt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var de=0;function bm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var km,rd,Cm,Rm,Tm,$u=!1,Ga=[],sn=null,an=null,on=null,Yi=new Map,Xi=new Map,Wr=[],dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":Yi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(t.pointerId)}}function Si(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Pa(t),t!==null&&rd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function hw(e,t,r,n,s){switch(t){case"focusin":return sn=Si(sn,e,t,r,n,s),!0;case"dragenter":return an=Si(an,e,t,r,n,s),!0;case"mouseover":return on=Si(on,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Yi.set(i,Si(Yi.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Xi.set(i,Si(Xi.get(i)||null,e,t,r,n,s)),!0}return!1}function Om(e){var t=An(e.target);if(t!==null){var r=as(t);if(r!==null){if(t=r.tag,t===13){if(t=vm(r),t!==null){e.blockedOn=t,Tm(e.priority,function(){Cm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Mu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Au=n,r.target.dispatchEvent(n),Au=null}else return t=Pa(r),t!==null&&rd(t),e.blockedOn=r,!1;t.shift()}return!0}function kh(e,t,r){yo(e)&&r.delete(t)}function fw(){$u=!1,sn!==null&&yo(sn)&&(sn=null),an!==null&&yo(an)&&(an=null),on!==null&&yo(on)&&(on=null),Yi.forEach(kh),Xi.forEach(kh)}function xi(e,t){e.blockedOn===t&&(e.blockedOn=null,$u||($u=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,fw)))}function Zi(e){function t(s){return xi(s,e)}if(0<Ga.length){xi(Ga[0],e);for(var r=1;r<Ga.length;r++){var n=Ga[r];n.blockedOn===e&&(n.blockedOn=null)}}for(sn!==null&&xi(sn,e),an!==null&&xi(an,e),on!==null&&xi(on,e),Yi.forEach(t),Xi.forEach(t),r=0;r<Wr.length;r++)n=Wr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Wr.length&&(r=Wr[0],r.blockedOn===null);)Om(r),r.blockedOn===null&&Wr.shift()}var $s=Pr.ReactCurrentBatchConfig,Do=!0;function pw(e,t,r,n){var s=de,i=$s.transition;$s.transition=null;try{de=1,nd(e,t,r,n)}finally{de=s,$s.transition=i}}function mw(e,t,r,n){var s=de,i=$s.transition;$s.transition=null;try{de=4,nd(e,t,r,n)}finally{de=s,$s.transition=i}}function nd(e,t,r,n){if(Do){var s=Mu(e,t,r,n);if(s===null)Yl(e,t,n,Lo,r),bh(e,n);else if(hw(s,e,t,r,n))n.stopPropagation();else if(bh(e,n),t&4&&-1<dw.indexOf(e)){for(;s!==null;){var i=Pa(s);if(i!==null&&km(i),i=Mu(e,t,r,n),i===null&&Yl(e,t,n,Lo,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Yl(e,t,n,null,r)}}var Lo=null;function Mu(e,t,r,n){if(Lo=null,e=Zc(n),e=An(e),e!==null)if(t=as(e),t===null)e=null;else if(r=t.tag,r===13){if(e=vm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Lo=e,null}function Pm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rw()){case ed:return 1;case Sm:return 4;case Ao:case nw:return 16;case xm:return 536870912;default:return 16}default:return 16}}var tn=null,sd=null,wo=null;function jm(){if(wo)return wo;var e,t=sd,r=t.length,n,s="value"in tn?tn.value:tn.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return wo=s.slice(e,1<n?1-n:void 0)}function _o(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ja(){return!0}function Ch(){return!1}function Tt(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ja:Ch,this.isPropagationStopped=Ch,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),t}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=Tt(ui),Oa=ke({},ui,{view:0,detail:0}),gw=Tt(Oa),Bl,Wl,Ei,cl=ke({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ad,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(Bl=e.screenX-Ei.screenX,Wl=e.screenY-Ei.screenY):Wl=Bl=0,Ei=e),Bl)},movementY:function(e){return"movementY"in e?e.movementY:Wl}}),Rh=Tt(cl),vw=ke({},cl,{dataTransfer:0}),yw=Tt(vw),ww=ke({},Oa,{relatedTarget:0}),Vl=Tt(ww),_w=ke({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Sw=Tt(_w),xw=ke({},ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ew=Tt(xw),bw=ke({},ui,{data:0}),Th=Tt(bw),kw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rw[e])?!!t[e]:!1}function ad(){return Tw}var Ow=ke({},Oa,{key:function(e){if(e.key){var t=kw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_o(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ad,charCode:function(e){return e.type==="keypress"?_o(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_o(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pw=Tt(Ow),jw=ke({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oh=Tt(jw),Nw=ke({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ad}),Aw=Tt(Nw),Iw=ke({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dw=Tt(Iw),Lw=ke({},cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Uw=Tt(Lw),$w=[9,13,27,32],od=Cr&&"CompositionEvent"in window,Mi=null;Cr&&"documentMode"in document&&(Mi=document.documentMode);var Mw=Cr&&"TextEvent"in window&&!Mi,Nm=Cr&&(!od||Mi&&8<Mi&&11>=Mi),Ph=" ",jh=!1;function Am(e,t){switch(e){case"keyup":return $w.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function Fw(e,t){switch(e){case"compositionend":return Im(t);case"keypress":return t.which!==32?null:(jh=!0,Ph);case"textInput":return e=t.data,e===Ph&&jh?null:e;default:return null}}function zw(e,t){if(bs)return e==="compositionend"||!od&&Am(e,t)?(e=jm(),wo=sd=tn=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nm&&t.locale!=="ko"?null:t.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bw[e.type]:t==="textarea"}function Dm(e,t,r,n){hm(n),t=Uo(t,"onChange"),0<t.length&&(r=new id("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Fi=null,ea=null;function Ww(e){qm(e,0)}function dl(e){var t=Rs(e);if(im(t))return e}function Vw(e,t){if(e==="change")return t}var Lm=!1;if(Cr){var Hl;if(Cr){var ql="oninput"in document;if(!ql){var Ah=document.createElement("div");Ah.setAttribute("oninput","return;"),ql=typeof Ah.oninput=="function"}Hl=ql}else Hl=!1;Lm=Hl&&(!document.documentMode||9<document.documentMode)}function Ih(){Fi&&(Fi.detachEvent("onpropertychange",Um),ea=Fi=null)}function Um(e){if(e.propertyName==="value"&&dl(ea)){var t=[];Dm(t,ea,e,Zc(e)),gm(Ww,t)}}function Hw(e,t,r){e==="focusin"?(Ih(),Fi=t,ea=r,Fi.attachEvent("onpropertychange",Um)):e==="focusout"&&Ih()}function qw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dl(ea)}function Kw(e,t){if(e==="click")return dl(t)}function Qw(e,t){if(e==="input"||e==="change")return dl(t)}function Gw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:Gw;function ta(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Su.call(t,s)||!Zt(e[s],t[s]))return!1}return!0}function Dh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lh(e,t){var r=Dh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Dh(r)}}function $m(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$m(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mm(){for(var e=window,t=Po();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Po(e.document)}return t}function ld(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jw(e){var t=Mm(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&$m(r.ownerDocument.documentElement,r)){if(n!==null&&ld(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Lh(r,i);var a=Lh(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yw=Cr&&"documentMode"in document&&11>=document.documentMode,ks=null,Fu=null,zi=null,zu=!1;function Uh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zu||ks==null||ks!==Po(n)||(n=ks,"selectionStart"in n&&ld(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zi&&ta(zi,n)||(zi=n,n=Uo(Fu,"onSelect"),0<n.length&&(t=new id("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ks)))}function Ya(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cs={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionend:Ya("Transition","TransitionEnd")},Kl={},Fm={};Cr&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function hl(e){if(Kl[e])return Kl[e];if(!Cs[e])return e;var t=Cs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fm)return Kl[e]=t[r];return e}var zm=hl("animationend"),Bm=hl("animationiteration"),Wm=hl("animationstart"),Vm=hl("transitionend"),Hm=new Map,$h="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(e,t){Hm.set(e,t),is(t,[e])}for(var Ql=0;Ql<$h.length;Ql++){var Gl=$h[Ql],Xw=Gl.toLowerCase(),Zw=Gl[0].toUpperCase()+Gl.slice(1);vn(Xw,"on"+Zw)}vn(zm,"onAnimationEnd");vn(Bm,"onAnimationIteration");vn(Wm,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(Vm,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ai));function Mh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Xy(n,t,void 0,e),e.currentTarget=null}function qm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mh(s,o,u),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mh(s,o,u),i=l}}}if(No)throw e=Lu,No=!1,Lu=null,e}function ye(e,t){var r=t[qu];r===void 0&&(r=t[qu]=new Set);var n=e+"__bubble";r.has(n)||(Km(t,e,2,!1),r.add(n))}function Jl(e,t,r){var n=0;t&&(n|=4),Km(r,e,n,t)}var Xa="_reactListening"+Math.random().toString(36).slice(2);function ra(e){if(!e[Xa]){e[Xa]=!0,em.forEach(function(r){r!=="selectionchange"&&(e0.has(r)||Jl(r,!1,e),Jl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xa]||(t[Xa]=!0,Jl("selectionchange",!1,t))}}function Km(e,t,r,n){switch(Pm(t)){case 1:var s=pw;break;case 4:s=mw;break;default:s=nd}r=s.bind(null,t,r,e),s=void 0,!Du||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Yl(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=An(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}gm(function(){var u=i,d=Zc(r),c=[];e:{var h=Hm.get(e);if(h!==void 0){var p=id,y=e;switch(e){case"keypress":if(_o(r)===0)break e;case"keydown":case"keyup":p=Pw;break;case"focusin":y="focus",p=Vl;break;case"focusout":y="blur",p=Vl;break;case"beforeblur":case"afterblur":p=Vl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Aw;break;case zm:case Bm:case Wm:p=Sw;break;case Vm:p=Dw;break;case"scroll":p=gw;break;case"wheel":p=Uw;break;case"copy":case"cut":case"paste":p=Ew;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Oh}var v=(t&4)!==0,b=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var f=u,m;f!==null;){m=f;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,g!==null&&(E=Ji(f,g),E!=null&&v.push(na(f,E,m)))),b)break;f=f.return}0<v.length&&(h=new p(h,y,null,r,d),c.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Au&&(y=r.relatedTarget||r.fromElement)&&(An(y)||y[Rr]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?An(y):null,y!==null&&(b=as(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(v=Rh,E="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(v=Oh,E="onPointerLeave",g="onPointerEnter",f="pointer"),b=p==null?h:Rs(p),m=y==null?h:Rs(y),h=new v(E,f+"leave",p,r,d),h.target=b,h.relatedTarget=m,E=null,An(d)===u&&(v=new v(g,f+"enter",y,r,d),v.target=m,v.relatedTarget=b,E=v),b=E,p&&y)t:{for(v=p,g=y,f=0,m=v;m;m=ds(m))f++;for(m=0,E=g;E;E=ds(E))m++;for(;0<f-m;)v=ds(v),f--;for(;0<m-f;)g=ds(g),m--;for(;f--;){if(v===g||g!==null&&v===g.alternate)break t;v=ds(v),g=ds(g)}v=null}else v=null;p!==null&&Fh(c,h,p,v,!1),y!==null&&b!==null&&Fh(c,b,y,v,!0)}}e:{if(h=u?Rs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var T=Vw;else if(Nh(h))if(Lm)T=Qw;else{T=qw;var j=Hw}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=Kw);if(T&&(T=T(e,u))){Dm(c,T,r,d);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Tu(h,"number",h.value)}switch(j=u?Rs(u):window,e){case"focusin":(Nh(j)||j.contentEditable==="true")&&(ks=j,Fu=u,zi=null);break;case"focusout":zi=Fu=ks=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,Uh(c,r,d);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":Uh(c,r,d)}var S;if(od)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else bs?Am(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(Nm&&r.locale!=="ko"&&(bs||O!=="onCompositionStart"?O==="onCompositionEnd"&&bs&&(S=jm()):(tn=d,sd="value"in tn?tn.value:tn.textContent,bs=!0)),j=Uo(u,O),0<j.length&&(O=new Th(O,e,null,r,d),c.push({event:O,listeners:j}),S?O.data=S:(S=Im(r),S!==null&&(O.data=S)))),(S=Mw?Fw(e,r):zw(e,r))&&(u=Uo(u,"onBeforeInput"),0<u.length&&(d=new Th("onBeforeInput","beforeinput",null,r,d),c.push({event:d,listeners:u}),d.data=S))}qm(c,t)})}function na(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Uo(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ji(e,r),i!=null&&n.unshift(na(e,i,s)),i=Ji(e,t),i!=null&&n.push(na(e,i,s))),e=e.return}return n}function ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fh(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,s?(l=Ji(r,i),l!=null&&a.unshift(na(r,l,o))):s||(l=Ji(r,i),l!=null&&a.push(na(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var t0=/\r\n?/g,r0=/\u0000|\uFFFD/g;function zh(e){return(typeof e=="string"?e:""+e).replace(t0,`
`).replace(r0,"")}function Za(e,t,r){if(t=zh(t),zh(e)!==t&&r)throw Error(A(425))}function $o(){}var Bu=null,Wu=null;function Vu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hu=typeof setTimeout=="function"?setTimeout:void 0,n0=typeof clearTimeout=="function"?clearTimeout:void 0,Bh=typeof Promise=="function"?Promise:void 0,s0=typeof queueMicrotask=="function"?queueMicrotask:typeof Bh<"u"?function(e){return Bh.resolve(null).then(e).catch(i0)}:Hu;function i0(e){setTimeout(function(){throw e})}function Xl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Zi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Zi(t)}function ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ci=Math.random().toString(36).slice(2),ar="__reactFiber$"+ci,sa="__reactProps$"+ci,Rr="__reactContainer$"+ci,qu="__reactEvents$"+ci,a0="__reactListeners$"+ci,o0="__reactHandles$"+ci;function An(e){var t=e[ar];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rr]||r[ar]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Wh(e);e!==null;){if(r=e[ar])return r;e=Wh(e)}return t}e=r,r=e.parentNode}return null}function Pa(e){return e=e[ar]||e[Rr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function fl(e){return e[sa]||null}var Ku=[],Ts=-1;function yn(e){return{current:e}}function we(e){0>Ts||(e.current=Ku[Ts],Ku[Ts]=null,Ts--)}function ve(e,t){Ts++,Ku[Ts]=e.current,e.current=t}var mn={},Ze=yn(mn),mt=yn(!1),Yn=mn;function ri(e,t){var r=e.type.contextTypes;if(!r)return mn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gt(e){return e=e.childContextTypes,e!=null}function Mo(){we(mt),we(Ze)}function Vh(e,t,r){if(Ze.current!==mn)throw Error(A(168));ve(Ze,t),ve(mt,r)}function Qm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(A(108,Hy(e)||"Unknown",s));return ke({},r,n)}function Fo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,Yn=Ze.current,ve(Ze,e),ve(mt,mt.current),!0}function Hh(e,t,r){var n=e.stateNode;if(!n)throw Error(A(169));r?(e=Qm(e,t,Yn),n.__reactInternalMemoizedMergedChildContext=e,we(mt),we(Ze),ve(Ze,e)):we(mt),ve(mt,r)}var gr=null,pl=!1,Zl=!1;function Gm(e){gr===null?gr=[e]:gr.push(e)}function l0(e){pl=!0,Gm(e)}function wn(){if(!Zl&&gr!==null){Zl=!0;var e=0,t=de;try{var r=gr;for(de=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gr=null,pl=!1}catch(s){throw gr!==null&&(gr=gr.slice(e+1)),_m(ed,wn),s}finally{de=t,Zl=!1}}return null}var Os=[],Ps=0,zo=null,Bo=0,Nt=[],At=0,Xn=null,Sr=1,xr="";function Cn(e,t){Os[Ps++]=Bo,Os[Ps++]=zo,zo=e,Bo=t}function Jm(e,t,r){Nt[At++]=Sr,Nt[At++]=xr,Nt[At++]=Xn,Xn=e;var n=Sr;e=xr;var s=32-Yt(n)-1;n&=~(1<<s),r+=1;var i=32-Yt(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Sr=1<<32-Yt(t)+s|r<<s|n,xr=i+e}else Sr=1<<i|r<<s|n,xr=e}function ud(e){e.return!==null&&(Cn(e,1),Jm(e,1,0))}function cd(e){for(;e===zo;)zo=Os[--Ps],Os[Ps]=null,Bo=Os[--Ps],Os[Ps]=null;for(;e===Xn;)Xn=Nt[--At],Nt[At]=null,xr=Nt[--At],Nt[At]=null,Sr=Nt[--At],Nt[At]=null}var kt=null,bt=null,Se=!1,Jt=null;function Ym(e,t){var r=It(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,bt=ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Xn!==null?{id:Sr,overflow:xr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=It(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,kt=e,bt=null,!0):!1;default:return!1}}function Qu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gu(e){if(Se){var t=bt;if(t){var r=t;if(!qh(e,t)){if(Qu(e))throw Error(A(418));t=ln(r.nextSibling);var n=kt;t&&qh(e,t)?Ym(n,r):(e.flags=e.flags&-4097|2,Se=!1,kt=e)}}else{if(Qu(e))throw Error(A(418));e.flags=e.flags&-4097|2,Se=!1,kt=e}}}function Kh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function eo(e){if(e!==kt)return!1;if(!Se)return Kh(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vu(e.type,e.memoizedProps)),t&&(t=bt)){if(Qu(e))throw Xm(),Error(A(418));for(;t;)Ym(e,t),t=ln(t.nextSibling)}if(Kh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){bt=ln(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=kt?ln(e.stateNode.nextSibling):null;return!0}function Xm(){for(var e=bt;e;)e=ln(e.nextSibling)}function ni(){bt=kt=null,Se=!1}function dd(e){Jt===null?Jt=[e]:Jt.push(e)}var u0=Pr.ReactCurrentBatchConfig;function bi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,e))}return e}function to(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qh(e){var t=e._init;return t(e._payload)}function Zm(e){function t(g,f){if(e){var m=g.deletions;m===null?(g.deletions=[f],g.flags|=16):m.push(f)}}function r(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function n(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=hn(g,f),g.index=0,g.sibling=null,g}function i(g,f,m){return g.index=m,e?(m=g.alternate,m!==null?(m=m.index,m<f?(g.flags|=2,f):m):(g.flags|=2,f)):(g.flags|=1048576,f)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,f,m,E){return f===null||f.tag!==6?(f=au(m,g.mode,E),f.return=g,f):(f=s(f,m),f.return=g,f)}function l(g,f,m,E){var T=m.type;return T===Es?d(g,f,m.props.children,E,m.key):f!==null&&(f.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Fr&&Qh(T)===f.type)?(E=s(f,m.props),E.ref=bi(g,f,m),E.return=g,E):(E=Ro(m.type,m.key,m.props,null,g.mode,E),E.ref=bi(g,f,m),E.return=g,E)}function u(g,f,m,E){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=ou(m,g.mode,E),f.return=g,f):(f=s(f,m.children||[]),f.return=g,f)}function d(g,f,m,E,T){return f===null||f.tag!==7?(f=Gn(m,g.mode,E,T),f.return=g,f):(f=s(f,m),f.return=g,f)}function c(g,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=au(""+f,g.mode,m),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Va:return m=Ro(f.type,f.key,f.props,null,g.mode,m),m.ref=bi(g,null,f),m.return=g,m;case xs:return f=ou(f,g.mode,m),f.return=g,f;case Fr:var E=f._init;return c(g,E(f._payload),m)}if(ji(f)||wi(f))return f=Gn(f,g.mode,m,null),f.return=g,f;to(g,f)}return null}function h(g,f,m,E){var T=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return T!==null?null:o(g,f,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Va:return m.key===T?l(g,f,m,E):null;case xs:return m.key===T?u(g,f,m,E):null;case Fr:return T=m._init,h(g,f,T(m._payload),E)}if(ji(m)||wi(m))return T!==null?null:d(g,f,m,E,null);to(g,m)}return null}function p(g,f,m,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(m)||null,o(f,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Va:return g=g.get(E.key===null?m:E.key)||null,l(f,g,E,T);case xs:return g=g.get(E.key===null?m:E.key)||null,u(f,g,E,T);case Fr:var j=E._init;return p(g,f,m,j(E._payload),T)}if(ji(E)||wi(E))return g=g.get(m)||null,d(f,g,E,T,null);to(f,E)}return null}function y(g,f,m,E){for(var T=null,j=null,S=f,O=f=0,D=null;S!==null&&O<m.length;O++){S.index>O?(D=S,S=null):D=S.sibling;var P=h(g,S,m[O],E);if(P===null){S===null&&(S=D);break}e&&S&&P.alternate===null&&t(g,S),f=i(P,f,O),j===null?T=P:j.sibling=P,j=P,S=D}if(O===m.length)return r(g,S),Se&&Cn(g,O),T;if(S===null){for(;O<m.length;O++)S=c(g,m[O],E),S!==null&&(f=i(S,f,O),j===null?T=S:j.sibling=S,j=S);return Se&&Cn(g,O),T}for(S=n(g,S);O<m.length;O++)D=p(S,g,O,m[O],E),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?O:D.key),f=i(D,f,O),j===null?T=D:j.sibling=D,j=D);return e&&S.forEach(function(Q){return t(g,Q)}),Se&&Cn(g,O),T}function v(g,f,m,E){var T=wi(m);if(typeof T!="function")throw Error(A(150));if(m=T.call(m),m==null)throw Error(A(151));for(var j=T=null,S=f,O=f=0,D=null,P=m.next();S!==null&&!P.done;O++,P=m.next()){S.index>O?(D=S,S=null):D=S.sibling;var Q=h(g,S,P.value,E);if(Q===null){S===null&&(S=D);break}e&&S&&Q.alternate===null&&t(g,S),f=i(Q,f,O),j===null?T=Q:j.sibling=Q,j=Q,S=D}if(P.done)return r(g,S),Se&&Cn(g,O),T;if(S===null){for(;!P.done;O++,P=m.next())P=c(g,P.value,E),P!==null&&(f=i(P,f,O),j===null?T=P:j.sibling=P,j=P);return Se&&Cn(g,O),T}for(S=n(g,S);!P.done;O++,P=m.next())P=p(S,g,O,P.value,E),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?O:P.key),f=i(P,f,O),j===null?T=P:j.sibling=P,j=P);return e&&S.forEach(function(te){return t(g,te)}),Se&&Cn(g,O),T}function b(g,f,m,E){if(typeof m=="object"&&m!==null&&m.type===Es&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Va:e:{for(var T=m.key,j=f;j!==null;){if(j.key===T){if(T=m.type,T===Es){if(j.tag===7){r(g,j.sibling),f=s(j,m.props.children),f.return=g,g=f;break e}}else if(j.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Fr&&Qh(T)===j.type){r(g,j.sibling),f=s(j,m.props),f.ref=bi(g,j,m),f.return=g,g=f;break e}r(g,j);break}else t(g,j);j=j.sibling}m.type===Es?(f=Gn(m.props.children,g.mode,E,m.key),f.return=g,g=f):(E=Ro(m.type,m.key,m.props,null,g.mode,E),E.ref=bi(g,f,m),E.return=g,g=E)}return a(g);case xs:e:{for(j=m.key;f!==null;){if(f.key===j)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){r(g,f.sibling),f=s(f,m.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else t(g,f);f=f.sibling}f=ou(m,g.mode,E),f.return=g,g=f}return a(g);case Fr:return j=m._init,b(g,f,j(m._payload),E)}if(ji(m))return y(g,f,m,E);if(wi(m))return v(g,f,m,E);to(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(r(g,f.sibling),f=s(f,m),f.return=g,g=f):(r(g,f),f=au(m,g.mode,E),f.return=g,g=f),a(g)):r(g,f)}return b}var si=Zm(!0),eg=Zm(!1),Wo=yn(null),Vo=null,js=null,hd=null;function fd(){hd=js=Vo=null}function pd(e){var t=Wo.current;we(Wo),e._currentValue=t}function Ju(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ms(e,t){Vo=e,hd=js=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pt=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(hd!==e)if(e={context:e,memoizedValue:t,next:null},js===null){if(Vo===null)throw Error(A(308));js=e,Vo.dependencies={lanes:0,firstContext:e}}else js=js.next=e;return t}var In=null;function md(e){In===null?In=[e]:In.push(e)}function tg(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,md(t)):(r.next=s.next,s.next=r),t.interleaved=r,Tr(e,n)}function Tr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var zr=!1;function gd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function un(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ae&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Tr(e,r)}return s=n.interleaved,s===null?(t.next=t,md(n)):(t.next=s.next,s.next=t),n.interleaved=t,Tr(e,r)}function So(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,td(e,r)}}function Gh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ho(e,t,r,n){var s=e.updateQueue;zr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(i!==null){var c=s.baseState;a=0,d=u=l=null,o=i;do{var h=o.lane,p=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,v=o;switch(h=t,p=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){c=y.call(p,c,h);break e}c=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(p,c,h):y,h==null)break e;c=ke({},c,h);break e;case 2:zr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,l=c):d=d.next=p,a|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=c),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);es|=a,e.lanes=a,e.memoizedState=c}}function Jh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(A(191,s));s.call(n)}}}var ja={},lr=yn(ja),ia=yn(ja),aa=yn(ja);function Dn(e){if(e===ja)throw Error(A(174));return e}function vd(e,t){switch(ve(aa,t),ve(ia,e),ve(lr,ja),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pu(t,e)}we(lr),ve(lr,t)}function ii(){we(lr),we(ia),we(aa)}function ng(e){Dn(aa.current);var t=Dn(lr.current),r=Pu(t,e.type);t!==r&&(ve(ia,e),ve(lr,r))}function yd(e){ia.current===e&&(we(lr),we(ia))}var Ee=yn(0);function qo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var eu=[];function wd(){for(var e=0;e<eu.length;e++)eu[e]._workInProgressVersionPrimary=null;eu.length=0}var xo=Pr.ReactCurrentDispatcher,tu=Pr.ReactCurrentBatchConfig,Zn=0,be=null,Ue=null,ze=null,Ko=!1,Bi=!1,oa=0,c0=0;function Je(){throw Error(A(321))}function _d(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zt(e[r],t[r]))return!1;return!0}function Sd(e,t,r,n,s,i){if(Zn=i,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xo.current=e===null||e.memoizedState===null?p0:m0,e=r(n,s),Bi){i=0;do{if(Bi=!1,oa=0,25<=i)throw Error(A(301));i+=1,ze=Ue=null,t.updateQueue=null,xo.current=g0,e=r(n,s)}while(Bi)}if(xo.current=Qo,t=Ue!==null&&Ue.next!==null,Zn=0,ze=Ue=be=null,Ko=!1,t)throw Error(A(300));return e}function xd(){var e=oa!==0;return oa=0,e}function rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?be.memoizedState=ze=e:ze=ze.next=e,ze}function $t(){if(Ue===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=ze===null?be.memoizedState:ze.next;if(t!==null)ze=t,Ue=e;else{if(e===null)throw Error(A(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},ze===null?be.memoizedState=ze=e:ze=ze.next=e}return ze}function la(e,t){return typeof t=="function"?t(e):t}function ru(e){var t=$t(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=Ue,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,u=i;do{var d=u.lane;if((Zn&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=c,a=n):l=l.next=c,be.lanes|=d,es|=d}u=u.next}while(u!==null&&u!==i);l===null?a=n:l.next=o,Zt(n,t.memoizedState)||(pt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,be.lanes|=i,es|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nu(e){var t=$t(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Zt(i,t.memoizedState)||(pt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function sg(){}function ig(e,t){var r=be,n=$t(),s=t(),i=!Zt(n.memoizedState,s);if(i&&(n.memoizedState=s,pt=!0),n=n.queue,Ed(lg.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ze!==null&&ze.memoizedState.tag&1){if(r.flags|=2048,ua(9,og.bind(null,r,n,s,t),void 0,null),Be===null)throw Error(A(349));Zn&30||ag(r,t,s)}return s}function ag(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function og(e,t,r,n){t.value=r,t.getSnapshot=n,ug(t)&&cg(e)}function lg(e,t,r){return r(function(){ug(t)&&cg(e)})}function ug(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zt(e,r)}catch{return!0}}function cg(e){var t=Tr(e,1);t!==null&&Xt(t,e,1,-1)}function Yh(e){var t=rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},t.queue=e,e=e.dispatch=f0.bind(null,be,e),[t.memoizedState,e]}function ua(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function dg(){return $t().memoizedState}function Eo(e,t,r,n){var s=rr();be.flags|=e,s.memoizedState=ua(1|t,r,void 0,n===void 0?null:n)}function ml(e,t,r,n){var s=$t();n=n===void 0?null:n;var i=void 0;if(Ue!==null){var a=Ue.memoizedState;if(i=a.destroy,n!==null&&_d(n,a.deps)){s.memoizedState=ua(t,r,i,n);return}}be.flags|=e,s.memoizedState=ua(1|t,r,i,n)}function Xh(e,t){return Eo(8390656,8,e,t)}function Ed(e,t){return ml(2048,8,e,t)}function hg(e,t){return ml(4,2,e,t)}function fg(e,t){return ml(4,4,e,t)}function pg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mg(e,t,r){return r=r!=null?r.concat([e]):null,ml(4,4,pg.bind(null,t,e),r)}function bd(){}function gg(e,t){var r=$t();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_d(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function vg(e,t){var r=$t();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_d(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function yg(e,t,r){return Zn&21?(Zt(r,t)||(r=Em(),be.lanes|=r,es|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pt=!0),e.memoizedState=r)}function d0(e,t){var r=de;de=r!==0&&4>r?r:4,e(!0);var n=tu.transition;tu.transition={};try{e(!1),t()}finally{de=r,tu.transition=n}}function wg(){return $t().memoizedState}function h0(e,t,r){var n=dn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_g(e))Sg(t,r);else if(r=tg(e,t,r,n),r!==null){var s=ot();Xt(r,e,n,s),xg(r,t,n)}}function f0(e,t,r){var n=dn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_g(e))Sg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,Zt(o,a)){var l=t.interleaved;l===null?(s.next=s,md(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=tg(e,t,s,n),r!==null&&(s=ot(),Xt(r,e,n,s),xg(r,t,n))}}function _g(e){var t=e.alternate;return e===be||t!==null&&t===be}function Sg(e,t){Bi=Ko=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xg(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,td(e,r)}}var Qo={readContext:Ut,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},p0={readContext:Ut,useCallback:function(e,t){return rr().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:Xh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Eo(4194308,4,pg.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Eo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Eo(4,2,e,t)},useMemo:function(e,t){var r=rr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=rr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=h0.bind(null,be,e),[n.memoizedState,e]},useRef:function(e){var t=rr();return e={current:e},t.memoizedState=e},useState:Yh,useDebugValue:bd,useDeferredValue:function(e){return rr().memoizedState=e},useTransition:function(){var e=Yh(!1),t=e[0];return e=d0.bind(null,e[1]),rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=be,s=rr();if(Se){if(r===void 0)throw Error(A(407));r=r()}else{if(r=t(),Be===null)throw Error(A(349));Zn&30||ag(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Xh(lg.bind(null,n,i,e),[e]),n.flags|=2048,ua(9,og.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=rr(),t=Be.identifierPrefix;if(Se){var r=xr,n=Sr;r=(n&~(1<<32-Yt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=oa++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=c0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},m0={readContext:Ut,useCallback:gg,useContext:Ut,useEffect:Ed,useImperativeHandle:mg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:vg,useReducer:ru,useRef:dg,useState:function(){return ru(la)},useDebugValue:bd,useDeferredValue:function(e){var t=$t();return yg(t,Ue.memoizedState,e)},useTransition:function(){var e=ru(la)[0],t=$t().memoizedState;return[e,t]},useMutableSource:sg,useSyncExternalStore:ig,useId:wg,unstable_isNewReconciler:!1},g0={readContext:Ut,useCallback:gg,useContext:Ut,useEffect:Ed,useImperativeHandle:mg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:vg,useReducer:nu,useRef:dg,useState:function(){return nu(la)},useDebugValue:bd,useDeferredValue:function(e){var t=$t();return Ue===null?t.memoizedState=e:yg(t,Ue.memoizedState,e)},useTransition:function(){var e=nu(la)[0],t=$t().memoizedState;return[e,t]},useMutableSource:sg,useSyncExternalStore:ig,useId:wg,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=ke({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Yu(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ke({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gl={isMounted:function(e){return(e=e._reactInternals)?as(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ot(),s=dn(e),i=Er(n,s);i.payload=t,r!=null&&(i.callback=r),t=un(e,i,s),t!==null&&(Xt(t,e,s,n),So(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ot(),s=dn(e),i=Er(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=un(e,i,s),t!==null&&(Xt(t,e,s,n),So(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ot(),n=dn(e),s=Er(r,n);s.tag=2,t!=null&&(s.callback=t),t=un(e,s,n),t!==null&&(Xt(t,e,n,r),So(t,e,n))}};function Zh(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!ta(r,n)||!ta(s,i):!0}function Eg(e,t,r){var n=!1,s=mn,i=t.contextType;return typeof i=="object"&&i!==null?i=Ut(i):(s=gt(t)?Yn:Ze.current,n=t.contextTypes,i=(n=n!=null)?ri(e,s):mn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ef(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gl.enqueueReplaceState(t,t.state,null)}function Xu(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},gd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ut(i):(i=gt(t)?Yn:Ze.current,s.context=ri(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Yu(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&gl.enqueueReplaceState(s,s.state,null),Ho(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ai(e,t){try{var r="",n=t;do r+=Vy(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function su(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Zu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var v0=typeof WeakMap=="function"?WeakMap:Map;function bg(e,t,r){r=Er(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Jo||(Jo=!0,uc=n),Zu(e,t)},r}function kg(e,t,r){r=Er(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Zu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Zu(e,t),typeof n!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function tf(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new v0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=j0.bind(null,e,t,r),t.then(e,e))}function rf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nf(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Er(-1,1),t.tag=2,un(r,t,1))),r.lanes|=1),e)}var y0=Pr.ReactCurrentOwner,pt=!1;function it(e,t,r,n){t.child=e===null?eg(t,null,r,n):si(t,e.child,r,n)}function sf(e,t,r,n,s){r=r.render;var i=t.ref;return Ms(t,s),n=Sd(e,t,r,n,i,s),r=xd(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Or(e,t,s)):(Se&&r&&ud(t),t.flags|=1,it(e,t,n,s),t.child)}function af(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Nd(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Cg(e,t,i,n,s)):(e=Ro(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:ta,r(a,n)&&e.ref===t.ref)return Or(e,t,s)}return t.flags|=1,e=hn(i,n),e.ref=t.ref,e.return=t,t.child=e}function Cg(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ta(i,n)&&e.ref===t.ref)if(pt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(pt=!0);else return t.lanes=e.lanes,Or(e,t,s)}return ec(e,t,r,n,s)}function Rg(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(As,_t),_t|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(As,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ve(As,_t),_t|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ve(As,_t),_t|=n;return it(e,t,s,r),t.child}function Tg(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ec(e,t,r,n,s){var i=gt(r)?Yn:Ze.current;return i=ri(t,i),Ms(t,s),r=Sd(e,t,r,n,i,s),n=xd(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Or(e,t,s)):(Se&&n&&ud(t),t.flags|=1,it(e,t,r,s),t.child)}function of(e,t,r,n,s){if(gt(r)){var i=!0;Fo(t)}else i=!1;if(Ms(t,s),t.stateNode===null)bo(e,t),Eg(t,r,n),Xu(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ut(u):(u=gt(r)?Yn:Ze.current,u=ri(t,u));var d=r.getDerivedStateFromProps,c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&ef(t,a,n,u),zr=!1;var h=t.memoizedState;a.state=h,Ho(t,n,a,s),l=t.memoizedState,o!==n||h!==l||mt.current||zr?(typeof d=="function"&&(Yu(t,r,d,n),l=t.memoizedState),(o=zr||Zh(t,r,o,n,h,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,rg(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Wt(t.type,o),a.props=u,c=t.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ut(l):(l=gt(r)?Yn:Ze.current,l=ri(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==c||h!==l)&&ef(t,a,n,l),zr=!1,h=t.memoizedState,a.state=h,Ho(t,n,a,s);var y=t.memoizedState;o!==c||h!==y||mt.current||zr?(typeof p=="function"&&(Yu(t,r,p,n),y=t.memoizedState),(u=zr||Zh(t,r,u,n,h,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),a.props=n,a.state=y,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return tc(e,t,r,n,i,s)}function tc(e,t,r,n,s,i){Tg(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Hh(t,r,!1),Or(e,t,i);n=t.stateNode,y0.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=si(t,e.child,null,i),t.child=si(t,null,o,i)):it(e,t,o,i),t.memoizedState=n.state,s&&Hh(t,r,!0),t.child}function Og(e){var t=e.stateNode;t.pendingContext?Vh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vh(e,t.context,!1),vd(e,t.containerInfo)}function lf(e,t,r,n,s){return ni(),dd(s),t.flags|=256,it(e,t,r,n),t.child}var rc={dehydrated:null,treeContext:null,retryLane:0};function nc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pg(e,t,r){var n=t.pendingProps,s=Ee.current,i=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ve(Ee,s&1),e===null)return Gu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=wl(a,n,0,null),e=Gn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=nc(r),t.memoizedState=rc,e):kd(t,a));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return w0(e,t,a,n,o,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=hn(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=hn(o,i):(i=Gn(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?nc(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=rc,n}return i=e.child,e=i.sibling,n=hn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function kd(e,t){return t=wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ro(e,t,r,n){return n!==null&&dd(n),si(t,e.child,null,r),e=kd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function w0(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=su(Error(A(422))),ro(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=wl({mode:"visible",children:n.children},s,0,null),i=Gn(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&si(t,e.child,null,a),t.child.memoizedState=nc(a),t.memoizedState=rc,i);if(!(t.mode&1))return ro(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(A(419)),n=su(i,n,void 0),ro(e,t,a,n)}if(o=(a&e.childLanes)!==0,pt||o){if(n=Be,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tr(e,s),Xt(n,e,s,-1))}return jd(),n=su(Error(A(421))),ro(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=N0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,bt=ln(s.nextSibling),kt=t,Se=!0,Jt=null,e!==null&&(Nt[At++]=Sr,Nt[At++]=xr,Nt[At++]=Xn,Sr=e.id,xr=e.overflow,Xn=t),t=kd(t,n.children),t.flags|=4096,t)}function uf(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ju(e.return,t,r)}function iu(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function jg(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(it(e,t,n.children,r),n=Ee.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uf(e,r,t);else if(e.tag===19)uf(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ve(Ee,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&qo(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),iu(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qo(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}iu(t,!0,r,null,i);break;case"together":iu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Or(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),es|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,r=hn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=hn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function _0(e,t,r){switch(t.tag){case 3:Og(t),ni();break;case 5:ng(t);break;case 1:gt(t.type)&&Fo(t);break;case 4:vd(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ve(Wo,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ve(Ee,Ee.current&1),t.flags|=128,null):r&t.child.childLanes?Pg(e,t,r):(ve(Ee,Ee.current&1),e=Or(e,t,r),e!==null?e.sibling:null);ve(Ee,Ee.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return jg(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Ee,Ee.current),n)break;return null;case 22:case 23:return t.lanes=0,Rg(e,t,r)}return Or(e,t,r)}var Ng,sc,Ag,Ig;Ng=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};sc=function(){};Ag=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Dn(lr.current);var i=null;switch(r){case"input":s=Cu(e,s),n=Cu(e,n),i=[];break;case"select":s=ke({},s,{value:void 0}),n=ke({},n,{value:void 0}),i=[];break;case"textarea":s=Ou(e,s),n=Ou(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=$o)}ju(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(o=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ye("scroll",e),i||o===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Ig=function(e,t,r,n){r!==n&&(t.flags|=4)};function ki(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function S0(e,t,r){var n=t.pendingProps;switch(cd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return gt(t.type)&&Mo(),Ye(t),null;case 3:return n=t.stateNode,ii(),we(mt),we(Ze),wd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(eo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jt!==null&&(hc(Jt),Jt=null))),sc(e,t),Ye(t),null;case 5:yd(t);var s=Dn(aa.current);if(r=t.type,e!==null&&t.stateNode!=null)Ag(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(A(166));return Ye(t),null}if(e=Dn(lr.current),eo(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ar]=t,n[sa]=i,e=(t.mode&1)!==0,r){case"dialog":ye("cancel",n),ye("close",n);break;case"iframe":case"object":case"embed":ye("load",n);break;case"video":case"audio":for(s=0;s<Ai.length;s++)ye(Ai[s],n);break;case"source":ye("error",n);break;case"img":case"image":case"link":ye("error",n),ye("load",n);break;case"details":ye("toggle",n);break;case"input":vh(n,i),ye("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ye("invalid",n);break;case"textarea":wh(n,i),ye("invalid",n)}ju(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Za(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Za(n.textContent,o,e),s=["children",""+o]):Qi.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ye("scroll",n)}switch(r){case"input":Ha(n),yh(n,i,!0);break;case"textarea":Ha(n),_h(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=$o)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ar]=t,e[sa]=n,Ng(e,t,!1,!1),t.stateNode=e;e:{switch(a=Nu(r,n),r){case"dialog":ye("cancel",e),ye("close",e),s=n;break;case"iframe":case"object":case"embed":ye("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ai.length;s++)ye(Ai[s],e);s=n;break;case"source":ye("error",e),s=n;break;case"img":case"image":case"link":ye("error",e),ye("load",e),s=n;break;case"details":ye("toggle",e),s=n;break;case"input":vh(e,n),s=Cu(e,n),ye("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ke({},n,{value:void 0}),ye("invalid",e);break;case"textarea":wh(e,n),s=Ou(e,n),ye("invalid",e);break;default:s=n}ju(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?dm(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&um(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Gi(e,l):typeof l=="number"&&Gi(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ye("scroll",e):l!=null&&Gc(e,i,l,a))}switch(r){case"input":Ha(e),yh(e,n,!1);break;case"textarea":Ha(e),_h(e);break;case"option":n.value!=null&&e.setAttribute("value",""+pn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ds(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ds(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=$o)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Ig(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(A(166));if(r=Dn(aa.current),Dn(lr.current),eo(t)){if(n=t.stateNode,r=t.memoizedProps,n[ar]=t,(i=n.nodeValue!==r)&&(e=kt,e!==null))switch(e.tag){case 3:Za(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Za(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ar]=t,t.stateNode=n}return Ye(t),null;case 13:if(we(Ee),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&bt!==null&&t.mode&1&&!(t.flags&128))Xm(),ni(),t.flags|=98560,i=!1;else if(i=eo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[ar]=t}else ni(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),i=!1}else Jt!==null&&(hc(Jt),Jt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Me===0&&(Me=3):jd())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return ii(),sc(e,t),e===null&&ra(t.stateNode.containerInfo),Ye(t),null;case 10:return pd(t.type._context),Ye(t),null;case 17:return gt(t.type)&&Mo(),Ye(t),null;case 19:if(we(Ee),i=t.memoizedState,i===null)return Ye(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)ki(i,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=qo(e),a!==null){for(t.flags|=128,ki(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ve(Ee,Ee.current&1|2),t.child}e=e.sibling}i.tail!==null&&je()>oi&&(t.flags|=128,n=!0,ki(i,!1),t.lanes=4194304)}else{if(!n)if(e=qo(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ki(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Se)return Ye(t),null}else 2*je()-i.renderingStartTime>oi&&r!==1073741824&&(t.flags|=128,n=!0,ki(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=je(),t.sibling=null,r=Ee.current,ve(Ee,n?r&1|2:r&1),t):(Ye(t),null);case 22:case 23:return Pd(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?_t&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function x0(e,t){switch(cd(t),t.tag){case 1:return gt(t.type)&&Mo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ii(),we(mt),we(Ze),wd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yd(t),null;case 13:if(we(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Ee),null;case 4:return ii(),null;case 10:return pd(t.type._context),null;case 22:case 23:return Pd(),null;case 24:return null;default:return null}}var no=!1,Xe=!1,E0=typeof WeakSet=="function"?WeakSet:Set,$=null;function Ns(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Pe(e,t,n)}else r.current=null}function ic(e,t,r){try{r()}catch(n){Pe(e,t,n)}}var cf=!1;function b0(e,t){if(Bu=Do,e=Mm(),ld(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,d=0,c=e,h=null;t:for(;;){for(var p;c!==r||s!==0&&c.nodeType!==3||(o=a+s),c!==i||n!==0&&c.nodeType!==3||(l=a+n),c.nodeType===3&&(a+=c.nodeValue.length),(p=c.firstChild)!==null;)h=c,c=p;for(;;){if(c===e)break t;if(h===r&&++u===s&&(o=a),h===i&&++d===n&&(l=a),(p=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wu={focusedElem:e,selectionRange:r},Do=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Wt(t.type,v),b);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(E){Pe(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return y=cf,cf=!1,y}function Wi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ic(t,r,i)}s=s.next}while(s!==n)}}function vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ac(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Dg(e){var t=e.alternate;t!==null&&(e.alternate=null,Dg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ar],delete t[sa],delete t[qu],delete t[a0],delete t[o0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lg(e){return e.tag===5||e.tag===3||e.tag===4}function df(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=$o));else if(n!==4&&(e=e.child,e!==null))for(oc(e,t,r),e=e.sibling;e!==null;)oc(e,t,r),e=e.sibling}function lc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(lc(e,t,r),e=e.sibling;e!==null;)lc(e,t,r),e=e.sibling}var Ke=null,Kt=!1;function Ur(e,t,r){for(r=r.child;r!==null;)Ug(e,t,r),r=r.sibling}function Ug(e,t,r){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(ul,r)}catch{}switch(r.tag){case 5:Xe||Ns(r,t);case 6:var n=Ke,s=Kt;Ke=null,Ur(e,t,r),Ke=n,Kt=s,Ke!==null&&(Kt?(e=Ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ke.removeChild(r.stateNode));break;case 18:Ke!==null&&(Kt?(e=Ke,r=r.stateNode,e.nodeType===8?Xl(e.parentNode,r):e.nodeType===1&&Xl(e,r),Zi(e)):Xl(Ke,r.stateNode));break;case 4:n=Ke,s=Kt,Ke=r.stateNode.containerInfo,Kt=!0,Ur(e,t,r),Ke=n,Kt=s;break;case 0:case 11:case 14:case 15:if(!Xe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ic(r,t,a),s=s.next}while(s!==n)}Ur(e,t,r);break;case 1:if(!Xe&&(Ns(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Pe(r,t,o)}Ur(e,t,r);break;case 21:Ur(e,t,r);break;case 22:r.mode&1?(Xe=(n=Xe)||r.memoizedState!==null,Ur(e,t,r),Xe=n):Ur(e,t,r);break;default:Ur(e,t,r)}}function hf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new E0),t.forEach(function(n){var s=A0.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function zt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ke=o.stateNode,Kt=!1;break e;case 3:Ke=o.stateNode.containerInfo,Kt=!0;break e;case 4:Ke=o.stateNode.containerInfo,Kt=!0;break e}o=o.return}if(Ke===null)throw Error(A(160));Ug(i,a,s),Ke=null,Kt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Pe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$g(t,e),t=t.sibling}function $g(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),tr(e),n&4){try{Wi(3,e,e.return),vl(3,e)}catch(v){Pe(e,e.return,v)}try{Wi(5,e,e.return)}catch(v){Pe(e,e.return,v)}}break;case 1:zt(t,e),tr(e),n&512&&r!==null&&Ns(r,r.return);break;case 5:if(zt(t,e),tr(e),n&512&&r!==null&&Ns(r,r.return),e.flags&32){var s=e.stateNode;try{Gi(s,"")}catch(v){Pe(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&am(s,i),Nu(o,a);var u=Nu(o,i);for(a=0;a<l.length;a+=2){var d=l[a],c=l[a+1];d==="style"?dm(s,c):d==="dangerouslySetInnerHTML"?um(s,c):d==="children"?Gi(s,c):Gc(s,d,c,u)}switch(o){case"input":Ru(s,i);break;case"textarea":om(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ds(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ds(s,!!i.multiple,i.defaultValue,!0):Ds(s,!!i.multiple,i.multiple?[]:"",!1))}s[sa]=i}catch(v){Pe(e,e.return,v)}}break;case 6:if(zt(t,e),tr(e),n&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Pe(e,e.return,v)}}break;case 3:if(zt(t,e),tr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zi(t.containerInfo)}catch(v){Pe(e,e.return,v)}break;case 4:zt(t,e),tr(e);break;case 13:zt(t,e),tr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Td=je())),n&4&&hf(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Xe=(u=Xe)||d,zt(t,e),Xe=u):zt(t,e),tr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for($=e,d=e.child;d!==null;){for(c=$=d;$!==null;){switch(h=$,p=h.child,h.tag){case 0:case 11:case 14:case 15:Wi(4,h,h.return);break;case 1:Ns(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){Pe(n,r,v)}}break;case 5:Ns(h,h.return);break;case 22:if(h.memoizedState!==null){pf(c);continue}}p!==null?(p.return=h,$=p):pf(c)}d=d.sibling}e:for(d=null,c=e;;){if(c.tag===5){if(d===null){d=c;try{s=c.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=cm("display",a))}catch(v){Pe(e,e.return,v)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){Pe(e,e.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:zt(t,e),tr(e),n&4&&hf(e);break;case 21:break;default:zt(t,e),tr(e)}}function tr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Lg(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Gi(s,""),n.flags&=-33);var i=df(e);lc(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=df(e);oc(e,o,a);break;default:throw Error(A(161))}}catch(l){Pe(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function k0(e,t,r){$=e,Mg(e)}function Mg(e,t,r){for(var n=(e.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||no;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Xe;o=no;var u=Xe;if(no=a,(Xe=l)&&!u)for($=s;$!==null;)a=$,l=a.child,a.tag===22&&a.memoizedState!==null?mf(s):l!==null?(l.return=a,$=l):mf(s);for(;i!==null;)$=i,Mg(i),i=i.sibling;$=s,no=o,Xe=u}ff(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):ff(e)}}function ff(e){for(;$!==null;){var t=$;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||vl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Xe)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Wt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Jh(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Jh(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&Zi(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Xe||t.flags&512&&ac(t)}catch(h){Pe(t,t.return,h)}}if(t===e){$=null;break}if(r=t.sibling,r!==null){r.return=t.return,$=r;break}$=t.return}}function pf(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$=r;break}$=t.return}}function mf(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vl(4,t)}catch(l){Pe(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){Pe(t,s,l)}}var i=t.return;try{ac(t)}catch(l){Pe(t,i,l)}break;case 5:var a=t.return;try{ac(t)}catch(l){Pe(t,a,l)}}}catch(l){Pe(t,t.return,l)}if(t===e){$=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$=o;break}$=t.return}}var C0=Math.ceil,Go=Pr.ReactCurrentDispatcher,Cd=Pr.ReactCurrentOwner,Dt=Pr.ReactCurrentBatchConfig,ae=0,Be=null,De=null,Qe=0,_t=0,As=yn(0),Me=0,ca=null,es=0,yl=0,Rd=0,Vi=null,ft=null,Td=0,oi=1/0,pr=null,Jo=!1,uc=null,cn=null,so=!1,rn=null,Yo=0,Hi=0,cc=null,ko=-1,Co=0;function ot(){return ae&6?je():ko!==-1?ko:ko=je()}function dn(e){return e.mode&1?ae&2&&Qe!==0?Qe&-Qe:u0.transition!==null?(Co===0&&(Co=Em()),Co):(e=de,e!==0||(e=window.event,e=e===void 0?16:Pm(e.type)),e):1}function Xt(e,t,r,n){if(50<Hi)throw Hi=0,cc=null,Error(A(185));Ta(e,r,n),(!(ae&2)||e!==Be)&&(e===Be&&(!(ae&2)&&(yl|=r),Me===4&&Vr(e,Qe)),vt(e,n),r===1&&ae===0&&!(t.mode&1)&&(oi=je()+500,pl&&wn()))}function vt(e,t){var r=e.callbackNode;uw(e,t);var n=Io(e,e===Be?Qe:0);if(n===0)r!==null&&Eh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Eh(r),t===1)e.tag===0?l0(gf.bind(null,e)):Gm(gf.bind(null,e)),s0(function(){!(ae&6)&&wn()}),r=null;else{switch(bm(n)){case 1:r=ed;break;case 4:r=Sm;break;case 16:r=Ao;break;case 536870912:r=xm;break;default:r=Ao}r=Kg(r,Fg.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fg(e,t){if(ko=-1,Co=0,ae&6)throw Error(A(327));var r=e.callbackNode;if(Fs()&&e.callbackNode!==r)return null;var n=Io(e,e===Be?Qe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Xo(e,n);else{t=n;var s=ae;ae|=2;var i=Bg();(Be!==e||Qe!==t)&&(pr=null,oi=je()+500,Qn(e,t));do try{O0();break}catch(o){zg(e,o)}while(!0);fd(),Go.current=i,ae=s,De!==null?t=0:(Be=null,Qe=0,t=Me)}if(t!==0){if(t===2&&(s=Uu(e),s!==0&&(n=s,t=dc(e,s))),t===1)throw r=ca,Qn(e,0),Vr(e,n),vt(e,je()),r;if(t===6)Vr(e,n);else{if(s=e.current.alternate,!(n&30)&&!R0(s)&&(t=Xo(e,n),t===2&&(i=Uu(e),i!==0&&(n=i,t=dc(e,i))),t===1))throw r=ca,Qn(e,0),Vr(e,n),vt(e,je()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(A(345));case 2:Rn(e,ft,pr);break;case 3:if(Vr(e,n),(n&130023424)===n&&(t=Td+500-je(),10<t)){if(Io(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){ot(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Hu(Rn.bind(null,e,ft,pr),t);break}Rn(e,ft,pr);break;case 4:if(Vr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Yt(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*C0(n/1960))-n,10<n){e.timeoutHandle=Hu(Rn.bind(null,e,ft,pr),n);break}Rn(e,ft,pr);break;case 5:Rn(e,ft,pr);break;default:throw Error(A(329))}}}return vt(e,je()),e.callbackNode===r?Fg.bind(null,e):null}function dc(e,t){var r=Vi;return e.current.memoizedState.isDehydrated&&(Qn(e,t).flags|=256),e=Xo(e,t),e!==2&&(t=ft,ft=r,t!==null&&hc(t)),e}function hc(e){ft===null?ft=e:ft.push.apply(ft,e)}function R0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vr(e,t){for(t&=~Rd,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Yt(t),n=1<<r;e[r]=-1,t&=~n}}function gf(e){if(ae&6)throw Error(A(327));Fs();var t=Io(e,0);if(!(t&1))return vt(e,je()),null;var r=Xo(e,t);if(e.tag!==0&&r===2){var n=Uu(e);n!==0&&(t=n,r=dc(e,n))}if(r===1)throw r=ca,Qn(e,0),Vr(e,t),vt(e,je()),r;if(r===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,ft,pr),vt(e,je()),null}function Od(e,t){var r=ae;ae|=1;try{return e(t)}finally{ae=r,ae===0&&(oi=je()+500,pl&&wn())}}function ts(e){rn!==null&&rn.tag===0&&!(ae&6)&&Fs();var t=ae;ae|=1;var r=Dt.transition,n=de;try{if(Dt.transition=null,de=1,e)return e()}finally{de=n,Dt.transition=r,ae=t,!(ae&6)&&wn()}}function Pd(){_t=As.current,we(As)}function Qn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,n0(r)),De!==null)for(r=De.return;r!==null;){var n=r;switch(cd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Mo();break;case 3:ii(),we(mt),we(Ze),wd();break;case 5:yd(n);break;case 4:ii();break;case 13:we(Ee);break;case 19:we(Ee);break;case 10:pd(n.type._context);break;case 22:case 23:Pd()}r=r.return}if(Be=e,De=e=hn(e.current,null),Qe=_t=t,Me=0,ca=null,Rd=yl=es=0,ft=Vi=null,In!==null){for(t=0;t<In.length;t++)if(r=In[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}In=null}return e}function zg(e,t){do{var r=De;try{if(fd(),xo.current=Qo,Ko){for(var n=be.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ko=!1}if(Zn=0,ze=Ue=be=null,Bi=!1,oa=0,Cd.current=null,r===null||r.return===null){Me=1,ca=t,De=null;break}e:{var i=e,a=r.return,o=r,l=t;if(t=Qe,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=rf(a);if(p!==null){p.flags&=-257,nf(p,a,o,i,t),p.mode&1&&tf(i,u,t),t=p,l=u;var y=t.updateQueue;if(y===null){var v=new Set;v.add(l),t.updateQueue=v}else y.add(l);break e}else{if(!(t&1)){tf(i,u,t),jd();break e}l=Error(A(426))}}else if(Se&&o.mode&1){var b=rf(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),nf(b,a,o,i,t),dd(ai(l,o));break e}}i=l=ai(l,o),Me!==4&&(Me=2),Vi===null?Vi=[i]:Vi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=bg(i,l,t);Gh(i,g);break e;case 1:o=l;var f=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(cn===null||!cn.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=kg(i,o,t);Gh(i,E);break e}}i=i.return}while(i!==null)}Vg(r)}catch(T){t=T,De===r&&r!==null&&(De=r=r.return);continue}break}while(!0)}function Bg(){var e=Go.current;return Go.current=Qo,e===null?Qo:e}function jd(){(Me===0||Me===3||Me===2)&&(Me=4),Be===null||!(es&268435455)&&!(yl&268435455)||Vr(Be,Qe)}function Xo(e,t){var r=ae;ae|=2;var n=Bg();(Be!==e||Qe!==t)&&(pr=null,Qn(e,t));do try{T0();break}catch(s){zg(e,s)}while(!0);if(fd(),ae=r,Go.current=n,De!==null)throw Error(A(261));return Be=null,Qe=0,Me}function T0(){for(;De!==null;)Wg(De)}function O0(){for(;De!==null&&!ew();)Wg(De)}function Wg(e){var t=qg(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?Vg(e):De=t,Cd.current=null}function Vg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=x0(r,t),r!==null){r.flags&=32767,De=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,De=null;return}}else if(r=S0(r,t,_t),r!==null){De=r;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Me===0&&(Me=5)}function Rn(e,t,r){var n=de,s=Dt.transition;try{Dt.transition=null,de=1,P0(e,t,r,n)}finally{Dt.transition=s,de=n}return null}function P0(e,t,r,n){do Fs();while(rn!==null);if(ae&6)throw Error(A(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(cw(e,i),e===Be&&(De=Be=null,Qe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||so||(so=!0,Kg(Ao,function(){return Fs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var a=de;de=1;var o=ae;ae|=4,Cd.current=null,b0(e,r),$g(r,e),Jw(Wu),Do=!!Bu,Wu=Bu=null,e.current=r,k0(r),tw(),ae=o,de=a,Dt.transition=i}else e.current=r;if(so&&(so=!1,rn=e,Yo=s),i=e.pendingLanes,i===0&&(cn=null),sw(r.stateNode),vt(e,je()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Jo)throw Jo=!1,e=uc,uc=null,e;return Yo&1&&e.tag!==0&&Fs(),i=e.pendingLanes,i&1?e===cc?Hi++:(Hi=0,cc=e):Hi=0,wn(),null}function Fs(){if(rn!==null){var e=bm(Yo),t=Dt.transition,r=de;try{if(Dt.transition=null,de=16>e?16:e,rn===null)var n=!1;else{if(e=rn,rn=null,Yo=0,ae&6)throw Error(A(331));var s=ae;for(ae|=4,$=e.current;$!==null;){var i=$,a=i.child;if($.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Wi(8,d,i)}var c=d.child;if(c!==null)c.return=d,$=c;else for(;$!==null;){d=$;var h=d.sibling,p=d.return;if(Dg(d),d===u){$=null;break}if(h!==null){h.return=p,$=h;break}$=p}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wi(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,$=g;break e}$=i.return}}var f=e.current;for($=f;$!==null;){a=$;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,$=m;else e:for(a=f;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:vl(9,o)}}catch(T){Pe(o,o.return,T)}if(o===a){$=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,$=E;break e}$=o.return}}if(ae=s,wn(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(ul,e)}catch{}n=!0}return n}finally{de=r,Dt.transition=t}}return!1}function vf(e,t,r){t=ai(r,t),t=bg(e,t,1),e=un(e,t,1),t=ot(),e!==null&&(Ta(e,1,t),vt(e,t))}function Pe(e,t,r){if(e.tag===3)vf(e,e,r);else for(;t!==null;){if(t.tag===3){vf(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cn===null||!cn.has(n))){e=ai(r,e),e=kg(t,e,1),t=un(t,e,1),e=ot(),t!==null&&(Ta(t,1,e),vt(t,e));break}}t=t.return}}function j0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&r,Be===e&&(Qe&r)===r&&(Me===4||Me===3&&(Qe&130023424)===Qe&&500>je()-Td?Qn(e,0):Rd|=r),vt(e,t)}function Hg(e,t){t===0&&(e.mode&1?(t=Qa,Qa<<=1,!(Qa&130023424)&&(Qa=4194304)):t=1);var r=ot();e=Tr(e,t),e!==null&&(Ta(e,t,r),vt(e,r))}function N0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Hg(e,r)}function A0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(t),Hg(e,r)}var qg;qg=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)pt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return pt=!1,_0(e,t,r);pt=!!(e.flags&131072)}else pt=!1,Se&&t.flags&1048576&&Jm(t,Bo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;bo(e,t),e=t.pendingProps;var s=ri(t,Ze.current);Ms(t,r),s=Sd(null,t,n,e,s,r);var i=xd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(n)?(i=!0,Fo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gd(t),s.updater=gl,t.stateNode=s,s._reactInternals=t,Xu(t,n,e,r),t=tc(null,t,n,!0,i,r)):(t.tag=0,Se&&i&&ud(t),it(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(bo(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=D0(n),e=Wt(n,e),s){case 0:t=ec(null,t,n,e,r);break e;case 1:t=of(null,t,n,e,r);break e;case 11:t=sf(null,t,n,e,r);break e;case 14:t=af(null,t,n,Wt(n.type,e),r);break e}throw Error(A(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),ec(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),of(e,t,n,s,r);case 3:e:{if(Og(t),e===null)throw Error(A(387));n=t.pendingProps,i=t.memoizedState,s=i.element,rg(e,t),Ho(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ai(Error(A(423)),t),t=lf(e,t,n,r,s);break e}else if(n!==s){s=ai(Error(A(424)),t),t=lf(e,t,n,r,s);break e}else for(bt=ln(t.stateNode.containerInfo.firstChild),kt=t,Se=!0,Jt=null,r=eg(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ni(),n===s){t=Or(e,t,r);break e}it(e,t,n,r)}t=t.child}return t;case 5:return ng(t),e===null&&Gu(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Vu(n,s)?a=null:i!==null&&Vu(n,i)&&(t.flags|=32),Tg(e,t),it(e,t,a,r),t.child;case 6:return e===null&&Gu(t),null;case 13:return Pg(e,t,r);case 4:return vd(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=si(t,null,n,r):it(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),sf(e,t,n,s,r);case 7:return it(e,t,t.pendingProps,r),t.child;case 8:return it(e,t,t.pendingProps.children,r),t.child;case 12:return it(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,ve(Wo,n._currentValue),n._currentValue=a,i!==null)if(Zt(i.value,a)){if(i.children===s.children&&!mt.current){t=Or(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Er(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Ju(i.return,r,t),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(A(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Ju(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}it(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ms(t,r),s=Ut(s),n=n(s),t.flags|=1,it(e,t,n,r),t.child;case 14:return n=t.type,s=Wt(n,t.pendingProps),s=Wt(n.type,s),af(e,t,n,s,r);case 15:return Cg(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),bo(e,t),t.tag=1,gt(n)?(e=!0,Fo(t)):e=!1,Ms(t,r),Eg(t,n,s),Xu(t,n,s,r),tc(null,t,n,!0,e,r);case 19:return jg(e,t,r);case 22:return Rg(e,t,r)}throw Error(A(156,t.tag))};function Kg(e,t){return _m(e,t)}function I0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,r,n){return new I0(e,t,r,n)}function Nd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function D0(e){if(typeof e=="function")return Nd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yc)return 11;if(e===Xc)return 14}return 2}function hn(e,t){var r=e.alternate;return r===null?(r=It(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ro(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")Nd(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Es:return Gn(r.children,s,i,t);case Jc:a=8,s|=8;break;case xu:return e=It(12,r,t,s|2),e.elementType=xu,e.lanes=i,e;case Eu:return e=It(13,r,t,s),e.elementType=Eu,e.lanes=i,e;case bu:return e=It(19,r,t,s),e.elementType=bu,e.lanes=i,e;case nm:return wl(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tm:a=10;break e;case rm:a=9;break e;case Yc:a=11;break e;case Xc:a=14;break e;case Fr:a=16,n=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=It(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Gn(e,t,r,n){return e=It(7,e,n,t),e.lanes=r,e}function wl(e,t,r,n){return e=It(22,e,n,t),e.elementType=nm,e.lanes=r,e.stateNode={isHidden:!1},e}function au(e,t,r){return e=It(6,e,null,t),e.lanes=r,e}function ou(e,t,r){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function L0(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zl(0),this.expirationTimes=zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ad(e,t,r,n,s,i,a,o,l){return e=new L0(e,t,r,o,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=It(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gd(i),e}function U0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Qg(e){if(!e)return mn;e=e._reactInternals;e:{if(as(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var r=e.type;if(gt(r))return Qm(e,r,t)}return t}function Gg(e,t,r,n,s,i,a,o,l){return e=Ad(r,n,!0,e,s,i,a,o,l),e.context=Qg(null),r=e.current,n=ot(),s=dn(r),i=Er(n,s),i.callback=t??null,un(r,i,s),e.current.lanes=s,Ta(e,s,n),vt(e,n),e}function _l(e,t,r,n){var s=t.current,i=ot(),a=dn(s);return r=Qg(r),t.context===null?t.context=r:t.pendingContext=r,t=Er(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=un(s,t,a),e!==null&&(Xt(e,s,a,i),So(e,s,a)),a}function Zo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Id(e,t){yf(e,t),(e=e.alternate)&&yf(e,t)}function $0(){return null}var Jg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dd(e){this._internalRoot=e}Sl.prototype.render=Dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));_l(e,t,null,null)};Sl.prototype.unmount=Dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ts(function(){_l(null,e,null,null)}),t[Rr]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Wr.length&&t!==0&&t<Wr[r].priority;r++);Wr.splice(r,0,e),r===0&&Om(e)}};function Ld(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wf(){}function M0(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Zo(a);i.call(u)}}var a=Gg(t,n,e,0,null,!1,!1,"",wf);return e._reactRootContainer=a,e[Rr]=a.current,ra(e.nodeType===8?e.parentNode:e),ts(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var u=Zo(l);o.call(u)}}var l=Ad(e,0,!1,null,null,!1,!1,"",wf);return e._reactRootContainer=l,e[Rr]=l.current,ra(e.nodeType===8?e.parentNode:e),ts(function(){_l(t,l,r,n)}),l}function El(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Zo(a);o.call(l)}}_l(t,a,e,s)}else a=M0(r,t,e,s,n);return Zo(a)}km=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ni(t.pendingLanes);r!==0&&(td(t,r|1),vt(t,je()),!(ae&6)&&(oi=je()+500,wn()))}break;case 13:ts(function(){var n=Tr(e,1);if(n!==null){var s=ot();Xt(n,e,1,s)}}),Id(e,1)}};rd=function(e){if(e.tag===13){var t=Tr(e,134217728);if(t!==null){var r=ot();Xt(t,e,134217728,r)}Id(e,134217728)}};Cm=function(e){if(e.tag===13){var t=dn(e),r=Tr(e,t);if(r!==null){var n=ot();Xt(r,e,t,n)}Id(e,t)}};Rm=function(){return de};Tm=function(e,t){var r=de;try{return de=e,t()}finally{de=r}};Iu=function(e,t,r){switch(t){case"input":if(Ru(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=fl(n);if(!s)throw Error(A(90));im(n),Ru(n,s)}}}break;case"textarea":om(e,r);break;case"select":t=r.value,t!=null&&Ds(e,!!r.multiple,t,!1)}};pm=Od;mm=ts;var F0={usingClientEntryPoint:!1,Events:[Pa,Rs,fl,hm,fm,Od]},Ci={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z0={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ym(e),e===null?null:e.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||$0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!io.isDisabled&&io.supportsFiber)try{ul=io.inject(z0),or=io}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F0;Rt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ld(t))throw Error(A(200));return U0(e,t,null,r)};Rt.createRoot=function(e,t){if(!Ld(e))throw Error(A(299));var r=!1,n="",s=Jg;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ad(e,1,!1,null,null,r,!1,n,s),e[Rr]=t.current,ra(e.nodeType===8?e.parentNode:e),new Dd(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=ym(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return ts(e)};Rt.hydrate=function(e,t,r){if(!xl(t))throw Error(A(200));return El(null,e,t,!0,r)};Rt.hydrateRoot=function(e,t,r){if(!Ld(e))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Jg;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Gg(t,null,e,1,r??null,s,!1,i,a),e[Rr]=t.current,ra(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Sl(t)};Rt.render=function(e,t,r){if(!xl(t))throw Error(A(200));return El(null,e,t,!1,r)};Rt.unmountComponentAtNode=function(e){if(!xl(e))throw Error(A(40));return e._reactRootContainer?(ts(function(){El(null,null,e,!1,function(){e._reactRootContainer=null,e[Rr]=null})}),!0):!1};Rt.unstable_batchedUpdates=Od;Rt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!xl(r))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return El(e,t,r,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function Yg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yg)}catch(e){console.error(e)}}Yg(),Yp.exports=Rt;var Ud=Yp.exports;const B0=Mp(Ud),W0=$p({__proto__:null,default:B0},[Ud]);var Xg,_f=Ud;Xg=_f.createRoot,_f.hydrateRoot;var di=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},V0={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},qr,Bc,Rp,H0=(Rp=class{constructor(){V(this,qr,V0);V(this,Bc,!1)}setTimeoutProvider(e){U(this,qr,e)}setTimeout(e,t){return w(this,qr).setTimeout(e,t)}clearTimeout(e){w(this,qr).clearTimeout(e)}setInterval(e,t){return w(this,qr).setInterval(e,t)}clearInterval(e){w(this,qr).clearInterval(e)}},qr=new WeakMap,Bc=new WeakMap,Rp),Ln=new H0;function q0(e){setTimeout(e,0)}var rs=typeof window>"u"||"Deno"in globalThis;function at(){}function K0(e,t){return typeof e=="function"?e(t):e}function fc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Zg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function fn(e,t){return typeof e=="function"?e(t):e}function jt(e,t){return typeof e=="function"?e(t):e}function Sf(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:o}=e;if(a){if(n){if(t.queryHash!==$d(a,t.options))return!1}else if(!da(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||s&&s!==t.state.fetchStatus||i&&!i(t))}function xf(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ns(t.options.mutationKey)!==ns(i))return!1}else if(!da(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function $d(e,t){return((t==null?void 0:t.queryKeyHashFn)||ns)(e)}function ns(e){return JSON.stringify(e,(t,r)=>pc(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function da(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>da(e[r],t[r])):!1}var Q0=Object.prototype.hasOwnProperty;function ev(e,t){if(e===t)return e;const r=Ef(e)&&Ef(t);if(!r&&!(pc(e)&&pc(t)))return t;const s=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),a=i.length,o=r?new Array(a):{};let l=0;for(let u=0;u<a;u++){const d=r?u:i[u],c=e[d],h=t[d];if(c===h){o[d]=c,(r?u<s:Q0.call(e,d))&&l++;continue}if(c===null||h===null||typeof c!="object"||typeof h!="object"){o[d]=h;continue}const p=ev(c,h);o[d]=p,p===c&&l++}return s===a&&l===s?e:o}function el(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Ef(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pc(e){if(!bf(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!bf(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function bf(e){return Object.prototype.toString.call(e)==="[object Object]"}function G0(e){return new Promise(t=>{Ln.setTimeout(t,e)})}function mc(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ev(e,t):t}function J0(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Y0(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Md=Symbol();function tv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Md?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function rv(e,t){return typeof e=="function"?e(...t):!!e}var Mn,Kr,Ws,Tp,X0=(Tp=class extends di{constructor(){super();V(this,Mn);V(this,Kr);V(this,Ws);U(this,Ws,t=>{if(!rs&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){w(this,Kr)||this.setEventListener(w(this,Ws))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Kr))==null||t.call(this),U(this,Kr,void 0))}setEventListener(t){var r;U(this,Ws,t),(r=w(this,Kr))==null||r.call(this),U(this,Kr,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){w(this,Mn)!==t&&(U(this,Mn,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof w(this,Mn)=="boolean"?w(this,Mn):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Mn=new WeakMap,Kr=new WeakMap,Ws=new WeakMap,Tp),Fd=new X0;function gc(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var Z0=q0;function e_(){let e=[],t=0,r=o=>{o()},n=o=>{o()},s=Z0;const i=o=>{t?e.push(o):s(()=>{r(o)})},a=()=>{const o=e;e=[],o.length&&s(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{s=o}}}var $e=e_(),Vs,Qr,Hs,Op,t_=(Op=class extends di{constructor(){super();V(this,Vs,!0);V(this,Qr);V(this,Hs);U(this,Hs,t=>{if(!rs&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){w(this,Qr)||this.setEventListener(w(this,Hs))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Qr))==null||t.call(this),U(this,Qr,void 0))}setEventListener(t){var r;U(this,Hs,t),(r=w(this,Qr))==null||r.call(this),U(this,Qr,t(this.setOnline.bind(this)))}setOnline(t){w(this,Vs)!==t&&(U(this,Vs,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return w(this,Vs)}},Vs=new WeakMap,Qr=new WeakMap,Hs=new WeakMap,Op),tl=new t_;function r_(e){return Math.min(1e3*2**e,3e4)}function nv(e){return(e??"online")==="online"?tl.isOnline():!0}var vc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function sv(e){let t=!1,r=0,n;const s=gc(),i=()=>s.status!=="pending",a=v=>{var b;if(!i()){const g=new vc(v);h(g),(b=e.onCancel)==null||b.call(e,g)}},o=()=>{t=!0},l=()=>{t=!1},u=()=>Fd.isFocused()&&(e.networkMode==="always"||tl.isOnline())&&e.canRun(),d=()=>nv(e.networkMode)&&e.canRun(),c=v=>{i()||(n==null||n(),s.resolve(v))},h=v=>{i()||(n==null||n(),s.reject(v))},p=()=>new Promise(v=>{var b;n=g=>{(i()||u())&&v(g)},(b=e.onPause)==null||b.call(e)}).then(()=>{var v;n=void 0,i()||(v=e.onContinue)==null||v.call(e)}),y=()=>{if(i())return;let v;const b=r===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(c).catch(g=>{var j;if(i())return;const f=e.retry??(rs?0:3),m=e.retryDelay??r_,E=typeof m=="function"?m(r,g):m,T=f===!0||typeof f=="number"&&r<f||typeof f=="function"&&f(r,g);if(t||!T){h(g);return}r++,(j=e.onFail)==null||j.call(e,r,g),G0(E).then(()=>u()?void 0:p()).then(()=>{t?h(g):y()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(n==null||n(),s),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?y():p().then(y),s)}}var Fn,Pp,iv=(Pp=class{constructor(){V(this,Fn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fc(this.gcTime)&&U(this,Fn,Ln.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(rs?1/0:5*60*1e3))}clearGcTimeout(){w(this,Fn)&&(Ln.clearTimeout(w(this,Fn)),U(this,Fn,void 0))}},Fn=new WeakMap,Pp),zn,qs,Pt,Bn,Fe,xa,Wn,Ht,fr,jp,n_=(jp=class extends iv{constructor(t){super();V(this,Ht);V(this,zn);V(this,qs);V(this,Pt);V(this,Bn);V(this,Fe);V(this,xa);V(this,Wn);U(this,Wn,!1),U(this,xa,t.defaultOptions),this.setOptions(t.options),this.observers=[],U(this,Bn,t.client),U(this,Pt,w(this,Bn).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,U(this,zn,Cf(this.options)),this.state=t.state??w(this,zn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,Fe))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,xa),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Cf(this.options);r.data!==void 0&&(this.setState(kf(r.data,r.dataUpdatedAt)),U(this,zn,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,Pt).remove(this)}setData(t,r){const n=mc(this.state.data,t,this.options);return ee(this,Ht,fr).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ee(this,Ht,fr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=w(this,Fe))==null?void 0:n.promise;return(s=w(this,Fe))==null||s.cancel(t),r?r.then(at).catch(at):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,zn))}isActive(){return this.observers.some(t=>jt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Md||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>fn(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Zg(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=w(this,Fe))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=w(this,Fe))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,Pt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(w(this,Fe)&&(w(this,Wn)?w(this,Fe).cancel({revert:!0}):w(this,Fe).cancelRetry()),this.scheduleGc()),w(this,Pt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ee(this,Ht,fr).call(this,{type:"invalidate"})}async fetch(t,r){var l,u,d,c,h,p,y,v,b,g,f,m;if(this.state.fetchStatus!=="idle"&&((l=w(this,Fe))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(w(this,Fe))return w(this,Fe).continueRetry(),w(this,Fe).promise}if(t&&this.setOptions(t),!this.options.queryFn){const E=this.observers.find(T=>T.options.queryFn);E&&this.setOptions(E.options)}const n=new AbortController,s=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(U(this,Wn,!0),n.signal)})},i=()=>{const E=tv(this.options,r),j=(()=>{const S={client:w(this,Bn),queryKey:this.queryKey,meta:this.meta};return s(S),S})();return U(this,Wn,!1),this.options.persister?this.options.persister(E,j,this):E(j)},o=(()=>{const E={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:w(this,Bn),state:this.state,fetchFn:i};return s(E),E})();(u=this.options.behavior)==null||u.onFetch(o,this),U(this,qs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&ee(this,Ht,fr).call(this,{type:"fetch",meta:(c=o.fetchOptions)==null?void 0:c.meta}),U(this,Fe,sv({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:E=>{E instanceof vc&&E.revert&&this.setState({...w(this,qs),fetchStatus:"idle"}),n.abort()},onFail:(E,T)=>{ee(this,Ht,fr).call(this,{type:"failed",failureCount:E,error:T})},onPause:()=>{ee(this,Ht,fr).call(this,{type:"pause"})},onContinue:()=>{ee(this,Ht,fr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const E=await w(this,Fe).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(p=(h=w(this,Pt).config).onSuccess)==null||p.call(h,E,this),(v=(y=w(this,Pt).config).onSettled)==null||v.call(y,E,this.state.error,this),E}catch(E){if(E instanceof vc){if(E.silent)return w(this,Fe).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw ee(this,Ht,fr).call(this,{type:"error",error:E}),(g=(b=w(this,Pt).config).onError)==null||g.call(b,E,this),(m=(f=w(this,Pt).config).onSettled)==null||m.call(f,this.state.data,E,this),E}finally{this.scheduleGc()}}},zn=new WeakMap,qs=new WeakMap,Pt=new WeakMap,Bn=new WeakMap,Fe=new WeakMap,xa=new WeakMap,Wn=new WeakMap,Ht=new WeakSet,fr=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...av(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...kf(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return U(this,qs,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),$e.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),w(this,Pt).notify({query:this,type:"updated",action:t})})},jp);function av(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function kf(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Cf(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ct,se,Ea,nt,Vn,Ks,vr,Gr,ba,Qs,Gs,Hn,qn,Jr,Js,ue,Ii,yc,wc,_c,Sc,xc,Ec,bc,ov,Np,s_=(Np=class extends di{constructor(t,r){super();V(this,ue);V(this,ct);V(this,se);V(this,Ea);V(this,nt);V(this,Vn);V(this,Ks);V(this,vr);V(this,Gr);V(this,ba);V(this,Qs);V(this,Gs);V(this,Hn);V(this,qn);V(this,Jr);V(this,Js,new Set);this.options=r,U(this,ct,t),U(this,Gr,null),U(this,vr,gc()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(w(this,se).addObserver(this),Rf(w(this,se),this.options)?ee(this,ue,Ii).call(this):this.updateResult(),ee(this,ue,Sc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kc(w(this,se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kc(w(this,se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ee(this,ue,xc).call(this),ee(this,ue,Ec).call(this),w(this,se).removeObserver(this)}setOptions(t){const r=this.options,n=w(this,se);if(this.options=w(this,ct).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof jt(this.options.enabled,w(this,se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ee(this,ue,bc).call(this),w(this,se).setOptions(this.options),r._defaulted&&!el(this.options,r)&&w(this,ct).getQueryCache().notify({type:"observerOptionsUpdated",query:w(this,se),observer:this});const s=this.hasListeners();s&&Tf(w(this,se),n,this.options,r)&&ee(this,ue,Ii).call(this),this.updateResult(),s&&(w(this,se)!==n||jt(this.options.enabled,w(this,se))!==jt(r.enabled,w(this,se))||fn(this.options.staleTime,w(this,se))!==fn(r.staleTime,w(this,se)))&&ee(this,ue,yc).call(this);const i=ee(this,ue,wc).call(this);s&&(w(this,se)!==n||jt(this.options.enabled,w(this,se))!==jt(r.enabled,w(this,se))||i!==w(this,Jr))&&ee(this,ue,_c).call(this,i)}getOptimisticResult(t){const r=w(this,ct).getQueryCache().build(w(this,ct),t),n=this.createResult(r,t);return a_(this,n)&&(U(this,nt,n),U(this,Ks,this.options),U(this,Vn,w(this,se).state)),n}getCurrentResult(){return w(this,nt)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&w(this,vr).status==="pending"&&w(this,vr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){w(this,Js).add(t)}getCurrentQuery(){return w(this,se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=w(this,ct).defaultQueryOptions(t),n=w(this,ct).getQueryCache().build(w(this,ct),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ee(this,ue,Ii).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),w(this,nt)))}createResult(t,r){var D;const n=w(this,se),s=this.options,i=w(this,nt),a=w(this,Vn),o=w(this,Ks),u=t!==n?t.state:w(this,Ea),{state:d}=t;let c={...d},h=!1,p;if(r._optimisticResults){const P=this.hasListeners(),Q=!P&&Rf(t,r),te=P&&Tf(t,n,r,s);(Q||te)&&(c={...c,...av(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:b}=c;p=c.data;let g=!1;if(r.placeholderData!==void 0&&p===void 0&&b==="pending"){let P;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(P=i.data,g=!0):P=typeof r.placeholderData=="function"?r.placeholderData((D=w(this,Gs))==null?void 0:D.state.data,w(this,Gs)):r.placeholderData,P!==void 0&&(b="success",p=mc(i==null?void 0:i.data,P,r),h=!0)}if(r.select&&p!==void 0&&!g)if(i&&p===(a==null?void 0:a.data)&&r.select===w(this,ba))p=w(this,Qs);else try{U(this,ba,r.select),p=r.select(p),p=mc(i==null?void 0:i.data,p,r),U(this,Qs,p),U(this,Gr,null)}catch(P){U(this,Gr,P)}w(this,Gr)&&(y=w(this,Gr),p=w(this,Qs),v=Date.now(),b="error");const f=c.fetchStatus==="fetching",m=b==="pending",E=b==="error",T=m&&f,j=p!==void 0,O={status:b,fetchStatus:c.fetchStatus,isPending:m,isSuccess:b==="success",isError:E,isInitialLoading:T,isLoading:T,data:p,dataUpdatedAt:c.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>u.dataUpdateCount||c.errorUpdateCount>u.errorUpdateCount,isFetching:f,isRefetching:f&&!m,isLoadingError:E&&!j,isPaused:c.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&j,isStale:zd(t,r),refetch:this.refetch,promise:w(this,vr),isEnabled:jt(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=Z=>{O.status==="error"?Z.reject(O.error):O.data!==void 0&&Z.resolve(O.data)},Q=()=>{const Z=U(this,vr,O.promise=gc());P(Z)},te=w(this,vr);switch(te.status){case"pending":t.queryHash===n.queryHash&&P(te);break;case"fulfilled":(O.status==="error"||O.data!==te.value)&&Q();break;case"rejected":(O.status!=="error"||O.error!==te.reason)&&Q();break}}return O}updateResult(){const t=w(this,nt),r=this.createResult(w(this,se),this.options);if(U(this,Vn,w(this,se).state),U(this,Ks,this.options),w(this,Vn).data!==void 0&&U(this,Gs,w(this,se)),el(r,t))return;U(this,nt,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!w(this,Js).size)return!0;const a=new Set(i??w(this,Js));return this.options.throwOnError&&a.add("error"),Object.keys(w(this,nt)).some(o=>{const l=o;return w(this,nt)[l]!==t[l]&&a.has(l)})};ee(this,ue,ov).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ee(this,ue,Sc).call(this)}},ct=new WeakMap,se=new WeakMap,Ea=new WeakMap,nt=new WeakMap,Vn=new WeakMap,Ks=new WeakMap,vr=new WeakMap,Gr=new WeakMap,ba=new WeakMap,Qs=new WeakMap,Gs=new WeakMap,Hn=new WeakMap,qn=new WeakMap,Jr=new WeakMap,Js=new WeakMap,ue=new WeakSet,Ii=function(t){ee(this,ue,bc).call(this);let r=w(this,se).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(at)),r},yc=function(){ee(this,ue,xc).call(this);const t=fn(this.options.staleTime,w(this,se));if(rs||w(this,nt).isStale||!fc(t))return;const n=Zg(w(this,nt).dataUpdatedAt,t)+1;U(this,Hn,Ln.setTimeout(()=>{w(this,nt).isStale||this.updateResult()},n))},wc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(w(this,se)):this.options.refetchInterval)??!1},_c=function(t){ee(this,ue,Ec).call(this),U(this,Jr,t),!(rs||jt(this.options.enabled,w(this,se))===!1||!fc(w(this,Jr))||w(this,Jr)===0)&&U(this,qn,Ln.setInterval(()=>{(this.options.refetchIntervalInBackground||Fd.isFocused())&&ee(this,ue,Ii).call(this)},w(this,Jr)))},Sc=function(){ee(this,ue,yc).call(this),ee(this,ue,_c).call(this,ee(this,ue,wc).call(this))},xc=function(){w(this,Hn)&&(Ln.clearTimeout(w(this,Hn)),U(this,Hn,void 0))},Ec=function(){w(this,qn)&&(Ln.clearInterval(w(this,qn)),U(this,qn,void 0))},bc=function(){const t=w(this,ct).getQueryCache().build(w(this,ct),this.options);if(t===w(this,se))return;const r=w(this,se);U(this,se,t),U(this,Ea,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ov=function(t){$e.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(w(this,nt))}),w(this,ct).getQueryCache().notify({query:w(this,se),type:"observerResultsUpdated"})})},Np);function i_(e,t){return jt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Rf(e,t){return i_(e,t)||e.state.data!==void 0&&kc(e,t,t.refetchOnMount)}function kc(e,t,r){if(jt(t.enabled,e)!==!1&&fn(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&zd(e,t)}return!1}function Tf(e,t,r,n){return(e!==t||jt(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&zd(e,r)}function zd(e,t){return jt(t.enabled,e)!==!1&&e.isStaleByTime(fn(t.staleTime,e))}function a_(e,t){return!el(e.getCurrentResult(),t)}function Of(e){return{onFetch:(t,r)=>{var d,c,h,p,y;const n=t.options,s=(h=(c=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:c.fetchMore)==null?void 0:h.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],a=((y=t.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const b=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=tv(t.options,t.fetchOptions),f=async(m,E,T)=>{if(v)return Promise.reject();if(E==null&&m.pages.length)return Promise.resolve(m);const S=(()=>{const Q={client:t.client,queryKey:t.queryKey,pageParam:E,direction:T?"backward":"forward",meta:t.options.meta};return b(Q),Q})(),O=await g(S),{maxPages:D}=t.options,P=T?Y0:J0;return{pages:P(m.pages,O,D),pageParams:P(m.pageParams,E,D)}};if(s&&i.length){const m=s==="backward",E=m?o_:Pf,T={pages:i,pageParams:a},j=E(n,T);o=await f(T,j,m)}else{const m=e??i.length;do{const E=l===0?a[0]??n.initialPageParam:Pf(n,o);if(l>0&&E==null)break;o=await f(o,E),l++}while(l<m)}return o};t.options.persister?t.fetchFn=()=>{var v,b;return(b=(v=t.options).persister)==null?void 0:b.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Pf(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function o_(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var ka,nr,st,Kn,sr,$r,Ap,l_=(Ap=class extends iv{constructor(t){super();V(this,sr);V(this,ka);V(this,nr);V(this,st);V(this,Kn);U(this,ka,t.client),this.mutationId=t.mutationId,U(this,st,t.mutationCache),U(this,nr,[]),this.state=t.state||lv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,nr).includes(t)||(w(this,nr).push(t),this.clearGcTimeout(),w(this,st).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){U(this,nr,w(this,nr).filter(r=>r!==t)),this.scheduleGc(),w(this,st).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,nr).length||(this.state.status==="pending"?this.scheduleGc():w(this,st).remove(this))}continue(){var t;return((t=w(this,Kn))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,l,u,d,c,h,p,y,v,b,g,f,m,E,T,j,S,O,D;const r=()=>{ee(this,sr,$r).call(this,{type:"continue"})},n={client:w(this,ka),meta:this.options.meta,mutationKey:this.options.mutationKey};U(this,Kn,sv({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(P,Q)=>{ee(this,sr,$r).call(this,{type:"failed",failureCount:P,error:Q})},onPause:()=>{ee(this,sr,$r).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,st).canRun(this)}));const s=this.state.status==="pending",i=!w(this,Kn).canStart();try{if(s)r();else{ee(this,sr,$r).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(a=w(this,st).config).onMutate)==null?void 0:o.call(a,t,this,n));const Q=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,n));Q!==this.state.context&&ee(this,sr,$r).call(this,{type:"pending",context:Q,variables:t,isPaused:i})}const P=await w(this,Kn).start();return await((c=(d=w(this,st).config).onSuccess)==null?void 0:c.call(d,P,t,this.state.context,this,n)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,P,t,this.state.context,n)),await((v=(y=w(this,st).config).onSettled)==null?void 0:v.call(y,P,null,this.state.variables,this.state.context,this,n)),await((g=(b=this.options).onSettled)==null?void 0:g.call(b,P,null,t,this.state.context,n)),ee(this,sr,$r).call(this,{type:"success",data:P}),P}catch(P){try{throw await((m=(f=w(this,st).config).onError)==null?void 0:m.call(f,P,t,this.state.context,this,n)),await((T=(E=this.options).onError)==null?void 0:T.call(E,P,t,this.state.context,n)),await((S=(j=w(this,st).config).onSettled)==null?void 0:S.call(j,void 0,P,this.state.variables,this.state.context,this,n)),await((D=(O=this.options).onSettled)==null?void 0:D.call(O,void 0,P,t,this.state.context,n)),P}finally{ee(this,sr,$r).call(this,{type:"error",error:P})}}finally{w(this,st).runNext(this)}}},ka=new WeakMap,nr=new WeakMap,st=new WeakMap,Kn=new WeakMap,sr=new WeakSet,$r=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$e.batch(()=>{w(this,nr).forEach(n=>{n.onMutationUpdate(t)}),w(this,st).notify({mutation:this,type:"updated",action:t})})},Ap);function lv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yr,qt,Ca,Ip,u_=(Ip=class extends di{constructor(t={}){super();V(this,yr);V(this,qt);V(this,Ca);this.config=t,U(this,yr,new Set),U(this,qt,new Map),U(this,Ca,0)}build(t,r,n){const s=new l_({client:t,mutationCache:this,mutationId:++Ba(this,Ca)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){w(this,yr).add(t);const r=ao(t);if(typeof r=="string"){const n=w(this,qt).get(r);n?n.push(t):w(this,qt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,yr).delete(t)){const r=ao(t);if(typeof r=="string"){const n=w(this,qt).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&w(this,qt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=ao(t);if(typeof r=="string"){const n=w(this,qt).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=ao(t);if(typeof r=="string"){const s=(n=w(this,qt).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$e.batch(()=>{w(this,yr).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,yr).clear(),w(this,qt).clear()})}getAll(){return Array.from(w(this,yr))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>xf(r,n))}findAll(t={}){return this.getAll().filter(r=>xf(t,r))}notify(t){$e.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return $e.batch(()=>Promise.all(t.map(r=>r.continue().catch(at))))}},yr=new WeakMap,qt=new WeakMap,Ca=new WeakMap,Ip);function ao(e){var t;return(t=e.options.scope)==null?void 0:t.id}var wr,Yr,dt,_r,kr,To,Cc,Dp,c_=(Dp=class extends di{constructor(r,n){super();V(this,kr);V(this,wr);V(this,Yr);V(this,dt);V(this,_r);U(this,wr,r),this.setOptions(n),this.bindMethods(),ee(this,kr,To).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=w(this,wr).defaultMutationOptions(r),el(this.options,n)||w(this,wr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:w(this,dt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ns(n.mutationKey)!==ns(this.options.mutationKey)?this.reset():((s=w(this,dt))==null?void 0:s.state.status)==="pending"&&w(this,dt).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=w(this,dt))==null||r.removeObserver(this)}onMutationUpdate(r){ee(this,kr,To).call(this),ee(this,kr,Cc).call(this,r)}getCurrentResult(){return w(this,Yr)}reset(){var r;(r=w(this,dt))==null||r.removeObserver(this),U(this,dt,void 0),ee(this,kr,To).call(this),ee(this,kr,Cc).call(this)}mutate(r,n){var s;return U(this,_r,n),(s=w(this,dt))==null||s.removeObserver(this),U(this,dt,w(this,wr).getMutationCache().build(w(this,wr),this.options)),w(this,dt).addObserver(this),w(this,dt).execute(r)}},wr=new WeakMap,Yr=new WeakMap,dt=new WeakMap,_r=new WeakMap,kr=new WeakSet,To=function(){var n;const r=((n=w(this,dt))==null?void 0:n.state)??lv();U(this,Yr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Cc=function(r){$e.batch(()=>{var n,s,i,a,o,l,u,d;if(w(this,_r)&&this.hasListeners()){const c=w(this,Yr).variables,h=w(this,Yr).context,p={client:w(this,wr),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((s=(n=w(this,_r)).onSuccess)==null||s.call(n,r.data,c,h,p),(a=(i=w(this,_r)).onSettled)==null||a.call(i,r.data,null,c,h,p)):(r==null?void 0:r.type)==="error"&&((l=(o=w(this,_r)).onError)==null||l.call(o,r.error,c,h,p),(d=(u=w(this,_r)).onSettled)==null||d.call(u,void 0,r.error,c,h,p))}this.listeners.forEach(c=>{c(w(this,Yr))})})},Dp),ir,Lp,d_=(Lp=class extends di{constructor(t={}){super();V(this,ir);this.config=t,U(this,ir,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??$d(s,r);let a=this.get(i);return a||(a=new n_({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){w(this,ir).has(t.queryHash)||(w(this,ir).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=w(this,ir).get(t.queryHash);r&&(t.destroy(),r===t&&w(this,ir).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$e.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,ir).get(t)}getAll(){return[...w(this,ir).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Sf(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Sf(t,n)):r}notify(t){$e.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){$e.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$e.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ir=new WeakMap,Lp),Te,Xr,Zr,Ys,Xs,en,Zs,ei,Up,h_=(Up=class{constructor(e={}){V(this,Te);V(this,Xr);V(this,Zr);V(this,Ys);V(this,Xs);V(this,en);V(this,Zs);V(this,ei);U(this,Te,e.queryCache||new d_),U(this,Xr,e.mutationCache||new u_),U(this,Zr,e.defaultOptions||{}),U(this,Ys,new Map),U(this,Xs,new Map),U(this,en,0)}mount(){Ba(this,en)._++,w(this,en)===1&&(U(this,Zs,Fd.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Te).onFocus())})),U(this,ei,tl.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Te).onOnline())})))}unmount(){var e,t;Ba(this,en)._--,w(this,en)===0&&((e=w(this,Zs))==null||e.call(this),U(this,Zs,void 0),(t=w(this,ei))==null||t.call(this),U(this,ei,void 0))}isFetching(e){return w(this,Te).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Xr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=w(this,Te).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=w(this,Te).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(fn(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return w(this,Te).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=w(this,Te).get(n.queryHash),i=s==null?void 0:s.state.data,a=K0(t,i);if(a!==void 0)return w(this,Te).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return $e.batch(()=>w(this,Te).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=w(this,Te).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=w(this,Te);$e.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=w(this,Te);return $e.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=$e.batch(()=>w(this,Te).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(at).catch(at)}invalidateQueries(e,t={}){return $e.batch(()=>(w(this,Te).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=$e.batch(()=>w(this,Te).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(at)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(at)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=w(this,Te).build(this,t);return r.isStaleByTime(fn(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(at).catch(at)}fetchInfiniteQuery(e){return e.behavior=Of(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(at).catch(at)}ensureInfiniteQueryData(e){return e.behavior=Of(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return tl.isOnline()?w(this,Xr).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,Te)}getMutationCache(){return w(this,Xr)}getDefaultOptions(){return w(this,Zr)}setDefaultOptions(e){U(this,Zr,e)}setQueryDefaults(e,t){w(this,Ys).set(ns(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Ys).values()],r={};return t.forEach(n=>{da(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){w(this,Xs).set(ns(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,Xs).values()],r={};return t.forEach(n=>{da(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,Zr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$d(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Md&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,Zr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,Te).clear(),w(this,Xr).clear()}},Te=new WeakMap,Xr=new WeakMap,Zr=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,en=new WeakMap,Zs=new WeakMap,ei=new WeakMap,Up),uv=R.createContext(void 0),bl=e=>{const t=R.useContext(uv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},f_=({client:e,children:t})=>(R.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),_.jsx(uv.Provider,{value:e,children:t})),cv=R.createContext(!1),p_=()=>R.useContext(cv);cv.Provider;function m_(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var g_=R.createContext(m_()),v_=()=>R.useContext(g_),y_=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},w_=e=>{R.useEffect(()=>{e.clearReset()},[e])},__=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||rv(r,[e.error,n])),S_=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},x_=(e,t)=>e.isLoading&&e.isFetching&&!t,E_=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,jf=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function b_(e,t,r){var c,h,p,y,v;const n=p_(),s=v_(),i=bl(),a=i.defaultQueryOptions(e);(h=(c=i.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||h.call(c,a),a._optimisticResults=n?"isRestoring":"optimistic",S_(a),y_(a,s),w_(s);const o=!i.getQueryCache().get(a.queryHash),[l]=R.useState(()=>new t(i,a)),u=l.getOptimisticResult(a),d=!n&&e.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(b=>{const g=d?l.subscribe($e.batchCalls(b)):at;return l.updateResult(),g},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),R.useEffect(()=>{l.setOptions(a)},[a,l]),E_(a,u))throw jf(a,l,s);if(__({result:u,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((y=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,a,u),a.experimental_prefetchInRender&&!rs&&x_(u,n)){const b=o?jf(a,l,s):(v=i.getQueryCache().get(a.queryHash))==null?void 0:v.promise;b==null||b.catch(at).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?u:l.trackResult(u)}function Na(e,t){return b_(e,s_)}function dv(e,t){const r=bl(),[n]=R.useState(()=>new c_(r,e));R.useEffect(()=>{n.setOptions(e)},[n,e]);const s=R.useSyncExternalStore(R.useCallback(a=>n.subscribe($e.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=R.useCallback((a,o)=>{n.mutate(a,o).catch(at)},[n]);if(s.error&&rv(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function kl(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function k_(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((n=n.apply(e,t||[])).next())})}const C_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Bd extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class R_ extends Bd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Nf extends Bd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Af extends Bd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Rc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Rc||(Rc={}));class T_{constructor(t,{headers:r={},customFetch:n,region:s=Rc.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=C_(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return k_(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:o,method:l,body:u,signal:d,timeout:c}=n;let h={},{region:p}=n;p||(p=this.region);const y=new URL(`${this.url}/${r}`);p&&p!=="any"&&(h["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(h["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(h["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;let b=d;c&&(a=new AbortController,i=setTimeout(()=>a.abort(),c),d?(b=a.signal,d.addEventListener("abort",()=>a.abort())):b=a.signal);const g=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:v,signal:b}).catch(T=>{throw new R_(T)}),f=g.headers.get("x-relay-error");if(f&&f==="true")throw new Nf(g);if(!g.ok)throw new Af(g);let m=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),E;return m==="application/json"?E=yield g.json():m==="application/octet-stream"||m==="application/pdf"?E=yield g.blob():m==="text/event-stream"?E=g:m==="multipart/form-data"?E=yield g.formData():E=yield g.text(),{data:E,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof Af||o instanceof Nf?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var O_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},P_=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,o=null,l=null,u=i.status,d=i.statusText;if(i.ok){var c,h;if(r.method!=="HEAD"){var p;const g=await i.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?o=g:o=JSON.parse(g))}const v=(c=r.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),b=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&b&&b.length>1&&(l=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,u=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var y;const v=await i.text();try{a=JSON.parse(v),Array.isArray(a)&&i.status===404&&(o=[],a=null,u=200,d="OK")}catch{i.status===404&&v===""?(u=204,d="No Content"):a={message:v}}if(a&&r.isMaybeSingle&&(!(a==null||(y=a.details)===null||y===void 0)&&y.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&r.shouldThrowOnError)throw new O_(a)}return{error:a,data:o,count:l,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let o="";const l=i==null?void 0:i.cause;if(l){var u,d,c,h;const y=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",v=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";o=`${(c=i==null?void 0:i.name)!==null&&c!==void 0?c:"FetchError"}: ${i==null?void 0:i.message}`,o+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${y}`,v&&(o+=` (${v})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var p;o=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},j_=class extends P_{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const If=new RegExp("[,()]");var ws=class extends j_{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&If.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&If.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},N_=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new ws({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((a,o)=>a.concat(Object.keys(o)),[]);if(i.length>0){const a=[...new Set(i)].map(o=>`"${o}"`);this.url.searchParams.set("columns",a.join(","))}}return new ws({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new ws({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new ws({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ws({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},A_=class hv{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new N_(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new hv(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let u;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([c,h])=>h!==void 0).map(([c,h])=>[c,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([c,h])=>{l.searchParams.append(c,h)})):(o="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new ws({method:o,url:l,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class I_{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const D_="2.89.0",L_=`realtime-js/${D_}`,fv="1.0.0",U_="2.0.0",Df=fv,Tc=1e4,$_=1e3,M_=100;var Br;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Br||(Br={}));var Le;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Le||(Le={}));var Qt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Qt||(Qt={}));var Oc;(function(e){e.websocket="websocket"})(Oc||(Oc={}));var On;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(On||(On={}));class F_{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,r,n){var s,i;const a=t.topic,o=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},c=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`metadata length ${c.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+u.length+c.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(p),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,l.length),y.setUint8(v++,o.length),y.setUint8(v++,a.length),y.setUint8(v++,u.length),y.setUint8(v++,c.length),y.setUint8(v++,r),Array.from(l,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(o,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(a,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(u,g=>y.setUint8(v++,g.charCodeAt(0))),Array.from(c,g=>y.setUint8(v++,g.charCodeAt(0)));var b=new Uint8Array(p.byteLength+n.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(n),p.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,a,o,l]=n;return r({join_ref:s,ref:i,topic:a,event:o,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const c=n.decode(t.slice(l,l+a));l=l+a;const h=t.slice(l,t.byteLength),p=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,y={type:this.BROADCAST_EVENT,event:d,payload:p};return a>0&&(y.meta=JSON.parse(c)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class pv{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ge;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ge||(ge={}));const Lf=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=z_(a,e,t,s),i),{}):{}},z_=(e,t,r,n)=>{const s=t.find(o=>o.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?mv(i,a):Pc(a)},mv=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return H_(t,r)}switch(e){case ge.bool:return B_(t);case ge.float4:case ge.float8:case ge.int2:case ge.int4:case ge.int8:case ge.numeric:case ge.oid:return W_(t);case ge.json:case ge.jsonb:return V_(t);case ge.timestamp:return q_(t);case ge.abstime:case ge.date:case ge.daterange:case ge.int4range:case ge.int8range:case ge.money:case ge.reltime:case ge.text:case ge.time:case ge.timestamptz:case ge.timetz:case ge.tsrange:case ge.tstzrange:return Pc(t);default:return Pc(t)}},Pc=e=>e,B_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},W_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},V_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},H_=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>mv(t,o))}return e},q_=e=>typeof e=="string"?e.replace(" ","T"):e,gv=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class lu{constructor(t,r,n={},s=Tc){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Uf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Uf||(Uf={}));class qi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qi.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=qi.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=qi.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),o={},l={};return this.map(i,(u,d)=>{a[u]||(l[u]=d)}),this.map(a,(u,d)=>{const c=i[u];if(c){const h=d.map(b=>b.presence_ref),p=c.map(b=>b.presence_ref),y=d.filter(b=>p.indexOf(b.presence_ref)<0),v=c.filter(b=>h.indexOf(b.presence_ref)<0);y.length>0&&(o[u]=y),v.length>0&&(l[u]=v)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(l),d.length>0){const c=t[o].map(p=>p.presence_ref),h=d.filter(p=>c.indexOf(p.presence_ref)<0);t[o].unshift(...h)}n(o,d,l)}),this.map(a,(o,l)=>{let u=t[o];if(!u)return;const d=l.map(c=>c.presence_ref);u=u.filter(c=>d.indexOf(c.presence_ref)<0),t[o]=u,s(o,u,l),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $f;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($f||($f={}));var Ki;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ki||(Ki={}));var mr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));class Is{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new lu(this,Qt.join,this.params,this.timeout),this.rejoinTimer=new pv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Le.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qt.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new qi(this),this.broadcastEndpointURL=gv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Le.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ki.PRESENCE]&&this.bindings[Ki.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,c={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(mr.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(mr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(mr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,g=[];for(let f=0;f<b;f++){const m=v[f],{filter:{event:E,schema:T,table:j,filter:S}}=m,O=p&&p[f];if(O&&O.event===E&&Is.isFilterValueEqual(O.schema,T)&&Is.isFilterValueEqual(O.table,j)&&Is.isFilterValueEqual(O.filter,S))g.push(Object.assign(Object.assign({},m),{id:O.id}));else{this.unsubscribe(),this.state=Le.errored,t==null||t(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(mr.SUBSCRIBED);return}}).receive("error",p=>{this.state=Le.errored,t==null||t(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Le.joined&&t===Ki.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const u=await o.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Le.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new lu(this,Qt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Le.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new lu(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>M_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=Qt;if(n&&[o,l,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,v,b;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(p=>p.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var y,v,b,g,f,m;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const E=p.id,T=(y=p.filter)===null||y===void 0?void 0:y.event;return E&&((v=r.ids)===null||v===void 0?void 0:v.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const E=(f=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return E==="*"||E===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:v,table:b,commit_timestamp:g,type:f,errors:m}=y;h=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:g,eventType:f,new:{},old:{},errors:m}),this._getPayloadRecords(y))}p.callback(h,n)})}_isClosed(){return this.state===Le.closed}_isJoined(){return this.state===Le.joined}_isJoining(){return this.state===Le.joining}_isLeaving(){return this.state===Le.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Is.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Qt.close,{},t)}_onError(t){this._on(Qt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Le.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Lf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Lf(t.columns,t.old_record)),r}}const uu=()=>{},oo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},K_=[1e3,2e3,5e3,1e4],Q_=1e4,G_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class J_{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Tc,this.transport=null,this.heartbeatIntervalMs=oo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uu,this.ref=0,this.reconnectTimer=null,this.vsn=Df,this.logger=uu,this.conn=null,this.sendBuffer=[],this.serializer=new F_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Oc.websocket}`,this.httpEndpoint=gv(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=I_.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Br.connecting:return On.Connecting;case Br.open:return On.Open;case Br.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Is(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},oo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Br.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Br.open||this.conn.readyState===Br.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Qt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([G_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:L_};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Qt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new pv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},oo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,a,o,l,u,d,c,h,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Tc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:oo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:uu,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Df,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>K_[y-1]||Q_,this.vsn){case fv:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,v)=>v(JSON.stringify(y)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:(y,v)=>v(JSON.parse(y));break;case U_:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ha=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Y_(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function X_(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Z_(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:a}){const o=Y_(e.baseUrl,n,s),l=await X_(e.auth),u=await t(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),c=(u.headers.get("content-type")||"").includes("application/json"),h=c&&d?JSON.parse(d):d;if(!u.ok){const p=c?h:void 0,y=p==null?void 0:p.error;throw new ha((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:p})}return{status:u.status,headers:u.headers,data:h}}}}function lo(e){return e.join("")}var eS=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:lo(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${lo(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lo(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${lo(e.namespace)}`}),!0}catch(t){if(t instanceof ha&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof ha&&r.status===409)return;throw r}}};function hs(e){return e.join("")}var tS=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hs(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hs(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hs(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hs(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hs(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hs(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof ha&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof ha&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},rS=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Z_({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new eS(this.client,t),this.tableOps=new tS(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Cl=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function xe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var nS=class extends Cl{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},jc=class extends Cl{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Wd=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sS=()=>Response,Nc=e=>{if(Array.isArray(e))return e.map(r=>Nc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Nc(n)}),t},iS=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},aS=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function fa(e){"@babel/helpers - typeof";return fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fa(e)}function oS(e,t){if(fa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lS(e){var t=oS(e,"string");return fa(t)=="symbol"?t:t+""}function uS(e,t,r){return(t=lS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mf(Object(r),!0).forEach(function(n){uS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const cu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},cS=async(e,t,r)=>{e instanceof await sS()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new nS(cu(n),s,i))}).catch(n=>{t(new jc(cu(n),n))}):t(new jc(cu(e),e))},dS=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(iS(n)?(s.headers=K({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),K(K({},s),r))};async function Aa(e,t,r,n,s,i){return new Promise((a,o)=>{e(r,dS(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>cS(l,o,n))})}async function pa(e,t,r,n){return Aa(e,"GET",t,r,n)}async function Vt(e,t,r,n,s){return Aa(e,"POST",t,n,s,r)}async function Ac(e,t,r,n,s){return Aa(e,"PUT",t,n,s,r)}async function hS(e,t,r,n){return Aa(e,"HEAD",t,K(K({},r),{},{noResolveJson:!0}),n)}async function Vd(e,t,r,n,s){return Aa(e,"DELETE",t,n,s,r)}var fS=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}}};let vv;vv=Symbol.toStringTag;var pS=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[vv]="BlobDownloadBuilder",this.promise=null}asStream(){return new fS(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}}};const mS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ff={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var gS=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Wd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const a=K(K({},Ff),n);let o=K(K({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),n!=null&&n.headers&&(o=K(K({},o),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),c=await(e=="PUT"?Ac:Vt)(s.fetch,`${s.url}/object/${d}`,i,K({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:c.Id,fullPath:c.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),a=s._getFinalPath(i),o=new URL(s.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=K({upsert:Ff.upsert},n),d=K(K({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Ac(s.fetch,o.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(xe(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=K({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Vt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(r.url+i.url),o=a.searchParams.get("token");if(!o)throw new Cl("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Vt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await Vt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await Vt(n.fetch,`${n.url}/object/sign/${s}`,K({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await Vt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>K(K({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),a=()=>pa(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new pS(a,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Nc(await pa(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await hS(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xe(n)&&n instanceof jc){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${o}`)}}}async remove(e){var t=this;try{return{data:await Vd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=K(K(K({},mS),t),{},{prefix:e||""});return{data:await Vt(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=K({},e);return{data:await Vt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const yv="2.89.0",wv={"X-Client-Info":`storage-js/${yv}`};var vS=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=K(K({},wv),t),this.fetch=Wd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await pa(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await pa(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Vt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Ac(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Vt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Vd(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},yS=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},wv),t),this.fetch=Wd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Vt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await pa(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Vd(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!aS(e))throw new Cl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new rS({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(s,o),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const Hd={"X-Client-Info":`storage-js/${yv}`,"Content-Type":"application/json"};var _v=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function xt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var du=class extends _v{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wS=class extends _v{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const qd=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_S=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),SS=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new du(zf(i),n,a))}).catch(()=>{const i=n+"";t(new du(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new du(s.statusText||`HTTP ${n} error`,n,i))}}else t(new wS(zf(e),e))},xS=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(_S(n)?(s.headers=K({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,K(K({},s),r)):s};async function ES(e,t,r,n,s,i){return new Promise((a,o)=>{e(r,xS(t,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>SS(l,o,n))})}async function Et(e,t,r,n,s){return ES(e,"POST",t,n,s,r)}var bS=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},Hd),t),this.fetch=qd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Et(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Et(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xt(n))return{data:null,error:n};throw n}}},kS=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},Hd),t),this.fetch=qd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Et(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Et(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Et(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}},CS=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=K(K({},Hd),t),this.fetch=qd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Et(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Et(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}}},RS=class extends CS{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new TS(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},TS=class extends bS{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new OS(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},OS=class extends kS{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,K(K({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},PS=class extends vS{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new gS(this.url,this.headers,e,this.fetch)}get vectors(){return new RS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yS(this.url+"/iceberg",this.headers,this.fetch)}};const Sv="2.89.0",_s=30*1e3,Ic=3,hu=Ic*_s,jS="http://localhost:9999",NS="supabase.auth.token",AS={"X-Client-Info":`gotrue-js/${Sv}`},Dc="X-Supabase-Api-Version",xv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,DS=10*60*1e3;class ma extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function B(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class LS extends ma{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function US(e){return B(e)&&e.name==="AuthApiError"}class Pn extends ma{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class jr extends ma{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class wt extends jr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $S(e){return B(e)&&e.name==="AuthSessionMissingError"}class fs extends jr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class uo extends jr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class co extends jr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MS(e){return B(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bf extends jr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FS extends jr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Lc extends jr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function fu(e){return B(e)&&e.name==="AuthRetryableFetchError"}class Wf extends jr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Uc extends jr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vf=` 	
\r=`.split(""),zS=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vf.length;t+=1)e[Vf[t].charCodeAt(0)]=-2;for(let t=0;t<rl.length;t+=1)e[rl[t].charCodeAt(0)]=t;return e})();function Hf(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(rl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(rl[n]),t.queuedBits-=6}}function Ev(e,t,r){const n=zS[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qf(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{VS(a,n,r)};for(let a=0;a<e.length;a+=1)Ev(e.charCodeAt(a),s,i);return t.join("")}function BS(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function WS(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}BS(n,t)}}function VS(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function zs(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Ev(e.charCodeAt(s),r,n);return new Uint8Array(t)}function HS(e){const t=[];return WS(e,r=>t.push(r)),new Uint8Array(t)}function Un(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Hf(s,r,n)),Hf(null,r,n),t.join("")}function qS(e){return Math.round(Date.now()/1e3)+e}function KS(){return Symbol("auth-callback")}const qe=()=>typeof window<"u"&&typeof document<"u",bn={tested:!1,writable:!1},bv=()=>{if(!qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bn.tested)return bn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bn.tested=!0,bn.writable=!0}catch{bn.tested=!0,bn.writable=!1}return bn.writable};function QS(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const kv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GS=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ss=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},kn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},He=async(e,t)=>{await e.removeItem(t)};let Cv=class Rv{constructor(){this.promise=new Rv.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}};Cv.promiseConstructor=Promise;function pu(e){const t=e.split(".");if(t.length!==3)throw new Uc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!IS.test(t[n]))throw new Uc("JWT not in base64url format");return{header:JSON.parse(qf(t[0])),payload:JSON.parse(qf(t[1])),signature:zs(t[2]),raw:{header:t[0],payload:t[1]}}}async function JS(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function YS(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function XS(e){return("0"+e.toString(16)).substr(-2)}function ZS(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,XS).join("")}async function ex(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function tx(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ex(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ps(e,t,r=!1){const n=ZS();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ss(e,`${t}-code-verifier`,s);const i=await tx(n);return[i,n===i?"plain":"s256"]}const rx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nx(e){const t=e.headers.get(Dc);if(!t||!t.match(rx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function sx(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function ix(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ax=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ms(e){if(!ax.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ox(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Kf(e){return JSON.parse(JSON.stringify(e))}const Tn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lx=[502,503,504];async function Qf(e){var t;if(!GS(e))throw new Lc(Tn(e),0);if(lx.includes(e.status))throw new Lc(Tn(e),e.status);let r;try{r=await e.json()}catch(i){throw new Pn(Tn(i),i)}let n;const s=nx(e);if(s&&s.getTime()>=xv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Wf(Tn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new wt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Wf(Tn(r),e.status,r.weak_password.reasons);throw new LS(Tn(r),e.status||500,n)}const ux=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function q(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Dc]||(i[Dc]=xv["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await cx(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function cx(e,t,r,n,s,i){const a=ux(t,n,s,i);let o;try{o=await e(r,Object.assign({},a))}catch(l){throw console.error(l),new Lc(Tn(l),0)}if(o.ok||await Qf(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Qf(l)}}function Bt(e){var t;let r=null;fx(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=qS(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Gf(e){const t=Bt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Hr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dx(e){return{data:e,error:null}}function hx(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=kl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Jf(e){return e}function fx(e){return e.access_token&&e.refresh_token&&e.expires_in}const gu=["global","local","others"];class px{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=kv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=gu[0]){if(gu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gu.join(", ")}`);try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hr})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=kl(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:hx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(B(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Hr})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Jf});if(d.error)throw d.error;const c=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(B(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ms(t);try{return await q(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Hr})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ms(t);try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Hr})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ms(t);try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hr})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ms(t.userId);try{const{data:r,error:n}=await q(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(B(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ms(t.userId),ms(t.id);try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await q(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Jf});if(d.error)throw d.error;const c=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(B(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await q(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(B(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await q(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(B(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await q(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await q(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await q(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(B(r))return{data:null,error:r};throw r}}}function Yf(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const gs={debug:!!(globalThis&&bv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mx extends Tv{}async function gx(e,t,r){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),gs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mx(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function vx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ov(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function yx(e){return parseInt(e,16)}function wx(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function _x(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:d,uri:c,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=Ov(e.address),y=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${p}

${v}`;let g=`URI: ${c}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),o&&(g+=`
Not Before: ${o.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let f=`
Resources:`;for(const m of u){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);f+=`
- ${m}`}g+=f}return`${b}
${g}`}class Ae extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class nl extends Ae{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Sx({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ae({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ae({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ae({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ae({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ae({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ae({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Ae({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ae({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(Pv(a)){if(i.rp.id!==a)return new Ae({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ae({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ae({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ae({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ae({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function xx({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ae({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ae({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Pv(n)){if(r.rpId!==n)return new Ae({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ae({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ae({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ae({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Ex{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const bx=new Ex;function kx(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=kl(e,["challenge","user","excludeCredentials"]),i=zs(t).buffer,a=Object.assign(Object.assign({},r),{id:zs(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:zs(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Cx(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=kl(e,["challenge","allowCredentials"]),s=zs(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:zs(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function Rx(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Un(new Uint8Array(e.response.attestationObject)),clientDataJSON:Un(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Tx(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Un(new Uint8Array(s.authenticatorData)),clientDataJSON:Un(new Uint8Array(s.clientDataJSON)),signature:Un(new Uint8Array(s.signature)),userHandle:s.userHandle?Un(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Pv(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Xf(){var e,t;return!!(qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Ox(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",t)}:{data:null,error:new nl("Empty credential response",t)}}catch(t){return{data:null,error:Sx({error:t,options:e})}}}async function Px(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",t)}:{data:null,error:new nl("Empty credential response",t)}}catch(t){return{data:null,error:xx({error:t,options:e})}}}const jx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Nx={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function sl(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(t(a)){const o=n[i];t(o)?n[i]=sl(o,a):n[i]=sl(a)}else n[i]=a}return n}function Ax(e,t){return sl(jx,e,t||{})}function Ix(e,t){return sl(Nx,e,t||{})}class Dx{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:o};const l=s??bx.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=Ax(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:c}=await Ox({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:c}}case"request":{const u=Ix(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:c}=await Px(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:c}}}}catch(a){return B(a)?{data:null,error:a}:{data:null,error:new Pn("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ma("rpId is required for WebAuthn authentication")};try{if(!Xf())return{data:null,error:new Pn("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(a){return B(a)?{data:null,error:a}:{data:null,error:new Pn("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ma("rpId is required for WebAuthn registration")};try{if(!Xf())return{data:null,error:new Pn("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var c;return(c=d.data)===null||c===void 0?void 0:c.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return B(a)?{data:null,error:a}:{data:null,error:new Pn("Unexpected error in register",a)}}}}vx();const Lx={url:jS,storageKey:NS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Zf(e,t,r){return await r()}const vs={};class ga{get jwks(){var t,r;return(r=(t=vs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){vs[this.storageKey]=Object.assign(Object.assign({},vs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=vs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){vs[this.storageKey]=Object.assign(Object.assign({},vs[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Lx),t);if(this.storageKey=i.storageKey,this.instanceID=(r=ga.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ga.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&qe()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new px({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=kv(i.fetch),this.lock=i.lock||Zf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&qe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=gx:this.lock=Zf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Dx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:bv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Yf(this.memoryStorage)),qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Sv}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(qe()&&(r=QS(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),qe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),MS(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return B(r)?this._returnResult({error:r}):this._returnResult({error:new Pn("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Bt}),{data:a,error:o}=i;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(B(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:c,options:h}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await ps(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:c,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:y},xform:Bt})}else if("phone"in t){const{phone:d,password:c,options:h}=t;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:c,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Bt})}else throw new uo("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return await He(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await He(this.storage,`${this.storageKey}-code-verifier`),B(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:o}=t;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gf})}else if("phone"in t){const{phone:i,password:a,options:o}=t;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gf})}else throw new uo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new fs;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(B(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,a,o,l,u,d,c,h;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:v,wallet:b,statement:g,options:f}=t;let m;if(qe())if(typeof b=="object")m=b;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")m=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=b}const E=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href),T=await m.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Ov(T[0]);let S=(n=f==null?void 0:f.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const D=await m.request({method:"eth_chainId"});S=yx(D)}const O={domain:E.host,address:j,statement:g,uri:E.href,version:"1",chainId:S,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=f==null?void 0:f.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=f==null?void 0:f.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=f==null?void 0:f.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=_x(O),y=await m.request({method:"personal_sign",params:[wx(p),j]})}try{const{data:v,error:b}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((c=t.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Bt});if(b)throw b;if(!v||!v.session||!v.user){const g=new fs;return this._returnResult({data:{user:null,session:null},error:g})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(B(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,s,i,a,o,l,u,d,c,h,p;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:b,wallet:g,statement:f,options:m}=t;let E;if(qe())if(typeof g=="object")E=g;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))E=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=g}const T=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const j=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),f?{statement:f}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)y=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${T.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((c=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||c===void 0)&&c.length?["Resources",...m.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await E.signMessage(new TextEncoder().encode(y),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:b,error:g}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Un(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Bt});if(g)throw g;if(!b||!b.session||!b.user){const f=new fs;return this._returnResult({data:{user:null,session:null},error:f})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:g})}catch(b){if(B(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new FS;const{data:i,error:a}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Bt});if(await He(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const o=new fs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await He(this.storage,`${this.storageKey}-code-verifier`),B(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,o=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Bt}),{data:l,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new fs;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(B(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:o,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ps(this.storage,this.storageKey));const{error:c}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}if("phone"in t){const{phone:o,options:l}=t,{data:u,error:d}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new uo("You must provide either an email or phone number.")}catch(o){if(await He(this.storage,`${this.storageKey}-code-verifier`),B(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Bt});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await ps(this.storage,this.storageKey));const u=await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:dx});return!((i=u.data)===null||i===void 0)&&i.url&&qe()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await He(this.storage,`${this.storageKey}-code-verifier`),B(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new wt;const{error:s}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(B(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:o}=await q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new uo("You must provide either an email or phone number and a type")}catch(r){if(B(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await kn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<hu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await kn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=mu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=ox(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Hr}):await this._useSession(async r=>{var n,s,i;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wt}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Hr})})}catch(r){if(B(r))return $S(r)&&(await this._removeSession(),await He(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new wt;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await ps(this.storage,this.storageKey));const{data:u,error:d}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Hr});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await He(this.storage,`${this.storageKey}-code-verifier`),B(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new wt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=pu(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(B(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:o}=r;if(o)throw o;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new wt;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(B(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!qe())throw new co("No browser detected.");if(t.error||t.error_description||t.error_code)throw new co(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new co("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bf("No code detected.");const{data:f,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=t;if(!i||!o||!a||!u)throw new co("No session defined in URL");const d=Math.round(Date.now()/1e3),c=parseInt(o);let h=d+c;l&&(h=parseInt(l));const p=h-d;p*1e3<=_s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${c}s`);const y=h-c;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:c,expires_at:h,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(B(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(US(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await He(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=KS(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ps(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await He(this.storage,`${this.storageKey}-code-verifier`),B(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,l,u,d;const{data:c,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return qe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(B(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:o,token:l,access_token:u,nonce:d}=t,c=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Bt}),{data:h,error:p}=c;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new fs}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(s){if(await He(this.storage,`${this.storageKey}-code-verifier`),B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await YS(async s=>(s>0&&await JS(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Bt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&fu(i)&&Date.now()+a-n<_s})}catch(n){if(this._debug(r,"error",n),B(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),qe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await kn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await kn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Ss(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:mu()}else if(s&&!s.user&&!s.user){const a=await kn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await He(this.storage,this.storageKey+"-user"),await Ss(this.storage,this.storageKey,s)):s.user=mu()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<hu;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${hu}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),fu(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Cv;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new wt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),B(i)){const a={data:null,error:i};return fu(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await He(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ss(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Kf(s);await Ss(this.storage,this.storageKey,i)}else{const s=Kf(r);await Ss(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await He(this.storage,this.storageKey),await He(this.storage,this.storageKey+"-code-verifier"),await He(this.storage,this.storageKey+"-user"),this.userStorage&&await He(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_s);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/_s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${_s}ms, refresh threshold is ${Ic} ticks`),s<=Ic&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Tv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await ps(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await q(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Rx(t.webauthn.credential_response):Tx(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:kx(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Cx(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=pu(n.access_token);let a=null;i.aal&&(a=i.aal);let o=a;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await q(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new wt})})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new wt});const a=await q(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&qe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new wt});const a=await q(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&qe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await q(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new wt})})}catch(t){if(B(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await q(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wt})})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+DS>s)return n;const{data:i,error:a}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});n=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=pu(n);r!=null&&r.allowExpired||sx(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const d=ix(s.alg),c=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,c,a,HS(`${o}.${l}`)))throw new Uc("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}}ga.nextInstanceID={};const Ux=ga,$x="2.89.0";let Di="";typeof Deno<"u"?Di="deno":typeof document<"u"?Di="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Di="react-native":Di="node";const Mx={"X-Client-Info":`supabase-js-${Di}/${$x}`},Fx={headers:Mx},zx={schema:"public"},Bx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wx={};function va(e){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va(e)}function Vx(e,t){if(va(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(va(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hx(e){var t=Vx(e,"string");return va(t)=="symbol"?t:t+""}function qx(e,t,r){return(t=Hx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ep(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ep(Object(r),!0).forEach(function(n){qx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ep(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Kx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Qx=()=>Headers,Gx=(e,t,r)=>{const n=Kx(r),s=Qx();return async(i,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Oe(Oe({},a),{},{headers:u}))}};function Jx(e){return e.endsWith("/")?e:e+"/"}function Yx(e,t){var r,n;const{db:s,auth:i,realtime:a,global:o}=e,{db:l,auth:u,realtime:d,global:c}=t,h={db:Oe(Oe({},l),s),auth:Oe(Oe({},u),i),realtime:Oe(Oe({},d),a),storage:{},global:Oe(Oe(Oe({},c),o),{},{headers:Oe(Oe({},(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function Xx(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jx(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Zx=class extends Ux{constructor(e){super(e)}},eE=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Xx(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,o={db:zx,realtime:Wx,auth:Oe(Oe({},Bx),{},{storageKey:a}),global:Fx},l=Yx(r??{},o);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,c)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(c)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=Gx(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Oe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new A_(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new PS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new T_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:a,lock:o,debug:l,throwOnError:u},d,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zx({url:this.authUrl.href,headers:Oe(Oe({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:a,lock:o,debug:l,throwOnError:u,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new J_(this.realtimeUrl.href,Oe(Oe({},e),{},{params:Oe(Oe({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const tE=(e,t,r)=>new eE(e,t,r);function rE(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}rE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nE="https://xlapwkublxdetzzrkyjd.supabase.co",sE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhsYXB3a3VibHhkZXR6enJreWpkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY0MTMyNjUsImV4cCI6MjA4MTk4OTI2NX0.7FzJ0qVaR1LW2XBex3u3Hc5qG06fkSZZ-ULGulNTjpg",pe=tE(nE,sE,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}var Ie;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ie||(Ie={}));const tp="popstate";function iE(e){e===void 0&&(e={});function t(s,i){let{pathname:a="/",search:o="",hash:l=""}=Nr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ya("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let a=s.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");o=u===-1?l:l.slice(0,u)}return o+"#"+(typeof i=="string"?i:ss(i))}function n(s,i){gn(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return oE(t,r,n,e)}function re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aE(){return Math.random().toString(36).substr(2,8)}function rp(e,t){return{usr:e.state,key:e.key,idx:t}}function ya(e,t,r,n){return r===void 0&&(r=null),_e({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nr(t):t,{state:r,key:t&&t.key||n||aE()})}function ss(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Nr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function oE(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=Ie.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(_e({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function c(){o=Ie.Pop;let b=d(),g=b==null?null:b-u;u=b,l&&l({action:o,location:v.location,delta:g})}function h(b,g){o=Ie.Push;let f=ya(v.location,b,g);r&&r(f,b),u=d()+1;let m=rp(f,u),E=v.createHref(f);try{a.pushState(m,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}i&&l&&l({action:o,location:v.location,delta:1})}function p(b,g){o=Ie.Replace;let f=ya(v.location,b,g);r&&r(f,b),u=d();let m=rp(f,u),E=v.createHref(f);a.replaceState(m,"",E),i&&l&&l({action:o,location:v.location,delta:0})}function y(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof b=="string"?b:ss(b);return f=f.replace(/ $/,"%20"),re(g,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,g)}let v={get action(){return o},get location(){return e(s,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(tp,c),l=b,()=>{s.removeEventListener(tp,c),l=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let g=y(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:p,go(b){return a.go(b)}};return v}var ce;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ce||(ce={}));const lE=new Set(["lazy","caseSensitive","path","id","index","children"]);function uE(e){return e.index===!0}function il(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((s,i)=>{let a=[...r,String(i)],o=typeof s.id=="string"?s.id:a.join("-");if(re(s.index!==!0||!s.children,"Cannot specify children on an index route"),re(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),uE(s)){let l=_e({},s,t(s),{id:o});return n[o]=l,l}else{let l=_e({},s,t(s),{id:o,children:void 0});return n[o]=l,s.children&&(l.children=il(s.children,t,a,n)),l}})}function jn(e,t,r){return r===void 0&&(r="/"),Oo(e,t,r,!1)}function Oo(e,t,r,n){let s=typeof t=="string"?Nr(t):t,i=hi(s.pathname||"/",r);if(i==null)return null;let a=jv(e);dE(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=xE(i);o=_E(a[l],u,n)}return o}function cE(e,t){let{route:r,pathname:n,params:s}=e;return{id:r.id,pathname:n,params:s,data:t[r.id],handle:r.handle}}function jv(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(re(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=br([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(re(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jv(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:yE(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of Nv(i.path))s(i,a,l)}),t}function Nv(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=Nv(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function dE(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:wE(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const hE=/^:[\w-]+$/,fE=3,pE=2,mE=1,gE=10,vE=-2,np=e=>e==="*";function yE(e,t){let r=e.split("/"),n=r.length;return r.some(np)&&(n+=vE),t&&(n+=pE),r.filter(s=>!np(s)).reduce((s,i)=>s+(hE.test(i)?fE:i===""?mE:gE),n)}function wE(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function _E(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",c=sp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!c&&u&&r&&!n[n.length-1].route.index&&(c=sp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!c)return null;Object.assign(s,c.params),a.push({params:s,pathname:br([i,c.pathname]),pathnameBase:CE(br([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=br([i,c.pathnameBase]))}return a}function sp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=SE(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,c)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let v=o[c]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=o[c];return p&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function SE(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),gn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function xE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gn(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function hi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const EE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bE=e=>EE.test(e);function kE(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Nr(e):e,i;if(r)if(bE(r))i=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),gn(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?i=ip(r.substring(1),"/"):i=ip(r,t)}else i=t;return{pathname:i,search:RE(n),hash:TE(s)}}function ip(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function vu(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Av(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Rl(e,t){let r=Av(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Tl(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Nr(e):(s=_e({},e),re(!s.pathname||!s.pathname.includes("?"),vu("?","pathname","search",s)),re(!s.pathname||!s.pathname.includes("#"),vu("#","pathname","hash",s)),re(!s.search||!s.search.includes("#"),vu("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let c=t.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),c-=1;s.pathname=h.join("/")}o=c>=0?t[c]:"/"}let l=kE(s,o),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const br=e=>e.join("/").replace(/\/\/+/g,"/"),CE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,TE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class al{constructor(t,r,n,s){s===void 0&&(s=!1),this.status=t,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function wa(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Iv=["post","put","patch","delete"],OE=new Set(Iv),PE=["get",...Iv],jE=new Set(PE),NE=new Set([301,302,303,307,308]),AE=new Set([307,308]),yu={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IE={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ri={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DE=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),Dv="remix-router-transitions";function LE(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;re(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let x=e.detectErrorBoundary;s=k=>({hasErrorBoundary:x(k)})}else s=DE;let i={},a=il(e.routes,s,void 0,i),o,l=e.basename||"/",u=e.dataStrategy||FE,d=e.patchRoutesOnNavigation,c=_e({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),h=null,p=new Set,y=null,v=null,b=null,g=e.hydrationData!=null,f=jn(a,e.history.location,l),m=!1,E=null;if(f==null&&!d){let x=ht(404,{pathname:e.history.location.pathname}),{matches:k,route:C}=gp(a);f=k,E={[C.id]:x}}f&&!e.hydrationData&&$a(f,a,e.history.location.pathname).active&&(f=null);let T;if(f)if(f.some(x=>x.route.lazy))T=!1;else if(!f.some(x=>x.route.loader))T=!0;else if(c.v7_partialHydration){let x=e.hydrationData?e.hydrationData.loaderData:null,k=e.hydrationData?e.hydrationData.errors:null;if(k){let C=f.findIndex(N=>k[N.route.id]!==void 0);T=f.slice(0,C+1).every(N=>!Mc(N.route,x,k))}else T=f.every(C=>!Mc(C.route,x,k))}else T=e.hydrationData!=null;else if(T=!1,f=[],c.v7_partialHydration){let x=$a(null,a,e.history.location.pathname);x.active&&x.matches&&(m=!0,f=x.matches)}let j,S={historyAction:e.history.action,location:e.history.location,matches:f,initialized:T,navigation:yu,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||E,fetchers:new Map,blockers:new Map},O=Ie.Pop,D=!1,P,Q=!1,te=new Map,Z=null,We=!1,Mt=!1,Ar=[],Ir=new Set,I=new Map,G=0,Y=-1,he=new Map,fe=new Set,Ft=new Map,yt=new Map,et=new Set,tt=new Map,Ot=new Map,Da;function Xv(){if(h=e.history.listen(x=>{let{action:k,location:C,delta:N}=x;if(Da){Da(),Da=void 0;return}gn(Ot.size===0||N!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let L=ah({currentLocation:S.location,nextLocation:C,historyAction:k});if(L&&N!=null){let H=new Promise(J=>{Da=J});e.history.go(N*-1),Ua(L,{state:"blocked",location:C,proceed(){Ua(L,{state:"proceeding",proceed:void 0,reset:void 0,location:C}),H.then(()=>e.history.go(N))},reset(){let J=new Map(S.blockers);J.set(L,Ri),rt({blockers:J})}});return}return Sn(k,C)}),r){eb(t,te);let x=()=>tb(t,te);t.addEventListener("pagehide",x),Z=()=>t.removeEventListener("pagehide",x)}return S.initialized||Sn(Ie.Pop,S.location,{initialHydration:!0}),j}function Zv(){h&&h(),Z&&Z(),p.clear(),P&&P.abort(),S.fetchers.forEach((x,k)=>La(k)),S.blockers.forEach((x,k)=>ih(k))}function ey(x){return p.add(x),()=>p.delete(x)}function rt(x,k){k===void 0&&(k={}),S=_e({},S,x);let C=[],N=[];c.v7_fetcherPersist&&S.fetchers.forEach((L,H)=>{L.state==="idle"&&(et.has(H)?N.push(H):C.push(H))}),et.forEach(L=>{!S.fetchers.has(L)&&!I.has(L)&&N.push(L)}),[...p].forEach(L=>L(S,{deletedFetchers:N,viewTransitionOpts:k.viewTransitionOpts,flushSync:k.flushSync===!0})),c.v7_fetcherPersist?(C.forEach(L=>S.fetchers.delete(L)),N.forEach(L=>La(L))):N.forEach(L=>et.delete(L))}function os(x,k,C){var N,L;let{flushSync:H}=C===void 0?{}:C,J=S.actionData!=null&&S.navigation.formMethod!=null&&Gt(S.navigation.formMethod)&&S.navigation.state==="loading"&&((N=x.state)==null?void 0:N._isRedirect)!==!0,F;k.actionData?Object.keys(k.actionData).length>0?F=k.actionData:F=null:J?F=S.actionData:F=null;let z=k.loaderData?pp(S.loaderData,k.loaderData,k.matches||[],k.errors):S.loaderData,M=S.blockers;M.size>0&&(M=new Map(M),M.forEach((ie,Ve)=>M.set(Ve,Ri)));let W=D===!0||S.navigation.formMethod!=null&&Gt(S.navigation.formMethod)&&((L=x.state)==null?void 0:L._isRedirect)!==!0;o&&(a=o,o=void 0),We||O===Ie.Pop||(O===Ie.Push?e.history.push(x,x.state):O===Ie.Replace&&e.history.replace(x,x.state));let X;if(O===Ie.Pop){let ie=te.get(S.location.pathname);ie&&ie.has(x.pathname)?X={currentLocation:S.location,nextLocation:x}:te.has(x.pathname)&&(X={currentLocation:x,nextLocation:S.location})}else if(Q){let ie=te.get(S.location.pathname);ie?ie.add(x.pathname):(ie=new Set([x.pathname]),te.set(S.location.pathname,ie)),X={currentLocation:S.location,nextLocation:x}}rt(_e({},k,{actionData:F,loaderData:z,historyAction:O,location:x,initialized:!0,navigation:yu,revalidation:"idle",restoreScrollPosition:lh(x,k.matches||S.matches),preventScrollReset:W,blockers:M}),{viewTransitionOpts:X,flushSync:H===!0}),O=Ie.Pop,D=!1,Q=!1,We=!1,Mt=!1,Ar=[]}async function Xd(x,k){if(typeof x=="number"){e.history.go(x);return}let C=$c(S.location,S.matches,l,c.v7_prependBasename,x,c.v7_relativeSplatPath,k==null?void 0:k.fromRouteId,k==null?void 0:k.relative),{path:N,submission:L,error:H}=ap(c.v7_normalizeFormMethod,!1,C,k),J=S.location,F=ya(S.location,N,k&&k.state);F=_e({},F,e.history.encodeLocation(F));let z=k&&k.replace!=null?k.replace:void 0,M=Ie.Push;z===!0?M=Ie.Replace:z===!1||L!=null&&Gt(L.formMethod)&&L.formAction===S.location.pathname+S.location.search&&(M=Ie.Replace);let W=k&&"preventScrollReset"in k?k.preventScrollReset===!0:void 0,X=(k&&k.flushSync)===!0,ie=ah({currentLocation:J,nextLocation:F,historyAction:M});if(ie){Ua(ie,{state:"blocked",location:F,proceed(){Ua(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),Xd(x,k)},reset(){let Ve=new Map(S.blockers);Ve.set(ie,Ri),rt({blockers:Ve})}});return}return await Sn(M,F,{submission:L,pendingError:H,preventScrollReset:W,replace:k&&k.replace,enableViewTransition:k&&k.viewTransition,flushSync:X})}function ty(){if(jl(),rt({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){Sn(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}Sn(O||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:Q===!0})}}async function Sn(x,k,C){P&&P.abort(),P=null,O=x,We=(C&&C.startUninterruptedRevalidation)===!0,dy(S.location,S.matches),D=(C&&C.preventScrollReset)===!0,Q=(C&&C.enableViewTransition)===!0;let N=o||a,L=C&&C.overrideNavigation,H=C!=null&&C.initialHydration&&S.matches&&S.matches.length>0&&!m?S.matches:jn(N,k,l),J=(C&&C.flushSync)===!0;if(H&&S.initialized&&!Mt&&qE(S.location,k)&&!(C&&C.submission&&Gt(C.submission.formMethod))){os(k,{matches:H},{flushSync:J});return}let F=$a(H,N,k.pathname);if(F.active&&F.matches&&(H=F.matches),!H){let{error:me,notFoundMatches:le,route:Ce}=Nl(k.pathname);os(k,{matches:le,loaderData:{},errors:{[Ce.id]:me}},{flushSync:J});return}P=new AbortController;let z=ys(e.history,k,P.signal,C&&C.submission),M;if(C&&C.pendingError)M=[Nn(H).route.id,{type:ce.error,error:C.pendingError}];else if(C&&C.submission&&Gt(C.submission.formMethod)){let me=await ry(z,k,C.submission,H,F.active,{replace:C.replace,flushSync:J});if(me.shortCircuited)return;if(me.pendingActionResult){let[le,Ce]=me.pendingActionResult;if(St(Ce)&&wa(Ce.error)&&Ce.error.status===404){P=null,os(k,{matches:me.matches,loaderData:{},errors:{[le]:Ce.error}});return}}H=me.matches||H,M=me.pendingActionResult,L=wu(k,C.submission),J=!1,F.active=!1,z=ys(e.history,z.url,z.signal)}let{shortCircuited:W,matches:X,loaderData:ie,errors:Ve}=await ny(z,k,H,F.active,L,C&&C.submission,C&&C.fetcherSubmission,C&&C.replace,C&&C.initialHydration===!0,J,M);W||(P=null,os(k,_e({matches:X||H},mp(M),{loaderData:ie,errors:Ve})))}async function ry(x,k,C,N,L,H){H===void 0&&(H={}),jl();let J=XE(k,C);if(rt({navigation:J},{flushSync:H.flushSync===!0}),L){let M=await Ma(N,k.pathname,x.signal);if(M.type==="aborted")return{shortCircuited:!0};if(M.type==="error"){let W=Nn(M.partialMatches).route.id;return{matches:M.partialMatches,pendingActionResult:[W,{type:ce.error,error:M.error}]}}else if(M.matches)N=M.matches;else{let{notFoundMatches:W,error:X,route:ie}=Nl(k.pathname);return{matches:W,pendingActionResult:[ie.id,{type:ce.error,error:X}]}}}let F,z=Li(N,k);if(!z.route.action&&!z.route.lazy)F={type:ce.error,error:ht(405,{method:x.method,pathname:k.pathname,routeId:z.route.id})};else if(F=(await mi("action",S,x,[z],N,null))[z.route.id],x.signal.aborted)return{shortCircuited:!0};if($n(F)){let M;return H&&H.replace!=null?M=H.replace:M=dp(F.response.headers.get("Location"),new URL(x.url),l)===S.location.pathname+S.location.search,await xn(x,F,!0,{submission:C,replace:M}),{shortCircuited:!0}}if(nn(F))throw ht(400,{type:"defer-action"});if(St(F)){let M=Nn(N,z.route.id);return(H&&H.replace)!==!0&&(O=Ie.Push),{matches:N,pendingActionResult:[M.route.id,F]}}return{matches:N,pendingActionResult:[z.route.id,F]}}async function ny(x,k,C,N,L,H,J,F,z,M,W){let X=L||wu(k,H),ie=H||J||yp(X),Ve=!We&&(!c.v7_partialHydration||!z);if(N){if(Ve){let Re=Zd(W);rt(_e({navigation:X},Re!==void 0?{actionData:Re}:{}),{flushSync:M})}let oe=await Ma(C,k.pathname,x.signal);if(oe.type==="aborted")return{shortCircuited:!0};if(oe.type==="error"){let Re=Nn(oe.partialMatches).route.id;return{matches:oe.partialMatches,loaderData:{},errors:{[Re]:oe.error}}}else if(oe.matches)C=oe.matches;else{let{error:Re,notFoundMatches:us,route:yi}=Nl(k.pathname);return{matches:us,loaderData:{},errors:{[yi.id]:Re}}}}let me=o||a,[le,Ce]=lp(e.history,S,C,ie,k,c.v7_partialHydration&&z===!0,c.v7_skipActionErrorRevalidation,Mt,Ar,Ir,et,Ft,fe,me,l,W);if(Al(oe=>!(C&&C.some(Re=>Re.route.id===oe))||le&&le.some(Re=>Re.route.id===oe)),Y=++G,le.length===0&&Ce.length===0){let oe=nh();return os(k,_e({matches:C,loaderData:{},errors:W&&St(W[1])?{[W[0]]:W[1].error}:null},mp(W),oe?{fetchers:new Map(S.fetchers)}:{}),{flushSync:M}),{shortCircuited:!0}}if(Ve){let oe={};if(!N){oe.navigation=X;let Re=Zd(W);Re!==void 0&&(oe.actionData=Re)}Ce.length>0&&(oe.fetchers=sy(Ce)),rt(oe,{flushSync:M})}Ce.forEach(oe=>{Lr(oe.key),oe.controller&&I.set(oe.key,oe.controller)});let ls=()=>Ce.forEach(oe=>Lr(oe.key));P&&P.signal.addEventListener("abort",ls);let{loaderResults:gi,fetcherResults:hr}=await eh(S,C,le,Ce,x);if(x.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",ls),Ce.forEach(oe=>I.delete(oe.key));let er=ho(gi);if(er)return await xn(x,er.result,!0,{replace:F}),{shortCircuited:!0};if(er=ho(hr),er)return fe.add(er.key),await xn(x,er.result,!0,{replace:F}),{shortCircuited:!0};let{loaderData:Il,errors:vi}=fp(S,C,gi,W,Ce,hr,tt);tt.forEach((oe,Re)=>{oe.subscribe(us=>{(us||oe.done)&&tt.delete(Re)})}),c.v7_partialHydration&&z&&S.errors&&(vi=_e({},S.errors,vi));let En=nh(),Fa=sh(Y),za=En||Fa||Ce.length>0;return _e({matches:C,loaderData:Il,errors:vi},za?{fetchers:new Map(S.fetchers)}:{})}function Zd(x){if(x&&!St(x[1]))return{[x[0]]:x[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function sy(x){return x.forEach(k=>{let C=S.fetchers.get(k.key),N=Ti(void 0,C?C.data:void 0);S.fetchers.set(k.key,N)}),new Map(S.fetchers)}function iy(x,k,C,N){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Lr(x);let L=(N&&N.flushSync)===!0,H=o||a,J=$c(S.location,S.matches,l,c.v7_prependBasename,C,c.v7_relativeSplatPath,k,N==null?void 0:N.relative),F=jn(H,J,l),z=$a(F,H,J);if(z.active&&z.matches&&(F=z.matches),!F){dr(x,k,ht(404,{pathname:J}),{flushSync:L});return}let{path:M,submission:W,error:X}=ap(c.v7_normalizeFormMethod,!0,J,N);if(X){dr(x,k,X,{flushSync:L});return}let ie=Li(F,M),Ve=(N&&N.preventScrollReset)===!0;if(W&&Gt(W.formMethod)){ay(x,k,M,ie,F,z.active,L,Ve,W);return}Ft.set(x,{routeId:k,path:M}),oy(x,k,M,ie,F,z.active,L,Ve,W)}async function ay(x,k,C,N,L,H,J,F,z){jl(),Ft.delete(x);function M(Ne){if(!Ne.route.action&&!Ne.route.lazy){let cs=ht(405,{method:z.formMethod,pathname:C,routeId:k});return dr(x,k,cs,{flushSync:J}),!0}return!1}if(!H&&M(N))return;let W=S.fetchers.get(x);Dr(x,ZE(z,W),{flushSync:J});let X=new AbortController,ie=ys(e.history,C,X.signal,z);if(H){let Ne=await Ma(L,new URL(ie.url).pathname,ie.signal,x);if(Ne.type==="aborted")return;if(Ne.type==="error"){dr(x,k,Ne.error,{flushSync:J});return}else if(Ne.matches){if(L=Ne.matches,N=Li(L,C),M(N))return}else{dr(x,k,ht(404,{pathname:C}),{flushSync:J});return}}I.set(x,X);let Ve=G,le=(await mi("action",S,ie,[N],L,x))[N.route.id];if(ie.signal.aborted){I.get(x)===X&&I.delete(x);return}if(c.v7_fetcherPersist&&et.has(x)){if($n(le)||St(le)){Dr(x,Mr(void 0));return}}else{if($n(le))if(I.delete(x),Y>Ve){Dr(x,Mr(void 0));return}else return fe.add(x),Dr(x,Ti(z)),xn(ie,le,!1,{fetcherSubmission:z,preventScrollReset:F});if(St(le)){dr(x,k,le.error);return}}if(nn(le))throw ht(400,{type:"defer-action"});let Ce=S.navigation.location||S.location,ls=ys(e.history,Ce,X.signal),gi=o||a,hr=S.navigation.state!=="idle"?jn(gi,S.navigation.location,l):S.matches;re(hr,"Didn't find any matches after fetcher action");let er=++G;he.set(x,er);let Il=Ti(z,le.data);S.fetchers.set(x,Il);let[vi,En]=lp(e.history,S,hr,z,Ce,!1,c.v7_skipActionErrorRevalidation,Mt,Ar,Ir,et,Ft,fe,gi,l,[N.route.id,le]);En.filter(Ne=>Ne.key!==x).forEach(Ne=>{let cs=Ne.key,uh=S.fetchers.get(cs),py=Ti(void 0,uh?uh.data:void 0);S.fetchers.set(cs,py),Lr(cs),Ne.controller&&I.set(cs,Ne.controller)}),rt({fetchers:new Map(S.fetchers)});let Fa=()=>En.forEach(Ne=>Lr(Ne.key));X.signal.addEventListener("abort",Fa);let{loaderResults:za,fetcherResults:oe}=await eh(S,hr,vi,En,ls);if(X.signal.aborted)return;X.signal.removeEventListener("abort",Fa),he.delete(x),I.delete(x),En.forEach(Ne=>I.delete(Ne.key));let Re=ho(za);if(Re)return xn(ls,Re.result,!1,{preventScrollReset:F});if(Re=ho(oe),Re)return fe.add(Re.key),xn(ls,Re.result,!1,{preventScrollReset:F});let{loaderData:us,errors:yi}=fp(S,hr,za,void 0,En,oe,tt);if(S.fetchers.has(x)){let Ne=Mr(le.data);S.fetchers.set(x,Ne)}sh(er),S.navigation.state==="loading"&&er>Y?(re(O,"Expected pending action"),P&&P.abort(),os(S.navigation.location,{matches:hr,loaderData:us,errors:yi,fetchers:new Map(S.fetchers)})):(rt({errors:yi,loaderData:pp(S.loaderData,us,hr,yi),fetchers:new Map(S.fetchers)}),Mt=!1)}async function oy(x,k,C,N,L,H,J,F,z){let M=S.fetchers.get(x);Dr(x,Ti(z,M?M.data:void 0),{flushSync:J});let W=new AbortController,X=ys(e.history,C,W.signal);if(H){let le=await Ma(L,new URL(X.url).pathname,X.signal,x);if(le.type==="aborted")return;if(le.type==="error"){dr(x,k,le.error,{flushSync:J});return}else if(le.matches)L=le.matches,N=Li(L,C);else{dr(x,k,ht(404,{pathname:C}),{flushSync:J});return}}I.set(x,W);let ie=G,me=(await mi("loader",S,X,[N],L,x))[N.route.id];if(nn(me)&&(me=await Qd(me,X.signal,!0)||me),I.get(x)===W&&I.delete(x),!X.signal.aborted){if(et.has(x)){Dr(x,Mr(void 0));return}if($n(me))if(Y>ie){Dr(x,Mr(void 0));return}else{fe.add(x),await xn(X,me,!1,{preventScrollReset:F});return}if(St(me)){dr(x,k,me.error);return}re(!nn(me),"Unhandled fetcher deferred data"),Dr(x,Mr(me.data))}}async function xn(x,k,C,N){let{submission:L,fetcherSubmission:H,preventScrollReset:J,replace:F}=N===void 0?{}:N;k.response.headers.has("X-Remix-Revalidate")&&(Mt=!0);let z=k.response.headers.get("Location");re(z,"Expected a Location header on the redirect Response"),z=dp(z,new URL(x.url),l);let M=ya(S.location,z,{_isRedirect:!0});if(r){let le=!1;if(k.response.headers.has("X-Remix-Reload-Document"))le=!0;else if(Kd.test(z)){const Ce=e.history.createURL(z);le=Ce.origin!==t.location.origin||hi(Ce.pathname,l)==null}if(le){F?t.location.replace(z):t.location.assign(z);return}}P=null;let W=F===!0||k.response.headers.has("X-Remix-Replace")?Ie.Replace:Ie.Push,{formMethod:X,formAction:ie,formEncType:Ve}=S.navigation;!L&&!H&&X&&ie&&Ve&&(L=yp(S.navigation));let me=L||H;if(AE.has(k.response.status)&&me&&Gt(me.formMethod))await Sn(W,M,{submission:_e({},me,{formAction:z}),preventScrollReset:J||D,enableViewTransition:C?Q:void 0});else{let le=wu(M,L);await Sn(W,M,{overrideNavigation:le,fetcherSubmission:H,preventScrollReset:J||D,enableViewTransition:C?Q:void 0})}}async function mi(x,k,C,N,L,H){let J,F={};try{J=await zE(u,x,k,C,N,L,H,i,s)}catch(z){return N.forEach(M=>{F[M.route.id]={type:ce.error,error:z}}),F}for(let[z,M]of Object.entries(J))if(KE(M)){let W=M.result;F[z]={type:ce.redirect,response:VE(W,C,z,L,l,c.v7_relativeSplatPath)}}else F[z]=await WE(M);return F}async function eh(x,k,C,N,L){let H=x.matches,J=mi("loader",x,L,C,k,null),F=Promise.all(N.map(async W=>{if(W.matches&&W.match&&W.controller){let ie=(await mi("loader",x,ys(e.history,W.path,W.controller.signal),[W.match],W.matches,W.key))[W.match.route.id];return{[W.key]:ie}}else return Promise.resolve({[W.key]:{type:ce.error,error:ht(404,{pathname:W.path})}})})),z=await J,M=(await F).reduce((W,X)=>Object.assign(W,X),{});return await Promise.all([JE(k,z,L.signal,H,x.loaderData),YE(k,M,N)]),{loaderResults:z,fetcherResults:M}}function jl(){Mt=!0,Ar.push(...Al()),Ft.forEach((x,k)=>{I.has(k)&&Ir.add(k),Lr(k)})}function Dr(x,k,C){C===void 0&&(C={}),S.fetchers.set(x,k),rt({fetchers:new Map(S.fetchers)},{flushSync:(C&&C.flushSync)===!0})}function dr(x,k,C,N){N===void 0&&(N={});let L=Nn(S.matches,k);La(x),rt({errors:{[L.route.id]:C},fetchers:new Map(S.fetchers)},{flushSync:(N&&N.flushSync)===!0})}function th(x){return yt.set(x,(yt.get(x)||0)+1),et.has(x)&&et.delete(x),S.fetchers.get(x)||IE}function La(x){let k=S.fetchers.get(x);I.has(x)&&!(k&&k.state==="loading"&&he.has(x))&&Lr(x),Ft.delete(x),he.delete(x),fe.delete(x),c.v7_fetcherPersist&&et.delete(x),Ir.delete(x),S.fetchers.delete(x)}function ly(x){let k=(yt.get(x)||0)-1;k<=0?(yt.delete(x),et.add(x),c.v7_fetcherPersist||La(x)):yt.set(x,k),rt({fetchers:new Map(S.fetchers)})}function Lr(x){let k=I.get(x);k&&(k.abort(),I.delete(x))}function rh(x){for(let k of x){let C=th(k),N=Mr(C.data);S.fetchers.set(k,N)}}function nh(){let x=[],k=!1;for(let C of fe){let N=S.fetchers.get(C);re(N,"Expected fetcher: "+C),N.state==="loading"&&(fe.delete(C),x.push(C),k=!0)}return rh(x),k}function sh(x){let k=[];for(let[C,N]of he)if(N<x){let L=S.fetchers.get(C);re(L,"Expected fetcher: "+C),L.state==="loading"&&(Lr(C),he.delete(C),k.push(C))}return rh(k),k.length>0}function uy(x,k){let C=S.blockers.get(x)||Ri;return Ot.get(x)!==k&&Ot.set(x,k),C}function ih(x){S.blockers.delete(x),Ot.delete(x)}function Ua(x,k){let C=S.blockers.get(x)||Ri;re(C.state==="unblocked"&&k.state==="blocked"||C.state==="blocked"&&k.state==="blocked"||C.state==="blocked"&&k.state==="proceeding"||C.state==="blocked"&&k.state==="unblocked"||C.state==="proceeding"&&k.state==="unblocked","Invalid blocker state transition: "+C.state+" -> "+k.state);let N=new Map(S.blockers);N.set(x,k),rt({blockers:N})}function ah(x){let{currentLocation:k,nextLocation:C,historyAction:N}=x;if(Ot.size===0)return;Ot.size>1&&gn(!1,"A router only supports one blocker at a time");let L=Array.from(Ot.entries()),[H,J]=L[L.length-1],F=S.blockers.get(H);if(!(F&&F.state==="proceeding")&&J({currentLocation:k,nextLocation:C,historyAction:N}))return H}function Nl(x){let k=ht(404,{pathname:x}),C=o||a,{matches:N,route:L}=gp(C);return Al(),{notFoundMatches:N,route:L,error:k}}function Al(x){let k=[];return tt.forEach((C,N)=>{(!x||x(N))&&(C.cancel(),k.push(N),tt.delete(N))}),k}function cy(x,k,C){if(y=x,b=k,v=C||null,!g&&S.navigation===yu){g=!0;let N=lh(S.location,S.matches);N!=null&&rt({restoreScrollPosition:N})}return()=>{y=null,b=null,v=null}}function oh(x,k){return v&&v(x,k.map(N=>cE(N,S.loaderData)))||x.key}function dy(x,k){if(y&&b){let C=oh(x,k);y[C]=b()}}function lh(x,k){if(y){let C=oh(x,k),N=y[C];if(typeof N=="number")return N}return null}function $a(x,k,C){if(d)if(x){if(Object.keys(x[0].params).length>0)return{active:!0,matches:Oo(k,C,l,!0)}}else return{active:!0,matches:Oo(k,C,l,!0)||[]};return{active:!1,matches:null}}async function Ma(x,k,C,N){if(!d)return{type:"success",matches:x};let L=x;for(;;){let H=o==null,J=o||a,F=i;try{await d({signal:C,path:k,matches:L,fetcherKey:N,patch:(W,X)=>{C.aborted||cp(W,X,J,F,s)}})}catch(W){return{type:"error",error:W,partialMatches:L}}finally{H&&!C.aborted&&(a=[...a])}if(C.aborted)return{type:"aborted"};let z=jn(J,k,l);if(z)return{type:"success",matches:z};let M=Oo(J,k,l,!0);if(!M||L.length===M.length&&L.every((W,X)=>W.route.id===M[X].route.id))return{type:"success",matches:null};L=M}}function hy(x){i={},o=il(x,s,void 0,i)}function fy(x,k){let C=o==null;cp(x,k,o||a,i,s),C&&(a=[...a],rt({}))}return j={get basename(){return l},get future(){return c},get state(){return S},get routes(){return a},get window(){return t},initialize:Xv,subscribe:ey,enableScrollRestoration:cy,navigate:Xd,fetch:iy,revalidate:ty,createHref:x=>e.history.createHref(x),encodeLocation:x=>e.history.encodeLocation(x),getFetcher:th,deleteFetcher:ly,dispose:Zv,getBlocker:uy,deleteBlocker:ih,patchRoutes:fy,_internalFetchControllers:I,_internalActiveDeferreds:tt,_internalSetRoutes:hy},j}function UE(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function $c(e,t,r,n,s,i,a,o){let l,u;if(a){l=[];for(let c of t)if(l.push(c),c.route.id===a){u=c;break}}else l=t,u=t[t.length-1];let d=Tl(s||".",Rl(l,i),hi(e.pathname,r)||e.pathname,o==="path");if(s==null&&(d.search=e.search,d.hash=e.hash),(s==null||s===""||s===".")&&u){let c=Gd(d.search);if(u.route.index&&!c)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&c){let h=new URLSearchParams(d.search),p=h.getAll("index");h.delete("index"),p.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();d.search=y?"?"+y:""}}return n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:br([r,d.pathname])),ss(d)}function ap(e,t,r,n){if(!n||!UE(n))return{path:r};if(n.formMethod&&!GE(n.formMethod))return{path:r,error:ht(405,{method:n.formMethod})};let s=()=>({path:r,error:ht(400,{type:"invalid-body"})}),i=n.formMethod||"get",a=e?i.toUpperCase():i.toLowerCase(),o=$v(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Gt(a))return s();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((p,y)=>{let[v,b]=y;return""+p+v+"="+b+`
`},""):String(n.body);return{path:r,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!Gt(a))return s();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return s()}}}re(typeof FormData=="function","FormData is not available in this environment");let l,u;if(n.formData)l=Fc(n.formData),u=n.formData;else if(n.body instanceof FormData)l=Fc(n.body),u=n.body;else if(n.body instanceof URLSearchParams)l=n.body,u=hp(l);else if(n.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(n.body),u=hp(l)}catch{return s()}let d={formMethod:a,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Gt(d.formMethod))return{path:r,submission:d};let c=Nr(r);return t&&c.search&&Gd(c.search)&&l.append("index",""),c.search="?"+l,{path:ss(c),submission:d}}function op(e,t,r){r===void 0&&(r=!1);let n=e.findIndex(s=>s.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function lp(e,t,r,n,s,i,a,o,l,u,d,c,h,p,y,v){let b=v?St(v[1])?v[1].error:v[1].data:void 0,g=e.createURL(t.location),f=e.createURL(s),m=r;i&&t.errors?m=op(r,Object.keys(t.errors)[0],!0):v&&St(v[1])&&(m=op(r,v[0]));let E=v?v[1].statusCode:void 0,T=a&&E&&E>=400,j=m.filter((O,D)=>{let{route:P}=O;if(P.lazy)return!0;if(P.loader==null)return!1;if(i)return Mc(P,t.loaderData,t.errors);if($E(t.loaderData,t.matches[D],O)||l.some(Z=>Z===O.route.id))return!0;let Q=t.matches[D],te=O;return up(O,_e({currentUrl:g,currentParams:Q.params,nextUrl:f,nextParams:te.params},n,{actionResult:b,actionStatus:E,defaultShouldRevalidate:T?!1:o||g.pathname+g.search===f.pathname+f.search||g.search!==f.search||Lv(Q,te)}))}),S=[];return c.forEach((O,D)=>{if(i||!r.some(We=>We.route.id===O.routeId)||d.has(D))return;let P=jn(p,O.path,y);if(!P){S.push({key:D,routeId:O.routeId,path:O.path,matches:null,match:null,controller:null});return}let Q=t.fetchers.get(D),te=Li(P,O.path),Z=!1;h.has(D)?Z=!1:u.has(D)?(u.delete(D),Z=!0):Q&&Q.state!=="idle"&&Q.data===void 0?Z=o:Z=up(te,_e({currentUrl:g,currentParams:t.matches[t.matches.length-1].params,nextUrl:f,nextParams:r[r.length-1].params},n,{actionResult:b,actionStatus:E,defaultShouldRevalidate:T?!1:o})),Z&&S.push({key:D,routeId:O.routeId,path:O.path,matches:P,match:te,controller:new AbortController})}),[j,S]}function Mc(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,s=r!=null&&r[e.id]!==void 0;return!n&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!s}function $E(e,t,r){let n=!t||r.route.id!==t.route.id,s=e[r.route.id]===void 0;return n||s}function Lv(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function up(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function cp(e,t,r,n,s){var i;let a;if(e){let u=n[e];re(u,"No route found to patch children into: routeId = "+e),u.children||(u.children=[]),a=u.children}else a=r;let o=t.filter(u=>!a.some(d=>Uv(u,d))),l=il(o,s,[e||"_","patch",String(((i=a)==null?void 0:i.length)||"0")],n);a.push(...l)}function Uv(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var s;return(s=t.children)==null?void 0:s.some(i=>Uv(r,i))}):!1}async function ME(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let s=r[e.id];re(s,"No route found in manifest");let i={};for(let a in n){let l=s[a]!==void 0&&a!=="hasErrorBoundary";gn(!l,'Route "'+s.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!l&&!lE.has(a)&&(i[a]=n[a])}Object.assign(s,i),Object.assign(s,_e({},t(s),{lazy:void 0}))}async function FE(e){let{matches:t}=e,r=t.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,i,a)=>Object.assign(s,{[r[a].route.id]:i}),{})}async function zE(e,t,r,n,s,i,a,o,l,u){let d=i.map(p=>p.route.lazy?ME(p.route,l,o):void 0),c=i.map((p,y)=>{let v=d[y],b=s.some(f=>f.route.id===p.route.id);return _e({},p,{shouldLoad:b,resolve:async f=>(f&&n.method==="GET"&&(p.route.lazy||p.route.loader)&&(b=!0),b?BE(t,n,p,v,f,u):Promise.resolve({type:ce.data,result:void 0}))})}),h=await e({matches:c,request:n,params:i[0].params,fetcherKey:a,context:u});try{await Promise.all(d)}catch{}return h}async function BE(e,t,r,n,s,i){let a,o,l=u=>{let d,c=new Promise((y,v)=>d=v);o=()=>d(),t.signal.addEventListener("abort",o);let h=y=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):u({request:t,params:r.params,context:i},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(v=>h(v)):h())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,c])};try{let u=r.route[e];if(n)if(u){let d,[c]=await Promise.all([l(u).catch(h=>{d=h}),n]);if(d!==void 0)throw d;a=c}else if(await n,u=r.route[e],u)a=await l(u);else if(e==="action"){let d=new URL(t.url),c=d.pathname+d.search;throw ht(405,{method:t.method,pathname:c,routeId:r.route.id})}else return{type:ce.data,result:void 0};else if(u)a=await l(u);else{let d=new URL(t.url),c=d.pathname+d.search;throw ht(404,{pathname:c})}re(a.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:ce.error,result:u}}finally{o&&t.signal.removeEventListener("abort",o)}return a}async function WE(e){let{result:t,type:r}=e;if(Mv(t)){let c;try{let h=t.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(h){return{type:ce.error,error:h}}return r===ce.error?{type:ce.error,error:new al(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:ce.data,data:c,statusCode:t.status,headers:t.headers}}if(r===ce.error){if(vp(t)){var n,s;if(t.data instanceof Error){var i,a;return{type:ce.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}}return{type:ce.error,error:new al(((n=t.init)==null?void 0:n.status)||500,void 0,t.data),statusCode:wa(t)?t.status:void 0,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}}return{type:ce.error,error:t,statusCode:wa(t)?t.status:void 0}}if(QE(t)){var o,l;return{type:ce.deferred,deferredData:t,statusCode:(o=t.init)==null?void 0:o.status,headers:((l=t.init)==null?void 0:l.headers)&&new Headers(t.init.headers)}}if(vp(t)){var u,d;return{type:ce.data,data:t.data,statusCode:(u=t.init)==null?void 0:u.status,headers:(d=t.init)!=null&&d.headers?new Headers(t.init.headers):void 0}}return{type:ce.data,data:t}}function VE(e,t,r,n,s,i){let a=e.headers.get("Location");if(re(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Kd.test(a)){let o=n.slice(0,n.findIndex(l=>l.route.id===r)+1);a=$c(new URL(t.url),o,s,!0,a,i),e.headers.set("Location",a)}return e}function dp(e,t,r){if(Kd.test(e)){let n=e,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),i=hi(s.pathname,r)!=null;if(s.origin===t.origin&&i)return s.pathname+s.search+s.hash}return e}function ys(e,t,r,n){let s=e.createURL($v(t)).toString(),i={signal:r};if(n&&Gt(n.formMethod)){let{formMethod:a,formEncType:o}=n;i.method=a.toUpperCase(),o==="application/json"?(i.headers=new Headers({"Content-Type":o}),i.body=JSON.stringify(n.json)):o==="text/plain"?i.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?i.body=Fc(n.formData):i.body=n.formData}return new Request(s,i)}function Fc(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function hp(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function HE(e,t,r,n,s){let i={},a=null,o,l=!1,u={},d=r&&St(r[1])?r[1].error:void 0;return e.forEach(c=>{if(!(c.route.id in t))return;let h=c.route.id,p=t[h];if(re(!$n(p),"Cannot handle redirect results in processLoaderData"),St(p)){let y=p.error;d!==void 0&&(y=d,d=void 0),a=a||{};{let v=Nn(e,h);a[v.route.id]==null&&(a[v.route.id]=y)}i[h]=void 0,l||(l=!0,o=wa(p.error)?p.error.status:500),p.headers&&(u[h]=p.headers)}else nn(p)?(n.set(h,p.deferredData),i[h]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(o=p.statusCode),p.headers&&(u[h]=p.headers)):(i[h]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(o=p.statusCode),p.headers&&(u[h]=p.headers))}),d!==void 0&&r&&(a={[r[0]]:d},i[r[0]]=void 0),{loaderData:i,errors:a,statusCode:o||200,loaderHeaders:u}}function fp(e,t,r,n,s,i,a){let{loaderData:o,errors:l}=HE(t,r,n,a);return s.forEach(u=>{let{key:d,match:c,controller:h}=u,p=i[d];if(re(p,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(St(p)){let y=Nn(e.matches,c==null?void 0:c.route.id);l&&l[y.route.id]||(l=_e({},l,{[y.route.id]:p.error})),e.fetchers.delete(d)}else if($n(p))re(!1,"Unhandled fetcher revalidation redirect");else if(nn(p))re(!1,"Unhandled fetcher deferred data");else{let y=Mr(p.data);e.fetchers.set(d,y)}}),{loaderData:o,errors:l}}function pp(e,t,r,n){let s=_e({},t);for(let i of r){let a=i.route.id;if(t.hasOwnProperty(a)?t[a]!==void 0&&(s[a]=t[a]):e[a]!==void 0&&i.route.loader&&(s[a]=e[a]),n&&n.hasOwnProperty(a))break}return s}function mp(e){return e?St(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Nn(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function gp(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ht(e,t){let{pathname:r,routeId:n,method:s,type:i,message:a}=t===void 0?{}:t,o="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(o="Bad Request",s&&r&&n?l="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):e===403?(o="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):e===404?(o="Not Found",l='No route matches URL "'+r+'"'):e===405&&(o="Method Not Allowed",s&&r&&n?l="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new al(e||500,o,new Error(l),!0)}function ho(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,s]=t[r];if($n(s))return{key:n,result:s}}}function $v(e){let t=typeof e=="string"?Nr(e):e;return ss(_e({},t,{hash:""}))}function qE(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function KE(e){return Mv(e.result)&&NE.has(e.result.status)}function nn(e){return e.type===ce.deferred}function St(e){return e.type===ce.error}function $n(e){return(e&&e.type)===ce.redirect}function vp(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function QE(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Mv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function GE(e){return jE.has(e.toLowerCase())}function Gt(e){return OE.has(e.toLowerCase())}async function JE(e,t,r,n,s){let i=Object.entries(t);for(let a=0;a<i.length;a++){let[o,l]=i[a],u=e.find(h=>(h==null?void 0:h.route.id)===o);if(!u)continue;let d=n.find(h=>h.route.id===u.route.id),c=d!=null&&!Lv(d,u)&&(s&&s[u.route.id])!==void 0;nn(l)&&c&&await Qd(l,r,!1).then(h=>{h&&(t[o]=h)})}}async function YE(e,t,r){for(let n=0;n<r.length;n++){let{key:s,routeId:i,controller:a}=r[n],o=t[s];e.find(u=>(u==null?void 0:u.route.id)===i)&&nn(o)&&(re(a,"Expected an AbortController for revalidating fetcher deferred result"),await Qd(o,a.signal,!0).then(u=>{u&&(t[s]=u)}))}}async function Qd(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:ce.data,data:e.deferredData.unwrappedData}}catch(s){return{type:ce.error,error:s}}return{type:ce.data,data:e.deferredData.data}}}function Gd(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Li(e,t){let r=typeof t=="string"?Nr(t).search:t.search;if(e[e.length-1].route.index&&Gd(r||""))return e[e.length-1];let n=Av(e);return n[n.length-1]}function yp(e){let{formMethod:t,formAction:r,formEncType:n,text:s,formData:i,json:a}=e;if(!(!t||!r||!n)){if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:i,json:void 0,text:void 0};if(a!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:a,text:void 0}}}function wu(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function XE(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Ti(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ZE(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Mr(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function eb(e,t){try{let r=e.sessionStorage.getItem(Dv);if(r){let n=JSON.parse(r);for(let[s,i]of Object.entries(n||{}))i&&Array.isArray(i)&&t.set(s,new Set(i||[]))}}catch{}}function tb(e,t){if(t.size>0){let r={};for(let[n,s]of t)r[n]=[...s];try{e.sessionStorage.setItem(Dv,JSON.stringify(r))}catch(n){gn(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ol.apply(this,arguments)}const Ol=R.createContext(null),Fv=R.createContext(null),_n=R.createContext(null),Jd=R.createContext(null),ur=R.createContext({outlet:null,matches:[],isDataRoute:!1}),zv=R.createContext(null);function rb(e,t){let{relative:r}=t===void 0?{}:t;fi()||re(!1);let{basename:n,navigator:s}=R.useContext(_n),{hash:i,pathname:a,search:o}=Wv(e,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:br([n,a])),s.createHref({pathname:l,search:o,hash:i})}function fi(){return R.useContext(Jd)!=null}function pi(){return fi()||re(!1),R.useContext(Jd).location}function Bv(e){R.useContext(_n).static||R.useLayoutEffect(e)}function Ia(){let{isDataRoute:e}=R.useContext(ur);return e?vb():nb()}function nb(){fi()||re(!1);let e=R.useContext(Ol),{basename:t,future:r,navigator:n}=R.useContext(_n),{matches:s}=R.useContext(ur),{pathname:i}=pi(),a=JSON.stringify(Rl(s,r.v7_relativeSplatPath)),o=R.useRef(!1);return Bv(()=>{o.current=!0}),R.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=Tl(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:br([t,c.pathname])),(d.replace?n.replace:n.push)(c,d.state,d)},[t,n,a,i,e])}const sb=R.createContext(null);function ib(e){let t=R.useContext(ur).outlet;return t&&R.createElement(sb.Provider,{value:e},t)}function ab(){let{matches:e}=R.useContext(ur),t=e[e.length-1];return t?t.params:{}}function Wv(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=R.useContext(_n),{matches:s}=R.useContext(ur),{pathname:i}=pi(),a=JSON.stringify(Rl(s,n.v7_relativeSplatPath));return R.useMemo(()=>Tl(e,JSON.parse(a),i,r==="path"),[e,a,i,r])}function ob(e,t,r,n){fi()||re(!1);let{navigator:s}=R.useContext(_n),{matches:i}=R.useContext(ur),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=pi(),d;d=u;let c=d.pathname||"/",h=c;if(l!=="/"){let v=l.replace(/^\//,"").split("/");h="/"+c.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=jn(e,{pathname:h});return hb(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:br([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:br([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n)}function lb(){let e=gb(),t=wa(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),r?R.createElement("pre",{style:s},r):null,null)}const ub=R.createElement(lb,null);class cb extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?R.createElement(ur.Provider,{value:this.props.routeContext},R.createElement(zv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function db(e){let{routeContext:t,match:r,children:n}=e,s=R.useContext(Ol);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(ur.Provider,{value:t},n)}function hb(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);d>=0||re(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let c=a[d];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=d),c.route.id){let{loaderData:h,errors:p}=r,y=c.route.loader&&h[c.route.id]===void 0&&(!p||p[c.route.id]===void 0);if(c.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,c,h)=>{let p,y=!1,v=null,b=null;r&&(p=o&&c.route.id?o[c.route.id]:void 0,v=c.route.errorElement||ub,l&&(u<0&&h===0?(yb("route-fallback"),y=!0,b=null):u===h&&(y=!0,b=c.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),f=()=>{let m;return p?m=v:y?m=b:c.route.Component?m=R.createElement(c.route.Component,null):c.route.element?m=c.route.element:m=d,R.createElement(db,{match:c,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:m})};return r&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?R.createElement(cb,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:f(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):f()},null)}var Vv=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Vv||{}),Hv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hv||{});function fb(e){let t=R.useContext(Ol);return t||re(!1),t}function pb(e){let t=R.useContext(Fv);return t||re(!1),t}function mb(e){let t=R.useContext(ur);return t||re(!1),t}function qv(e){let t=mb(),r=t.matches[t.matches.length-1];return r.route.id||re(!1),r.route.id}function gb(){var e;let t=R.useContext(zv),r=pb(Hv.UseRouteError),n=qv();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function vb(){let{router:e}=fb(Vv.UseNavigateStable),t=qv(),r=R.useRef(!1);return Bv(()=>{r.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ol({fromRouteId:t},i)))},[e,t])}const wp={};function yb(e,t,r){wp[e]||(wp[e]=!0)}function wb(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function zc(e){let{to:t,replace:r,state:n,relative:s}=e;fi()||re(!1);let{future:i,static:a}=R.useContext(_n),{matches:o}=R.useContext(ur),{pathname:l}=pi(),u=Ia(),d=Tl(t,Rl(o,i.v7_relativeSplatPath),l,s==="path"),c=JSON.stringify(d);return R.useEffect(()=>u(JSON.parse(c),{replace:r,state:n,relative:s}),[u,c,s,r,n]),null}function _b(e){return ib(e.context)}function Sb(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ie.Pop,navigator:i,static:a=!1,future:o}=e;fi()&&re(!1);let l=t.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:i,static:a,future:ol({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof n=="string"&&(n=Nr(n));let{pathname:d="/",search:c="",hash:h="",state:p=null,key:y="default"}=n,v=R.useMemo(()=>{let b=hi(d,l);return b==null?null:{location:{pathname:b,search:c,hash:h,state:p,key:y},navigationType:s}},[l,d,c,h,p,y,s]);return v==null?null:R.createElement(_n.Provider,{value:u},R.createElement(Jd.Provider,{children:r,value:v}))}new Promise(()=>{});function xb(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:R.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:R.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:R.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_a.apply(this,arguments)}function Eb(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function bb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kb(e,t){return e.button===0&&(!t||t==="_self")&&!bb(e)}const Cb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rb="6";try{window.__reactRouterVersion=Rb}catch{}function Tb(e,t){return LE({basename:void 0,future:_a({},void 0,{v7_prependBasename:!0}),history:iE({window:void 0}),hydrationData:Ob(),routes:e,mapRouteProperties:xb,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Ob(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=_a({},t,{errors:Pb(t.errors)})),t}function Pb(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")r[n]=new al(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let a=new i(s.message);a.stack="",r[n]=a}catch{}}if(r[n]==null){let i=new Error(s.message);i.stack="",r[n]=i}}else r[n]=s;return r}const jb=R.createContext({isTransitioning:!1}),Nb=R.createContext(new Map),Ab="startTransition",_p=jy[Ab],Ib="flushSync",Sp=W0[Ib];function Db(e){_p?_p(e):e()}function Oi(e){Sp?Sp(e):e()}class Lb{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function Ub(e){let{fallbackElement:t,router:r,future:n}=e,[s,i]=R.useState(r.state),[a,o]=R.useState(),[l,u]=R.useState({isTransitioning:!1}),[d,c]=R.useState(),[h,p]=R.useState(),[y,v]=R.useState(),b=R.useRef(new Map),{v7_startTransition:g}=n||{},f=R.useCallback(O=>{g?Db(O):O()},[g]),m=R.useCallback((O,D)=>{let{deletedFetchers:P,flushSync:Q,viewTransitionOpts:te}=D;O.fetchers.forEach((We,Mt)=>{We.data!==void 0&&b.current.set(Mt,We.data)}),P.forEach(We=>b.current.delete(We));let Z=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!te||Z){Q?Oi(()=>i(O)):f(()=>i(O));return}if(Q){Oi(()=>{h&&(d&&d.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:te.currentLocation,nextLocation:te.nextLocation})});let We=r.window.document.startViewTransition(()=>{Oi(()=>i(O))});We.finished.finally(()=>{Oi(()=>{c(void 0),p(void 0),o(void 0),u({isTransitioning:!1})})}),Oi(()=>p(We));return}h?(d&&d.resolve(),h.skipTransition(),v({state:O,currentLocation:te.currentLocation,nextLocation:te.nextLocation})):(o(O),u({isTransitioning:!0,flushSync:!1,currentLocation:te.currentLocation,nextLocation:te.nextLocation}))},[r.window,h,d,b,f]);R.useLayoutEffect(()=>r.subscribe(m),[r,m]),R.useEffect(()=>{l.isTransitioning&&!l.flushSync&&c(new Lb)},[l]),R.useEffect(()=>{if(d&&a&&r.window){let O=a,D=d.promise,P=r.window.document.startViewTransition(async()=>{f(()=>i(O)),await D});P.finished.finally(()=>{c(void 0),p(void 0),o(void 0),u({isTransitioning:!1})}),p(P)}},[f,a,d,r.window]),R.useEffect(()=>{d&&a&&s.location.key===a.location.key&&d.resolve()},[d,h,s.location,a]),R.useEffect(()=>{!l.isTransitioning&&y&&(o(y.state),u({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),v(void 0))},[l.isTransitioning,y]),R.useEffect(()=>{},[]);let E=R.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:O=>r.navigate(O),push:(O,D,P)=>r.navigate(O,{state:D,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(O,D,P)=>r.navigate(O,{replace:!0,state:D,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[r]),T=r.basename||"/",j=R.useMemo(()=>({router:r,navigator:E,static:!1,basename:T}),[r,E,T]),S=R.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return R.useEffect(()=>wb(n,r.future),[n,r.future]),R.createElement(R.Fragment,null,R.createElement(Ol.Provider,{value:j},R.createElement(Fv.Provider,{value:s},R.createElement(Nb.Provider,{value:b.current},R.createElement(jb.Provider,{value:l},R.createElement(Sb,{basename:T,location:s.location,navigationType:s.historyAction,navigator:E,future:S},s.initialized||r.future.v7_partialHydration?R.createElement($b,{routes:r.routes,future:r.future,state:s}):t))))),null)}const $b=R.memo(Mb);function Mb(e){let{routes:t,future:r,state:n}=e;return ob(t,void 0,n,r)}const Fb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_u=R.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:c}=t,h=Eb(t,Cb),{basename:p}=R.useContext(_n),y,v=!1;if(typeof u=="string"&&zb.test(u)&&(y=u,Fb))try{let m=new URL(window.location.href),E=u.startsWith("//")?new URL(m.protocol+u):new URL(u),T=hi(E.pathname,p);E.origin===m.origin&&T!=null?u=T+E.search+E.hash:v=!0}catch{}let b=rb(u,{relative:s}),g=Bb(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:c});function f(m){n&&n(m),m.defaultPrevented||g(m)}return R.createElement("a",_a({},h,{href:y||b,onClick:v||i?n:f,ref:r,target:l}))});var xp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xp||(xp={}));var Ep;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ep||(Ep={}));function Bb(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=t===void 0?{}:t,l=Ia(),u=pi(),d=Wv(e,{relative:a});return R.useCallback(c=>{if(kb(c,r)){c.preventDefault();let h=n!==void 0?n:ss(u)===ss(d);l(e,{replace:h,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,d,n,s,r,e,i,a,o])}async function Wb(){const{data:e,error:t}=await pe.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+window.location.pathname}});if(t)throw t;return e}async function Vb(){const{error:e}=await pe.auth.signOut();if(e)throw e}async function Hb(){const{data:{user:e}}=await pe.auth.getUser();return e}function qb(e){return pe.auth.onAuthStateChange(e)}function Yd(){const[e,t]=R.useState({user:null,session:null,isLoading:!0,isAuthenticated:!1});R.useEffect(()=>{Hb().then(i=>{t(a=>({...a,user:i,isLoading:!1,isAuthenticated:!!i}))});const{data:{subscription:s}}=qb((i,a)=>{t(o=>({...o,user:(a==null?void 0:a.user)??null,session:a,isLoading:!1,isAuthenticated:!!(a!=null&&a.user)}))});return()=>{s.unsubscribe()}},[]);const r=R.useCallback(async()=>{t(s=>({...s,isLoading:!0}));try{await Wb()}catch(s){throw t(i=>({...i,isLoading:!1})),s}},[]),n=R.useCallback(async()=>{t(s=>({...s,isLoading:!0}));try{await Vb(),t({user:null,session:null,isLoading:!1,isAuthenticated:!1})}catch(s){throw t(i=>({...i,isLoading:!1})),s}},[]);return{...e,login:r,logout:n}}const Kb={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-300"},Qb={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},Lt=R.forwardRef(({variant:e="primary",size:t="md",isLoading:r,className:n="",children:s,disabled:i,...a},o)=>_.jsxs("button",{ref:o,className:`
          inline-flex items-center justify-center
          rounded-lg font-medium
          transition-all duration-200
          focus:outline-none focus:ring-2 focus:ring-offset-2
          disabled:opacity-50 disabled:cursor-not-allowed
          ${Kb[e]}
          ${Qb[t]}
          ${n}
        `,disabled:i||r,...a,children:[r&&_.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]}));Lt.displayName="Button";const Gb={default:"bg-white shadow-md",bordered:"bg-white border border-gray-200",elevated:"bg-white shadow-lg"},Bs=R.forwardRef(({variant:e="default",className:t="",children:r,...n},s)=>_.jsx("div",{ref:s,className:`
          rounded-xl overflow-hidden
          ${Gb[e]}
          ${t}
        `,...n,children:r}));Bs.displayName="Card";const Jb=R.forwardRef(({className:e="",children:t,...r},n)=>_.jsx("div",{ref:n,className:`px-6 py-4 border-b border-gray-100 ${e}`,...r,children:t}));Jb.displayName="CardHeader";const Yb=R.forwardRef(({className:e="",children:t,...r},n)=>_.jsx("div",{ref:n,className:`px-6 py-4 ${e}`,...r,children:t}));Yb.displayName="CardContent";const Xb=R.forwardRef(({className:e="",children:t,...r},n)=>_.jsx("div",{ref:n,className:`px-6 py-4 border-t border-gray-100 bg-gray-50 ${e}`,...r,children:t}));Xb.displayName="CardFooter";const Zb={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"};function Pl({message:e,size:t="md",fullScreen:r=!1}){const n=_.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[_.jsxs("svg",{className:`animate-spin text-primary-600 ${Zb[t]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e&&_.jsx("p",{className:"text-gray-600",children:e})]});return r?_.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white/80 z-50",children:n}):n}function ek(){const e=pi(),{user:t,isAuthenticated:r,logout:n}=Yd(),s=[{path:"/decks",label:""},{path:"/stats",label:""}],i=a=>e.pathname.startsWith(a);return _.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:_.jsx("div",{className:"max-w-6xl mx-auto px-4",children:_.jsxs("div",{className:"flex items-center justify-between h-16",children:[_.jsxs(_u,{to:"/",className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-2xl",children:""}),_.jsx("span",{className:"text-xl font-bold text-primary-600",children:"VocabFlash"})]}),r&&_.jsx("nav",{className:"flex items-center gap-1",children:s.map(a=>_.jsx(_u,{to:a.path,className:`
                    px-4 py-2 rounded-lg text-sm font-medium transition-colors
                    ${i(a.path)?"bg-primary-50 text-primary-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}
                  `,children:a.label},a.path))}),_.jsx("div",{className:"flex items-center gap-4",children:r?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"text-sm text-gray-600",children:t==null?void 0:t.email}),_.jsx(Lt,{variant:"ghost",size:"sm",onClick:n,children:""})]}):_.jsx(_u,{to:"/login",children:_.jsx(Lt,{size:"sm",children:""})})})]})})})}function tk({requireAuth:e=!0}){const{isAuthenticated:t,isLoading:r}=Yd();return r?_.jsx(Pl,{fullScreen:!0,message:"..."}):e&&!t?_.jsx(zc,{to:"/login",replace:!0}):_.jsxs("div",{className:"min-h-screen bg-gray-50",children:[_.jsx(ek,{}),_.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8",children:_.jsx(_b,{})})]})}function rk(){const e=Ia(),{isAuthenticated:t,isLoading:r,login:n}=Yd();R.useEffect(()=>{t&&e("/decks",{replace:!0})},[t,e]);const s=async()=>{try{await n()}catch(i){console.error("Login error:",i)}};return _.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:_.jsx(Bs,{className:"w-full max-w-md",children:_.jsxs("div",{className:"p-8 text-center",children:[_.jsx("div",{className:"text-6xl mb-4",children:""}),_.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"VocabFlash"}),_.jsx("p",{className:"text-gray-600 mb-8",children:" SM-2 "}),_.jsxs("div",{className:"text-left mb-8 space-y-3",children:[_.jsx(fo,{icon:"",text:"SM-2 "}),_.jsx(fo,{icon:"",text:""}),_.jsx(fo,{icon:"",text:""}),_.jsx(fo,{icon:"",text:""})]}),_.jsxs(Lt,{onClick:s,isLoading:r,className:"w-full",size:"lg",children:[_.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),_.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),_.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),_.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})," Google "]}),_.jsx("p",{className:"text-xs text-gray-400 mt-6",children:""})]})})})}function fo({icon:e,text:t}){return _.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("span",{className:"text-xl",children:e}),_.jsx("span",{className:"text-gray-600",children:t})]})}const nk="vocab-flashcard-cache",Kv=1;let po=null;function cr(){return po||(po=new Promise((e,t)=>{const r=indexedDB.open(nk,Kv);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=n=>{const s=n.target.result;if(s.objectStoreNames.contains("words")||s.createObjectStore("words",{keyPath:"id"}).createIndex("deck_id","deck_id",{unique:!1}),!s.objectStoreNames.contains("userWords")){const i=s.createObjectStore("userWords",{keyPath:"id"});i.createIndex("deck_id","deck_id",{unique:!1}),i.createIndex("word_id","word_id",{unique:!1}),i.createIndex("user_word",["user_id","word_id"],{unique:!0})}s.objectStoreNames.contains("deckStats")||s.createObjectStore("deckStats",{keyPath:"deckId"}),s.objectStoreNames.contains("metadata")||s.createObjectStore("metadata",{keyPath:"key"})}}),po)}async function sk(e){const t=await cr();return new Promise((r,n)=>{const a=t.transaction("metadata","readonly").objectStore("metadata").get(e);a.onerror=()=>n(a.error),a.onsuccess=()=>r(a.result||null)})}async function Qv(e,t){const r=await cr();return new Promise((n,s)=>{const o=r.transaction("metadata","readwrite").objectStore("metadata").put({key:e,lastSync:t,version:Kv});o.onerror=()=>s(o.error),o.onsuccess=()=>n()})}async function ik(e){try{const t=await cr(),r=await new Promise((n,s)=>{const l=t.transaction("words","readonly").objectStore("words").index("deck_id").getAll(e);l.onerror=()=>s(l.error),l.onsuccess=()=>n(l.result||[])});return r.length===0?null:r}catch{return null}}async function ak(e,t){try{const n=(await cr()).transaction("words","readwrite"),s=n.objectStore("words"),i=s.index("deck_id"),a=await new Promise((o,l)=>{const u=i.getAllKeys(e);u.onerror=()=>l(u.error),u.onsuccess=()=>o(u.result)});for(const o of a)s.delete(o);for(const o of t)s.put(o);await new Promise((o,l)=>{n.oncomplete=()=>o(),n.onerror=()=>l(n.error)}),await Qv(`words-${e}`,Date.now())}catch(r){console.warn("Failed to cache words:",r)}}async function ok(e,t){try{const r=`userWords-${t}-${e}`,n=await cr(),s=await new Promise((i,a)=>{const d=n.transaction("userWords","readonly").objectStore("userWords").index("deck_id").getAll(e);d.onerror=()=>a(d.error),d.onsuccess=()=>{const c=(d.result||[]).filter(h=>h.user_id===t);i(c)}});return s.length===0?await sk(r)?[]:null:s}catch{return null}}async function lk(e,t,r){try{const s=(await cr()).transaction("userWords","readwrite"),i=s.objectStore("userWords"),a=i.index("deck_id"),o=await new Promise((l,u)=>{const d=a.getAll(e);d.onerror=()=>u(d.error),d.onsuccess=()=>l(d.result||[])});for(const l of o)l.user_id===t&&i.delete(l.id);for(const l of r)i.put(l);await new Promise((l,u)=>{s.oncomplete=()=>l(),s.onerror=()=>u(s.error)}),await Qv(`userWords-${t}-${e}`,Date.now())}catch(n){console.warn("Failed to cache user words:",n)}}async function uk(e){try{const r=(await cr()).transaction("userWords","readwrite");r.objectStore("userWords").put(e),await new Promise((s,i)=>{r.oncomplete=()=>s(),r.onerror=()=>i(r.error)})}catch(t){console.warn("Failed to update cached user word:",t)}}async function ck(){try{const e=await cr();return new Promise((t,r)=>{const i=e.transaction("deckStats","readonly").objectStore("deckStats").getAll();i.onerror=()=>r(i.error),i.onsuccess=()=>t(i.result||[])})}catch{return[]}}async function dk(e){try{const r=(await cr()).transaction("deckStats","readwrite"),n=r.objectStore("deckStats");for(const s of e)n.put(s);await new Promise((s,i)=>{r.oncomplete=()=>s(),r.onerror=()=>i(r.error)})}catch(t){console.warn("Failed to cache deck stats:",t)}}async function hk(e){try{const r=(await cr()).transaction("deckStats","readwrite");r.objectStore("deckStats").delete(e),await new Promise((s,i)=>{r.oncomplete=()=>s(),r.onerror=()=>i(r.error)})}catch(t){console.warn("Failed to invalidate deck stats:",t)}}async function fk(){const{data:e,error:t}=await pe.from("decks").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function pk(e){const{data:t,error:r}=await pe.from("decks").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t}async function mk(e){const{error:t}=await pe.from("decks").delete().eq("id",e);if(t)throw t}async function gk(e){const{data:{user:t}}=await pe.auth.getUser();if(!t)throw new Error("Not authenticated");if(e.length===0)return new Map;const[r,n,s]=await Promise.all([pe.from("words").select("deck_id").in("deck_id",e),pe.from("user_words").select("deck_id, repetitions").eq("user_id",t.id).in("deck_id",e),pe.from("user_words").select("deck_id, due_at").eq("user_id",t.id).in("deck_id",e).lte("due_at",new Date().toISOString())]),i=r.data||[],a=n.data||[],o=s.data||[],l=new Map,u=Date.now();for(const c of e){const h=i.filter(b=>b.deck_id===c).length,p=a.filter(b=>b.deck_id===c&&b.repetitions>0).length,y=o.filter(b=>b.deck_id===c).length,v=Math.max(0,h-p);l.set(c,{totalWords:h,learnedWords:p,dueToday:y,newWords:v})}const d=Array.from(l.entries()).map(([c,h])=>({deckId:c,...h,cachedAt:u}));return dk(d).catch(()=>{}),l}async function vk(e){const t=await ck(),r=new Map;for(const o of t)r.set(o.deckId,o);const n=Date.now(),s=60*1e3;if(e.every(o=>{const l=r.get(o);return l&&n-l.cachedAt<s})&&t.length>=e.length){const o=new Map;for(const l of e){const u=r.get(l);o.set(l,{totalWords:u.totalWords,learnedWords:u.learnedWords,dueToday:u.dueToday,newWords:u.newWords})}return{stats:o,fromCache:!0}}return{stats:await gk(e),fromCache:!1}}const Jn={all:["decks"],list:()=>[...Jn.all,"list"],detail:e=>[...Jn.all,"detail",e],stats:e=>[...Jn.all,"stats",e]};function yk(){return Na({queryKey:Jn.list(),queryFn:fk,staleTime:5*60*1e3})}function wk(e){return Na({queryKey:Jn.detail(e),queryFn:()=>pk(e),enabled:!!e})}function _k(e){return Na({queryKey:["decks","allStats",e.sort().join(",")],queryFn:async()=>{const{stats:t}=await vk(e),r={};return t.forEach((n,s)=>{r[s]=n}),r},enabled:e.length>0,staleTime:60*1e3})}function Sk(){const e=bl();return dv({mutationFn:mk,onSuccess:()=>{e.invalidateQueries({queryKey:Jn.list()})}})}function xk({deck:e,stats:t,onStartReview:r,onEdit:n,onDelete:s}){const i=t&&t.dueToday>0;return _.jsx(Bs,{className:"hover:shadow-lg transition-shadow",children:_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex items-start justify-between mb-4",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-bold text-gray-800",children:e.name}),e.description&&_.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]}),e.is_public&&_.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:""})]}),t&&_.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[_.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[_.jsx("div",{className:"text-2xl font-bold text-gray-700",children:t.totalWords}),_.jsx("div",{className:"text-xs text-gray-500",children:""})]}),_.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[_.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.learnedWords}),_.jsx("div",{className:"text-xs text-gray-500",children:""})]}),_.jsxs("div",{className:`text-center p-3 rounded-lg ${i?"bg-red-50":"bg-gray-50"}`,children:[_.jsx("div",{className:`text-2xl font-bold ${i?"text-red-600":"text-gray-400"}`,children:t.dueToday}),_.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Lt,{onClick:r,className:"flex-1",variant:i?"primary":"secondary",children:i?` (${t==null?void 0:t.dueToday})`:""}),n&&_.jsx(Lt,{variant:"ghost",size:"sm",onClick:n,children:""}),s&&_.jsx(Lt,{variant:"ghost",size:"sm",onClick:s,children:""})]})]})})}function Ek({decks:e,onStartReview:t,onEdit:r,onDelete:n}){const s=R.useMemo(()=>e.map(a=>a.id),[e]),{data:i}=_k(s);return e.length===0?_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"text-6xl mb-4",children:""}),_.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:""}),_.jsx("p",{className:"text-gray-500",children:""})]}):_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>_.jsx(xk,{deck:a,stats:i==null?void 0:i[a.id],onStartReview:()=>t(a.id),onEdit:r?()=>r(a.id):void 0,onDelete:n?()=>n(a.id):void 0},a.id))})}function bk(){const e=Ia(),{data:t,isLoading:r,error:n}=yk(),s=Sk(),i=o=>{e(`/review/${o}`)},a=async o=>{if(confirm(""))try{await s.mutateAsync(o)}catch(l){console.error("Delete deck error:",l),alert("")}};return r?_.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:_.jsx(Pl,{message:"..."})}):n?_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"text-6xl mb-4",children:""}),_.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:""}),_.jsx("p",{className:"text-gray-500 mb-4",children:n.message}),_.jsx(Lt,{onClick:()=>window.location.reload(),children:""})]}):_.jsxs("div",{children:[_.jsx("div",{className:"flex items-center justify-between mb-8",children:_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:""}),_.jsx("p",{className:"text-gray-500 mt-1",children:""})]})}),_.jsx(Ek,{decks:t||[],onStartReview:i,onDelete:a}),t&&t.length===0&&_.jsx("div",{className:"mt-8 p-6 bg-blue-50 rounded-xl text-center",children:_.jsx("p",{className:"text-blue-700",children:"  Supabase  seed.sql "})})]})}const Sa={MIN_EASE_FACTOR:1.3,DEFAULT_EASE_FACTOR:2.5,FIRST_INTERVAL:1,SECOND_INTERVAL:6};function bp(e,t){const r=.1-(5-t)*(.08+(5-t)*.02),n=e+r;return Math.max(Sa.MIN_EASE_FACTOR,n)}function kk(e,t,r){return e===0?Sa.FIRST_INTERVAL:e===1?Sa.SECOND_INTERVAL:Math.round(r*t)}function Gv(e,t){const r=t>=3;let n,s,i;r?(n=e.repetitions+1,s=bp(e.easeFactor,t),i=kk(e.repetitions,s,e.interval)):(n=0,s=bp(e.easeFactor,t),i=Sa.FIRST_INTERVAL);const a={repetitions:n,easeFactor:Math.round(s*100)/100,interval:i},o=new Date;return o.setDate(o.getDate()+i),o.setHours(0,0,0,0),{nextState:a,nextDueDate:o,wasCorrect:r}}function Ck(){return{repetitions:0,easeFactor:Sa.DEFAULT_EASE_FACTOR,interval:0}}function Rk(e){const t={};for(let r=0;r<=5;r++){const n=Gv(e,r);t[r]=n.nextState.interval}return t}function Jv(e){return e===0?"":e===1?"1 ":e<7?`${e} `:e<30?`${Math.round(e/7)} `:e<365?`${Math.round(e/30)} `:`${Math.round(e/365*10)/10} `}function Tk(e){const t=Math.min(e.repetitions/5,1)*50,r=Math.min(e.interval/30,1)*50;return Math.round(t+r)}async function kp(e){const{data:t,error:r}=await pe.from("words").select("*").eq("deck_id",e).order("created_at",{ascending:!0});if(r)throw r;const n=t||[];return ak(e,n).catch(()=>{}),n}async function Cp(e,t){const{data:r,error:n}=await pe.from("user_words").select("*").eq("user_id",t).eq("deck_id",e);if(n)throw n;const s=r||[];return lk(e,t,s).catch(()=>{}),s}async function Ok(e,t=20){const{data:{user:r}}=await pe.auth.getUser();if(!r)throw new Error("Not authenticated");const n=new Date;let s=await ik(e),i=await ok(e,r.id);if(s&&i!==null)Promise.all([kp(e),Cp(e,r.id)]).catch(()=>{});else{const[h,p]=await Promise.all([kp(e),Cp(e,r.id)]);s=h,i=p}const a=new Map;for(const h of s)a.set(h.id,h);const o=new Map,l=new Set;for(const h of i)o.set(h.word_id,h),l.add(h.word_id);const u=[],d=i.filter(h=>new Date(h.due_at)<=n).sort((h,p)=>new Date(h.due_at).getTime()-new Date(p.due_at).getTime());for(const h of d){const p=a.get(h.word_id);p&&u.push({id:h.id,wordId:h.word_id,word:p.word,meaningZh:p.meaning_zh,exampleSentence:p.example_sentence||void 0,pronunciation:p.pronunciation||void 0,sm2State:{repetitions:h.repetitions,easeFactor:Number(h.ease_factor),interval:h.interval},isNew:!1})}const c=s.filter(h=>!l.has(h.id)).slice(0,t);for(const h of c)u.push({id:"",wordId:h.id,word:h.word,meaningZh:h.meaning_zh,exampleSentence:h.example_sentence||void 0,pronunciation:h.pronunciation||void 0,sm2State:Ck(),isNew:!0});return u}async function Pk(e){const{wordId:t,deckId:r,quality:n,newState:s,nextDueDate:i,previousState:a}=e,o=n>=3,l=new Date().toISOString(),{data:{user:u}}=await pe.auth.getUser();if(!u)throw new Error("Not authenticated");const d={id:"",user_id:u.id,word_id:t,deck_id:r,repetitions:s.repetitions,ease_factor:s.easeFactor,interval:s.interval,due_at:i.toISOString(),last_review_at:l,total_reviews:0,correct_reviews:0,created_at:l,updated_at:l};uk(d).catch(()=>{}),hk(r).catch(()=>{}),Promise.all([pe.rpc("upsert_user_word_with_stats",{p_user_id:u.id,p_word_id:t,p_deck_id:r,p_repetitions:s.repetitions,p_ease_factor:s.easeFactor,p_interval:s.interval,p_due_at:i.toISOString(),p_was_correct:o}).then(({error:c})=>{if((c==null?void 0:c.code)==="42883")return jk(u.id,e,o,l);c&&console.error("upsert error:",c)}),pe.from("review_logs").insert({user_id:u.id,word_id:t,deck_id:r,quality:n,ease_factor_before:(a==null?void 0:a.easeFactor)||null,ease_factor_after:s.easeFactor,interval_before:(a==null?void 0:a.interval)||null,interval_after:s.interval,reviewed_at:l})]).catch(c=>console.error("submitReview background error:",c))}async function jk(e,t,r,n){const{wordId:s,deckId:i,newState:a,nextDueDate:o}=t;await pe.from("user_words").upsert({user_id:e,word_id:s,deck_id:i,repetitions:a.repetitions,ease_factor:a.easeFactor,interval:a.interval,due_at:o.toISOString(),last_review_at:n},{onConflict:"user_id,word_id"});try{await pe.rpc("increment_review_stats",{p_user_id:e,p_word_id:s,p_was_correct:r})}catch{}}async function Nk(){const{data:{user:e}}=await pe.auth.getUser();if(!e)throw new Error("Not authenticated");const{data:t}=await pe.from("user_words").select("*").eq("user_id",e.id),r=t||[],n=r.length,s=r.filter(v=>v.repetitions>0).length,i=r.filter(v=>v.interval>21).length,a=new Date;a.setHours(0,0,0,0);const o=a.toISOString(),{count:l}=await pe.from("review_logs").select("*",{count:"exact",head:!0}).eq("user_id",e.id).gte("reviewed_at",o),{count:u}=await pe.from("review_logs").select("*",{count:"exact",head:!0}).eq("user_id",e.id).gte("reviewed_at",o).or("interval_before.is.null,interval_before.eq.0"),d=await Ak(e.id),c=new Date;c.setDate(c.getDate()-30);const{data:h}=await pe.from("review_logs").select("reviewed_at, quality").eq("user_id",e.id).gte("reviewed_at",c.toISOString()).order("reviewed_at",{ascending:!0}),p=Ik(h||[]),y=await Dk(e.id);return{totalWords:n,learnedWords:s,masteredWords:i,todayReviewed:l||0,todayNewLearned:u||0,currentStreak:d,dailyStats:p,forecast:y}}async function Ak(e){const{data:t}=await pe.from("review_logs").select("reviewed_at").eq("user_id",e).order("reviewed_at",{ascending:!1});if(!t||t.length===0)return 0;const r=new Set;for(const o of t){const l=new Date(o.reviewed_at).toISOString().split("T")[0];r.add(l)}const n=Array.from(r).sort().reverse(),s=new Date().toISOString().split("T")[0],i=new Date(Date.now()-864e5).toISOString().split("T")[0];if(n[0]!==s&&n[0]!==i)return 0;let a=1;for(let o=1;o<n.length;o++){const l=new Date(n[o-1]),u=new Date(n[o]);if((l.getTime()-u.getTime())/864e5===1)a++;else break}return a}function Ik(e){const t={};for(const r of e){const n=new Date(r.reviewed_at).toISOString().split("T")[0];t[n]||(t[n]={reviewed:0,correct:0,newLearned:0}),t[n].reviewed++,r.quality>=3&&t[n].correct++}return Object.entries(t).map(([r,n])=>({date:r,...n}))}async function Dk(e){const t=[],r=new Date;for(let n=0;n<7;n++){const s=new Date(r);s.setDate(s.getDate()+n),s.setHours(23,59,59,999);const i=new Date(s);i.setHours(0,0,0,0);const{count:a}=await pe.from("user_words").select("*",{count:"exact",head:!0}).eq("user_id",e).gte("due_at",i.toISOString()).lte("due_at",s.toISOString()),o=["","","","","","",""];t.push({date:s.toISOString().split("T")[0],label:n===0?"":n===1?"":`${o[s.getDay()]}`,count:a||0})}return t}const Lk={dueWords:e=>["review","due",e]};function Uk(e,t=20){return Na({queryKey:Lk.dueWords(e),queryFn:()=>Ok(e,t),enabled:!!e,staleTime:0,refetchOnWindowFocus:!1})}function $k(){const e=bl();return dv({mutationFn:Pk,onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["stats"]}),e.invalidateQueries({queryKey:Jn.stats(r.deckId)})}})}function Mk(){const e=R.useCallback((s,i)=>Gv(s,i),[]),t=R.useCallback(s=>Rk(s),[]),r=R.useCallback(s=>Jv(s),[]),n=R.useCallback(s=>Tk(s),[]);return{processReview:e,previewIntervals:t,formatIntervalText:r,getMastery:n}}function Fk({word:e,meaningZh:t,pronunciation:r,exampleSentence:n,isFlipped:s,onFlip:i}){return _.jsx("div",{className:"perspective w-full max-w-lg mx-auto cursor-pointer",onClick:i,children:_.jsxs("div",{className:`
          relative w-full h-80 transition-transform duration-500
          preserve-3d
          ${s?"rotate-y-180":""}
        `,style:{transformStyle:"preserve-3d"},children:[_.jsxs("div",{className:`
            absolute inset-0 backface-hidden
            bg-white rounded-2xl shadow-lg
            flex flex-col items-center justify-center p-8
            border-2 border-gray-100
          `,style:{backfaceVisibility:"hidden"},children:[_.jsx("span",{className:"text-4xl md:text-5xl font-bold text-gray-800 text-center",children:e}),r&&_.jsx("span",{className:"mt-4 text-lg text-gray-500",children:r}),_.jsx("span",{className:"mt-8 text-sm text-gray-400",children:""})]}),_.jsxs("div",{className:`
            absolute inset-0 backface-hidden rotate-y-180
            bg-gradient-to-br from-primary-50 to-primary-100
            rounded-2xl shadow-lg
            flex flex-col items-center justify-center p-8
            border-2 border-primary-200
          `,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[_.jsx("span",{className:"text-2xl font-bold text-gray-800 text-center mb-2",children:e}),_.jsx("span",{className:"text-3xl md:text-4xl font-bold text-primary-700 text-center",children:t}),n&&_.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center italic max-w-xs",children:['"',n,'"']})]})]})})}const zk=[{quality:1,label:"Again",shortcut:"1",variant:"danger",description:""},{quality:3,label:"Hard",shortcut:"2",variant:"warning",description:""},{quality:4,label:"Good",shortcut:"3",variant:"primary",description:""},{quality:5,label:"Easy",shortcut:"4",variant:"success",description:""}];function Bk({onRate:e,intervals:t,disabled:r}){return _.jsxs("div",{className:"mt-8 w-full max-w-lg mx-auto",children:[_.jsx("p",{className:"text-center text-sm text-gray-500 mb-4",children:""}),_.jsx("div",{className:"grid grid-cols-4 gap-2",children:zk.map(n=>_.jsxs("button",{onClick:()=>e(n.quality),disabled:r,className:`
              flex flex-col items-center justify-center
              p-3 rounded-xl transition-all
              disabled:opacity-50 disabled:cursor-not-allowed
              ${n.variant==="danger"?"bg-red-50 hover:bg-red-100 text-red-700 border-2 border-red-200":n.variant==="warning"?"bg-yellow-50 hover:bg-yellow-100 text-yellow-700 border-2 border-yellow-200":n.variant==="primary"?"bg-primary-50 hover:bg-primary-100 text-primary-700 border-2 border-primary-200":"bg-green-50 hover:bg-green-100 text-green-700 border-2 border-green-200"}
            `,children:[_.jsx("span",{className:"text-lg font-bold",children:n.label}),_.jsx("span",{className:"text-xs opacity-75 mt-1",children:Jv(t[n.quality])}),_.jsxs("span",{className:"text-[10px] opacity-50 mt-1",children:["[",n.shortcut,"]"]})]},n.quality))}),_.jsx("p",{className:"text-center text-xs text-gray-400 mt-4",children:" 1-4 "})]})}function Wk({progress:e,current:t,total:r}){return _.jsx("div",{className:"w-full bg-white border-b border-gray-100 px-4 py-3",children:_.jsxs("div",{className:"max-w-lg mx-auto",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsxs("span",{className:"text-sm text-gray-600",children:[" ",t,"/",r]}),_.jsxs("span",{className:"text-sm font-medium text-primary-600",children:[Math.round(e),"%"]})]}),_.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${e}%`}})})]})})}function Vk({stats:e,onBackToDecks:t,onContinue:r}){const n=e.total>0?Math.round(e.correct/e.total*100):0;return _.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center p-8",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"text-6xl mb-4",children:n>=80?"":n>=60?"":""}),_.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:""}),_.jsx("p",{className:"text-gray-600",children:""})]}),_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 w-full max-w-2xl",children:[_.jsx(mo,{label:"",value:e.total,color:"gray"}),_.jsx(mo,{label:"",value:e.correct,color:"green"}),_.jsx(mo,{label:"",value:e.incorrect,color:"red"}),_.jsx(mo,{label:"",value:e.newLearned,color:"blue"})]}),_.jsxs("div",{className:"mb-8 text-center",children:[_.jsx("div",{className:"text-sm text-gray-500 mb-1",children:""}),_.jsxs("div",{className:`text-4xl font-bold ${n>=80?"text-green-600":n>=60?"text-yellow-600":"text-red-600"}`,children:[n,"%"]})]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsx(Lt,{variant:"secondary",onClick:t,children:""}),r&&_.jsx(Lt,{onClick:r,children:""})]})]})}function mo({label:e,value:t,color:r}){const n={gray:"bg-gray-50 text-gray-700",green:"bg-green-50 text-green-700",red:"bg-red-50 text-red-700",blue:"bg-blue-50 text-blue-700"};return _.jsxs("div",{className:`rounded-xl p-4 text-center ${n[r]}`,children:[_.jsx("div",{className:"text-3xl font-bold",children:t}),_.jsx("div",{className:"text-sm opacity-75",children:e})]})}function Hk(){const{deckId:e}=ab(),t=Ia(),[r,n]=R.useState("loading"),[s,i]=R.useState(0),[a,o]=R.useState(!1),[l,u]=R.useState([]),[d,c]=R.useState({total:0,correct:0,incorrect:0,newLearned:0}),{data:h}=wk(e),{data:p,isLoading:y,refetch:v}=Uk(e),b=$k(),{processReview:g,previewIntervals:f}=Mk();R.useEffect(()=>{p&&(p.length>0?(u(p),c(D=>({...D,total:p.length})),n("reviewing")):n("empty"))},[p]);const m=l[s],E=R.useCallback(()=>{o(D=>!D)},[]),T=R.useCallback(async D=>{if(!m||!e)return;const P=m.sm2State,Q=g(P,D),te=D>=3;c(Z=>({...Z,correct:Z.correct+(te?1:0),incorrect:Z.incorrect+(te?0:1),newLearned:Z.newLearned+(m.isNew&&te?1:0)}));try{await b.mutateAsync({wordId:m.wordId,deckId:e,quality:D,newState:Q.nextState,nextDueDate:Q.nextDueDate,previousState:P})}catch(Z){console.error("Submit review error:",Z)}te||(u(Z=>[...Z,{...m,sm2State:Q.nextState,isNew:!1}]),c(Z=>({...Z,total:Z.total+1}))),o(!1),s<l.length-1?i(Z=>Z+1):te?n("summary"):i(Z=>Z+1)},[m,s,l.length,g,b,e]);R.useEffect(()=>{const D=P=>{if(r==="reviewing"){if(P.code==="Space"&&!a)P.preventDefault(),E();else if(a){const Q={Digit1:1,Digit2:3,Digit3:4,Digit4:5};Q[P.code]!==void 0&&(P.preventDefault(),T(Q[P.code]))}}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[r,a,E,T]);const j=async()=>{i(0),o(!1),c({total:0,correct:0,incorrect:0,newLearned:0}),n("loading"),await v()};if(y||r==="loading")return _.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:_.jsx(Pl,{message:"..."})});if(r==="empty")return _.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"text-6xl mb-4",children:""}),_.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:""}),_.jsx("p",{className:"text-gray-600 mb-6",children:""}),_.jsxs("div",{className:"flex justify-center gap-4",children:[_.jsx(Lt,{variant:"secondary",onClick:()=>t("/decks"),children:""}),_.jsx(Lt,{onClick:j,children:""})]})]});if(r==="summary")return _.jsx(Vk,{stats:d,onBackToDecks:()=>t("/decks"),onContinue:j});const S=(s+1)/l.length*100,O=m?f(m.sm2State):null;return _.jsxs("div",{className:"min-h-[80vh] flex flex-col -mx-4 -mt-8",children:[h&&_.jsx("div",{className:"bg-white border-b px-4 py-2",children:_.jsx("p",{className:"text-sm text-gray-600 text-center",children:h.name})}),_.jsx(Wk,{progress:S,current:s+1,total:l.length}),_.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:m&&_.jsxs(_.Fragment,{children:[m.isNew&&_.jsx("div",{className:"mb-4",children:_.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full",children:""})}),_.jsx(Fk,{word:m.word,meaningZh:m.meaningZh,pronunciation:m.pronunciation,exampleSentence:m.exampleSentence,isFlipped:a,onFlip:E}),a&&O&&_.jsx(Bk,{onRate:T,intervals:O,disabled:b.isPending}),!a&&_.jsxs("p",{className:"mt-6 text-gray-500",children:[" ",_.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"Space"})," "]})]})})]})}const Yv={all:["stats"],user:()=>[...Yv.all,"user"]};function qk(){return Na({queryKey:Yv.user(),queryFn:Nk,staleTime:60*1e3})}function Kk({totalWords:e,learnedWords:t,masteredWords:r,streak:n,todayReviewed:s}){const i=[{label:"",value:t,total:e,icon:"",color:"blue"},{label:"",value:r,total:t,icon:"",color:"yellow"},{label:"",value:s,icon:"",color:"green"},{label:"",value:n,suffix:"",icon:"",color:"red"}];return _.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.map(a=>_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:[_.jsx("div",{className:"text-3xl mb-2",children:a.icon}),_.jsxs("div",{className:"text-3xl font-bold text-gray-800",children:[a.value,a.suffix&&_.jsx("span",{className:"text-lg font-normal text-gray-500",children:a.suffix})]}),a.total!==void 0&&_.jsxs("div",{className:"text-sm text-gray-400",children:["/ ",a.total]}),_.jsx("div",{className:"text-sm text-gray-500 mt-1",children:a.label})]},a.label))})}function Qk(){const{data:e,isLoading:t,error:r}=qk();return t?_.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:_.jsx(Pl,{message:"..."})}):r?_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"text-6xl mb-4",children:""}),_.jsx("h3",{className:"text-xl font-medium text-gray-600",children:""})]}):e?_.jsxs("div",{children:[_.jsxs("div",{className:"mb-8",children:[_.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:""}),_.jsx("p",{className:"text-gray-500 mt-1",children:""})]}),_.jsx(Kk,{totalWords:e.totalWords,learnedWords:e.learnedWords,masteredWords:e.masteredWords,streak:e.currentStreak,todayReviewed:e.todayReviewed}),_.jsx(Bs,{className:"mt-8",children:_.jsxs("div",{className:"p-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" 7 "}),_.jsx("div",{className:"grid grid-cols-7 gap-2",children:e.forecast.map(n=>_.jsxs("div",{className:`text-center p-3 rounded-lg ${n.count>0?"bg-primary-50":"bg-gray-50"}`,children:[_.jsx("div",{className:"text-sm text-gray-500",children:n.label}),_.jsx("div",{className:`text-2xl font-bold ${n.count>0?"text-primary-600":"text-gray-300"}`,children:n.count})]},n.date))})]})}),_.jsx(Bs,{className:"mt-8",children:_.jsxs("div",{className:"p-6",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" 7 "}),e.dailyStats.length>0?_.jsx("div",{className:"space-y-3",children:e.dailyStats.slice(-7).reverse().map(n=>_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("span",{className:"text-sm text-gray-500 w-24",children:Gk(n.date)}),_.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all",style:{width:`${Math.min(100,n.reviewed/50*100)}%`}})}),_.jsxs("span",{className:"text-sm font-medium text-gray-700 w-16 text-right",children:[n.reviewed," "]})]},n.date))}):_.jsx("p",{className:"text-gray-500 text-center py-8",children:""})]})}),_.jsx(Bs,{className:"mt-8 bg-gradient-to-r from-primary-50 to-blue-50",children:_.jsxs("div",{className:"p-6",children:[_.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:" "}),_.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[_.jsx("li",{children:" "}),_.jsx("li",{children:" HardAgain"}),_.jsx("li",{children:" "})]})]})})]}):null}function Gk(e){const t=new Date(e),r=t.getMonth()+1,n=t.getDate();return`${r}/${n}`}const Jk=Tb([{path:"/login",element:_.jsx(rk,{})},{path:"/",element:_.jsx(tk,{requireAuth:!0}),children:[{index:!0,element:_.jsx(zc,{to:"/decks",replace:!0})},{path:"decks",element:_.jsx(bk,{})},{path:"review/:deckId",element:_.jsx(Hk,{})},{path:"stats",element:_.jsx(Qk,{})}]},{path:"*",element:_.jsx(zc,{to:"/decks",replace:!0})}]);function Yk(){return _.jsx(Ub,{router:Jk})}async function Xk(){const e=window.location.hash;if(e&&e.includes("access_token")){const t=new URLSearchParams(e.substring(1)),r=t.get("access_token"),n=t.get("refresh_token");if(r&&n){await pe.auth.setSession({access_token:r,refresh_token:n}),window.location.hash="",window.location.reload();return}}}Xk();const Zk=new h_({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}});Xg(document.getElementById("root")).render(_.jsx(R.StrictMode,{children:_.jsx(f_,{client:Zk,children:_.jsx(Yk,{})})}));
